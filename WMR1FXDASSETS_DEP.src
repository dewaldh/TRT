#<AdxTL>@(#)0.0.0.0 $Revision$Class Asset
# Supervisor
## ACLA-CLASSE ## FXDASSETS_DEP
# 2018-08-27 13:15:23 609

 
####################################################################
# Labels of the main class and methods 
####################################################################
 
####################################################################
# 1 : DPRPLN Depreciation plan ( Field Local menu number 3101)
####################################################################
 
$SET_DPRPLN
If [L]_AOLDVAL<>this.DPRPLN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRPLN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRPLN
 Gosub PROPAGATE_DPRPLN
Endif
Return

$INIT_DPRPLN
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRPLN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DPRPLN=0 and fmet this.AGETATTRIBUTE("DPRPLN","$isMandatory")="true"
 this.DPRPLN = 1
Endif
Return
 
$CONTROL_DPRPLN
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRPLN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRPLN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRPLN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRPLN
[L]CURPRO = "DPRPLN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRPLN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRPLN
[L]CURPRO = "DPRPLN"
If this.DPRPLN<0 or this.DPRPLN>len(mess(0,3101,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"3101 ->"-num$(this.DPRPLN)-mess(99,123,1)):  Return : # Local menu "3101 -> Invalid option
Endif
Return

$_AOTHERS_DPRPLN
[L]CURPRO = "DPRPLN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRPLN
[L]CURPRO = "DPRPLN"
Return

$PROPAGATE_DPRPLN
this.isReadonly = 0
[L]CURPRO = "DPRPLN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRPLN
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRPLN"
$_LNKPRO_DPRPLN
Return


####################################################################
# 2 : DPM Depreciation method ( Field DPM 8)
####################################################################
 
$SET_DPM
If [L]_AOLDVAL<>this.DPM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPM
 Gosub PROPAGATE_DPM
Endif
Return

$INIT_DPM
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPM
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPM
[L]CURPRO = "DPM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DPM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPM
[L]CURPRO = "DPM"
If vireblc(this.DPM,2)<>vireblc(format$("K:8c",this.DPM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DPM
[L]CURPRO = "DPM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPM
[L]CURPRO = "DPM"
Return

$PROPAGATE_DPM
this.isReadonly = 0
[L]CURPRO = "DPM"
Gosub _LNKPRO_DPM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPM
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPM"
$_LNKPRO_DPM
If vireblc(this.DPM,2)<>""
 # Link DPRMOD
 Local File DPRMOD [WDPM]
 Read [F:WDPM]DPM0 = "";""
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("DPM","$description",[F:WDPM]DES)
 Endif
 LogicClose File [WDPM]
Endif
Return


####################################################################
# 3 : DPRDUR Depreciation duration ( Field DUR 0)
####################################################################
 
$SET_DPRDUR
If [L]_AOLDVAL<>this.DPRDUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRDUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRDUR
 Gosub PROPAGATE_DPRDUR
Endif
Return

$INIT_DPRDUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRDUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPRDUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRDUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRDUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRDUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRDUR
[L]CURPRO = "DPRDUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRDUR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRDUR
[L]CURPRO = "DPRDUR"
Return

$_AOTHERS_DPRDUR
[L]CURPRO = "DPRDUR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRDUR
[L]CURPRO = "DPRDUR"
Return

$PROPAGATE_DPRDUR
this.isReadonly = 0
[L]CURPRO = "DPRDUR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRDUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRDUR"
$_LNKPRO_DPRDUR
Return


####################################################################
# 4 : DPRRAT Depreciation rate ( Field RA1 0)
####################################################################
 
$SET_DPRRAT
If [L]_AOLDVAL<>this.DPRRAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRRAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRRAT
 Gosub PROPAGATE_DPRRAT
Endif
Return

$INIT_DPRRAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRRAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPRRAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRRAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRRAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRRAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRRAT
[L]CURPRO = "DPRRAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRRAT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRRAT
[L]CURPRO = "DPRRAT"
Return

$_AOTHERS_DPRRAT
[L]CURPRO = "DPRRAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRRAT
[L]CURPRO = "DPRRAT"
Return

$PROPAGATE_DPRRAT
this.isReadonly = 0
[L]CURPRO = "DPRRAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRRAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRRAT"
$_LNKPRO_DPRRAT
Return


####################################################################
# 5 : DPRRAT2 Exc. depr rate ( Field RA1 0)
####################################################################
 
$SET_DPRRAT2
If [L]_AOLDVAL<>this.DPRRAT2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRRAT2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRRAT2
 Gosub PROPAGATE_DPRRAT2
Endif
Return

$INIT_DPRRAT2
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRRAT2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPRRAT2
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRRAT2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRRAT2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRRAT2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRRAT2
[L]CURPRO = "DPRRAT2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRRAT2=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRRAT2
[L]CURPRO = "DPRRAT2"
Return

$_AOTHERS_DPRRAT2
[L]CURPRO = "DPRRAT2"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRRAT2
[L]CURPRO = "DPRRAT2"
Return

$PROPAGATE_DPRRAT2
this.isReadonly = 0
[L]CURPRO = "DPRRAT2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRRAT2
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRRAT2"
$_LNKPRO_DPRRAT2
Return


####################################################################
# 6 : ACLCOE Accel. coeff. ( Field RA1 0)
####################################################################
 
$SET_ACLCOE
If [L]_AOLDVAL<>this.ACLCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ACLCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ACLCOE
 Gosub PROPAGATE_ACLCOE
Endif
Return

$INIT_ACLCOE
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ACLCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ACLCOE
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ACLCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ACLCOE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ACLCOE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ACLCOE
[L]CURPRO = "ACLCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ACLCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ACLCOE
[L]CURPRO = "ACLCOE"
Return

$_AOTHERS_ACLCOE
[L]CURPRO = "ACLCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ACLCOE
[L]CURPRO = "ACLCOE"
Return

$PROPAGATE_ACLCOE
this.isReadonly = 0
[L]CURPRO = "ACLCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ACLCOE
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ACLCOE"
$_LNKPRO_ACLCOE
Return


####################################################################
# 7 : PRATYP Prorata ( Field Local menu number 3105)
####################################################################
 
$SET_PRATYP
If [L]_AOLDVAL<>this.PRATYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PRATYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PRATYP
 Gosub PROPAGATE_PRATYP
Endif
Return

$INIT_PRATYP
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "PRATYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PRATYP=0 and fmet this.AGETATTRIBUTE("PRATYP","$isMandatory")="true"
 this.PRATYP = 1
Endif
Return
 
$CONTROL_PRATYP
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "PRATYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PRATYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PRATYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PRATYP
[L]CURPRO = "PRATYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PRATYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PRATYP
[L]CURPRO = "PRATYP"
If this.PRATYP<0 or this.PRATYP>len(mess(0,3105,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"3105 ->"-num$(this.PRATYP)-mess(99,123,1)):  Return : # Local menu "3105 -> Invalid option
Endif
Return

$_AOTHERS_PRATYP
[L]CURPRO = "PRATYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PRATYP
[L]CURPRO = "PRATYP"
Return

$PROPAGATE_PRATYP
this.isReadonly = 0
[L]CURPRO = "PRATYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PRATYP
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "PRATYP"
$_LNKPRO_PRATYP
Return


####################################################################
# 8 : STRDPRDAT Depreciation start date ( Field D4)
####################################################################
 
$SET_STRDPRDAT
If [L]_AOLDVAL<>this.STRDPRDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STRDPRDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STRDPRDAT
 Gosub PROPAGATE_STRDPRDAT
Endif
Return

$INIT_STRDPRDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "STRDPRDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STRDPRDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "STRDPRDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STRDPRDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STRDPRDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STRDPRDAT
[L]CURPRO = "STRDPRDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STRDPRDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STRDPRDAT
[L]CURPRO = "STRDPRDAT"
Return

$_AOTHERS_STRDPRDAT
[L]CURPRO = "STRDPRDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STRDPRDAT
[L]CURPRO = "STRDPRDAT"
Return

$PROPAGATE_STRDPRDAT
this.isReadonly = 0
[L]CURPRO = "STRDPRDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STRDPRDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "STRDPRDAT"
$_LNKPRO_STRDPRDAT
Return


####################################################################
# 9 : ENDDPRDAT Depre end ( Field D4)
####################################################################
 
$SET_ENDDPRDAT
If [L]_AOLDVAL<>this.ENDDPRDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ENDDPRDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ENDDPRDAT
 Gosub PROPAGATE_ENDDPRDAT
Endif
Return

$INIT_ENDDPRDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ENDDPRDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ENDDPRDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ENDDPRDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ENDDPRDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ENDDPRDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ENDDPRDAT
[L]CURPRO = "ENDDPRDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ENDDPRDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ENDDPRDAT
[L]CURPRO = "ENDDPRDAT"
Return

$_AOTHERS_ENDDPRDAT
[L]CURPRO = "ENDDPRDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ENDDPRDAT
[L]CURPRO = "ENDDPRDAT"
Return

$PROPAGATE_ENDDPRDAT
this.isReadonly = 0
[L]CURPRO = "ENDDPRDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ENDDPRDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ENDDPRDAT"
$_LNKPRO_ENDDPRDAT
Return


####################################################################
# 10 : DPRBAS Bal sht amt ( Field MD1 0)
####################################################################
 
$SET_DPRBAS
If [L]_AOLDVAL<>this.DPRBAS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRBAS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRBAS
 Gosub PROPAGATE_DPRBAS
Endif
Return

$INIT_DPRBAS
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRBAS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPRBAS
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRBAS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRBAS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRBAS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRBAS
[L]CURPRO = "DPRBAS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRBAS=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRBAS
[L]CURPRO = "DPRBAS"
Return

$_AOTHERS_DPRBAS
[L]CURPRO = "DPRBAS"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"DPRBAS",this.DPRBAS,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRBAS
[L]CURPRO = "DPRBAS"
Return

$PROPAGATE_DPRBAS
this.isReadonly = 0
[L]CURPRO = "DPRBAS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRBAS
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRBAS"
$_LNKPRO_DPRBAS
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"DPRBAS",this.DPRBAS,[L]AFORMAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("DPRBAS","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 11 : RSDVAL Resid. value ( Field MD1 0)
####################################################################
 
$SET_RSDVAL
If [L]_AOLDVAL<>this.RSDVAL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RSDVAL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RSDVAL
 Gosub PROPAGATE_RSDVAL
Endif
Return

$INIT_RSDVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "RSDVAL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RSDVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "RSDVAL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RSDVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RSDVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RSDVAL
[L]CURPRO = "RSDVAL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RSDVAL=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RSDVAL
[L]CURPRO = "RSDVAL"
Return

$_AOTHERS_RSDVAL
[L]CURPRO = "RSDVAL"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"RSDVAL",this.RSDVAL,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RSDVAL
[L]CURPRO = "RSDVAL"
Return

$PROPAGATE_RSDVAL
this.isReadonly = 0
[L]CURPRO = "RSDVAL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RSDVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "RSDVAL"
$_LNKPRO_RSDVAL
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"RSDVAL",this.RSDVAL,[L]AFORMAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("RSDVAL","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 12 : DPRCUM Deprec. total ( Field MD1 0)
####################################################################
 
$SET_DPRCUM
If [L]_AOLDVAL<>this.DPRCUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRCUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRCUM
 Gosub PROPAGATE_DPRCUM
Endif
Return

$INIT_DPRCUM
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRCUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPRCUM
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRCUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRCUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRCUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRCUM
[L]CURPRO = "DPRCUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRCUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRCUM
[L]CURPRO = "DPRCUM"
Return

$_AOTHERS_DPRCUM
[L]CURPRO = "DPRCUM"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"DPRCUM",this.DPRCUM,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRCUM
[L]CURPRO = "DPRCUM"
Return

$PROPAGATE_DPRCUM
this.isReadonly = 0
[L]CURPRO = "DPRCUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRCUM
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRCUM"
$_LNKPRO_DPRCUM
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"DPRCUM",this.DPRCUM,[L]AFORMAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("DPRCUM","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 13 : DPRVAL Depreciable value ( Field MD1 0)
####################################################################
 
$SET_DPRVAL
If [L]_AOLDVAL<>this.DPRVAL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DPRVAL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DPRVAL
 Gosub PROPAGATE_DPRVAL
Endif
Return

$INIT_DPRVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRVAL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DPRVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRVAL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DPRVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DPRVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DPRVAL
[L]CURPRO = "DPRVAL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DPRVAL=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DPRVAL
[L]CURPRO = "DPRVAL"
Return

$_AOTHERS_DPRVAL
[L]CURPRO = "DPRVAL"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"DPRVAL",this.DPRVAL,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DPRVAL
[L]CURPRO = "DPRVAL"
Return

$PROPAGATE_DPRVAL
this.isReadonly = 0
[L]CURPRO = "DPRVAL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DPRVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "DPRVAL"
$_LNKPRO_DPRVAL
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"DPRVAL",this.DPRVAL,[L]AFORMAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("DPRVAL","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 14 : ALWCOD Specific rule ( Field Local menu number 3168)
####################################################################
 
$SET_ALWCOD
If [L]_AOLDVAL<>this.ALWCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ALWCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ALWCOD
 Gosub PROPAGATE_ALWCOD
Endif
Return

$INIT_ALWCOD
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ALWCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.ALWCOD=0 and fmet this.AGETATTRIBUTE("ALWCOD","$isMandatory")="true"
 this.ALWCOD = 1
Endif
Return
 
$CONTROL_ALWCOD
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ALWCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ALWCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ALWCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ALWCOD
[L]CURPRO = "ALWCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ALWCOD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ALWCOD
[L]CURPRO = "ALWCOD"
If this.ALWCOD<0 or this.ALWCOD>len(mess(0,3168,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"3168 ->"-num$(this.ALWCOD)-mess(99,123,1)):  Return : # Local menu "3168 -> Invalid option
Endif
Return

$_AOTHERS_ALWCOD
[L]CURPRO = "ALWCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ALWCOD
[L]CURPRO = "ALWCOD"
Return

$PROPAGATE_ALWCOD
this.isReadonly = 0
[L]CURPRO = "ALWCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ALWCOD
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "ALWCOD"
$_LNKPRO_ALWCOD
Return


####################################################################
# 15 : CRBVEHCOD Vehicle ( Field Miscellaneous table number)
####################################################################
 
$SET_CRBVEHCOD
If [L]_AOLDVAL<>this.CRBVEHCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CRBVEHCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CRBVEHCOD
 Gosub PROPAGATE_CRBVEHCOD
Endif
Return

$INIT_CRBVEHCOD
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CRBVEHCOD"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"CRBVEHCOD",this.CRBVEHCOD,531)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CRBVEHCOD
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CRBVEHCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CRBVEHCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CRBVEHCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CRBVEHCOD
[L]CURPRO = "CRBVEHCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CRBVEHCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CRBVEHCOD
[L]CURPRO = "CRBVEHCOD"
If vireblc(this.CRBVEHCOD,2)<>vireblc(format$("K:20B",this.CRBVEHCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CRBVEHCOD
[L]CURPRO = "CRBVEHCOD"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"CRBVEHCOD",this.CRBVEHCOD,531,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CRBVEHCOD
[L]CURPRO = "CRBVEHCOD"
Return

$PROPAGATE_CRBVEHCOD
this.isReadonly = 0
[L]CURPRO = "CRBVEHCOD"
Gosub _LNKPRO_CRBVEHCOD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CRBVEHCOD
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CRBVEHCOD"
$_LNKPRO_CRBVEHCOD
If vireblc(this.CRBVEHCOD,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 531;this.CRBVEHCOD
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CRBVEHCOD","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CRBVEHCOD","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 16 : CUR Currency ( Field CUR 3)
####################################################################
 
$SET_CUR
If [L]_AOLDVAL<>this.CUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CUR
 Gosub PROPAGATE_CUR
Endif
Return

$INIT_CUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CUR
[L]CURPRO = "CUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CUR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>vireblc(format$("K:3c",this.CUR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCUR.ACTRLREF(this,"CUR",this.CUR,this.CUR,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CUR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CUR
[L]CURPRO = "CUR"
Return

$PROPAGATE_CUR
this.isReadonly = 0
[L]CURPRO = "CUR"
Gosub _LNKPRO_CUR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CUR"
$_LNKPRO_CUR
If vireblc(this.CUR,2)<>""
 # Link TABCUR
 Local File TABCUR [WTCU]
 Read [F:WTCU]TCU0 = this.CUR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTSHO" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTDES" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$symbol",[F:WTCU]CURSYM)
  If int(val([F:WTCU]CURFMT1))>0
   Local Char WPREC(10)
   Local Char WSCALE(10)
   WPREC=num$(int(val([F:WTCU]CURFMT1)))
   WSCALE=num$(int(10*(val([F:WTCU]CURFMT1)-int(val([F:WTCU]CURFMT1)))))
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$precision",WPREC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTCU]
Endif
Return


####################################################################
# 17 : CURTYP Rate type ( Field Local menu number 202)
####################################################################
 
$SET_CURTYP
If [L]_AOLDVAL<>this.CURTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CURTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CURTYP
 Gosub PROPAGATE_CURTYP
Endif
Return

$INIT_CURTYP
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CURTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CURTYP=0 and fmet this.AGETATTRIBUTE("CURTYP","$isMandatory")="true"
 this.CURTYP = 1
Endif
Return
 
$CONTROL_CURTYP
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CURTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CURTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CURTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CURTYP
[L]CURPRO = "CURTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CURTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CURTYP
[L]CURPRO = "CURTYP"
If this.CURTYP<0 or this.CURTYP>len(mess(0,202,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"202 ->"-num$(this.CURTYP)-mess(99,123,1)):  Return : # Local menu "202 -> Invalid option
Endif
Return

$_AOTHERS_CURTYP
[L]CURPRO = "CURTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CURTYP
[L]CURPRO = "CURTYP"
Return

$PROPAGATE_CURTYP
this.isReadonly = 0
[L]CURPRO = "CURTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CURTYP
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "CURTYP"
$_LNKPRO_CURTYP
Return


####################################################################
# 18 : RATCUR Currency rate ( Field RCU 0)
####################################################################
 
$SET_RATCUR
If [L]_AOLDVAL<>this.RATCUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RATCUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RATCUR
 Gosub PROPAGATE_RATCUR
Endif
Return

$INIT_RATCUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "RATCUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RATCUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "RATCUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RATCUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RATCUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RATCUR
[L]CURPRO = "RATCUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RATCUR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RATCUR
[L]CURPRO = "RATCUR"
Return

$_AOTHERS_RATCUR
[L]CURPRO = "RATCUR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RATCUR
[L]CURPRO = "RATCUR"
Return

$PROPAGATE_RATCUR
this.isReadonly = 0
[L]CURPRO = "RATCUR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RATCUR
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "RATCUR"
$_LNKPRO_RATCUR
Return


####################################################################
# 19 : FIYENDDAT Fiscal year end ( Field D)
####################################################################
 
$SET_FIYENDDAT
If [L]_AOLDVAL<>this.FIYENDDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FIYENDDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FIYENDDAT
 Gosub PROPAGATE_FIYENDDAT
Endif
Return

$INIT_FIYENDDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "FIYENDDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FIYENDDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "FIYENDDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FIYENDDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FIYENDDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FIYENDDAT
[L]CURPRO = "FIYENDDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.FIYENDDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FIYENDDAT
[L]CURPRO = "FIYENDDAT"
Return

$_AOTHERS_FIYENDDAT
[L]CURPRO = "FIYENDDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FIYENDDAT
[L]CURPRO = "FIYENDDAT"
Return

$PROPAGATE_FIYENDDAT
this.isReadonly = 0
[L]CURPRO = "FIYENDDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FIYENDDAT
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "FIYENDDAT"
$_LNKPRO_FIYENDDAT
Return


####################################################################
# 20 : NSPVAL Market value ( Field MD1 0)
####################################################################
 
$SET_NSPVAL
If [L]_AOLDVAL<>this.NSPVAL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_NSPVAL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.NSPVAL
 Gosub PROPAGATE_NSPVAL
Endif
Return

$INIT_NSPVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "NSPVAL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_NSPVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "NSPVAL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_NSPVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_NSPVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_NSPVAL
[L]CURPRO = "NSPVAL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.NSPVAL=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_NSPVAL
[L]CURPRO = "NSPVAL"
Return

$_AOTHERS_NSPVAL
[L]CURPRO = "NSPVAL"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"NSPVAL",this.NSPVAL,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_NSPVAL
[L]CURPRO = "NSPVAL"
Return

$PROPAGATE_NSPVAL
this.isReadonly = 0
[L]CURPRO = "NSPVAL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_NSPVAL
Gosub DECLARE_VAR From WMR0FXDASSETS_DEP
[L]CURPRO = "NSPVAL"
$_LNKPRO_NSPVAL
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"NSPVAL",this.NSPVAL,[L]AFORMAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("NSPVAL","$x3Format",[L]AFORMAT)
Endif
Return




