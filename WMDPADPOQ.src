#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
## BI-DIMENSION ## Synchronization rule PADPOQ

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".PORDERQ" : If clalev([F:POQ])=0 : Local File =OUVTAB [POQ] : Endif
OUVTAB = GDOSSIER+".PORDER" : If clalev([F:POH])=0 : Local File =OUVTAB [POH] : Endif
OUVTAB = GDOSSIER+".PORDERP" : If clalev([F:POP])=0 : Local File =OUVTAB [POP] : Endif
OUVTAB = GDOSSIER+".COMPANY" : If clalev([F:CPY])=0 : Local File =OUVTAB [CPY] : Endif
OUVTAB = GDOSSIER+".BITMPPORDERQ" : If clalev([F:BIPOQ])=0 : Local File =OUVTAB [BIPOQ] : Endif
OUVTAB = "Link [POQ]"
Link [POQ] With
& [POH]POH0 ~= [F:POQ]POHNUM,
& [POP]POP0 = [F:POQ]POHNUM;[F:POQ]POPLIN;[F:POQ]POQSEQ,
& [CPY]CPY0 = [F:POH]CPY,
& [BIPOQ]BIPOQ0 ~= adxuid(1);[F:POQ]POHNUM;[F:POQ]POPLIN;[F:POQ]POQSEQ
& As [LNK_]
& Order By Key CLE = [POQ]POHNUM;[POQ]POPLIN;[POQ]POQSEQ
FILTRE = ""
Return

$FERME
If clalev([F:POQ]) : Close local File [POQ] : Endif
If clalev([F:POH]) : Close local File [POH] : Endif
If clalev([F:POP]) : Close local File [POP] : Endif
If clalev([F:CPY]) : Close local File [CPY] : Endif
If clalev([F:BIPOQ]) : Close local File [BIPOQ] : Endif
Return

$DCLE
Local Char    DCLE(GLONAVA)(1..4)
Local Integer DTYP(1..4)
Local Integer NBDCLE
NBDCLE = 4
DCLE(1) = "POHNUM"
DTYP(1) =  7
DCLE(2) = "DOCTYPLIN"
DTYP(2) =  7
DCLE(3) = "POPLIN"
DTYP(3) =  3
DCLE(4) = "POQSEQ"
DTYP(4) =  3
Return

$CHARGE_CLE
If dim([F:AAA_]POHNUM)>0
 [F:AAA_]POHNUM = [F:POQ]POHNUM
Endif
If dim([F:AAA_]DOCTYPLIN)>0
 [F:AAA_]DOCTYPLIN = 1
Endif
If dim([F:AAA_]POPLIN)>0
 [F:AAA_]POPLIN = [F:POQ]POPLIN
Endif
If dim([F:AAA_]POQSEQ)>0
 [F:AAA_]POQSEQ = [F:POQ]POQSEQ
Endif
Return

########################################################################
# Return the filter necessary for incremental delete in synchroonization
Subprog GET_FLTDELINC(PFLT)
Variable Clbfile PFLT
PFLT = "1=1"
Append PFLT, " & [F:AAA_]POHNUM=[F:POQ]POHNUM"
Append PFLT, " & [F:AAA_]POPLIN=[F:POQ]POPLIN"
Append PFLT, " & [F:AAA_]POQSEQ=[F:POQ]POQSEQ"

End

$MAJFLD
### POHNUM
[L]FLD="POHNUM"
[L]FORMULE='[F:POQ]POHNUM'
If dim([F:AAA_]POHNUM)>0
 [F:AAA_]POHNUM = [F:POQ]POHNUM
Endif

### TODIMPADPOH
[L]FLD="TODIMPADPOH"
[L]FORMULE='[F:AAA_]POHNUM'
If dim([F:AAA_]TODIMPADPOH)>0
 [F:AAA_]TODIMPADPOH = [F:AAA_]POHNUM
Endif

### POPLIN
[L]FLD="POPLIN"
[L]FORMULE='[F:POQ]POPLIN'
If dim([F:AAA_]POPLIN)>0
 [F:AAA_]POPLIN = [F:POQ]POPLIN
Endif

### POPLIN1
[L]FLD="POPLIN1"
[L]FORMULE='[F:POQ]POPLIN'
If dim([F:AAA_]POPLIN1)>0
 [F:AAA_]POPLIN1 = [F:POQ]POPLIN
Endif

### POQSEQ
[L]FLD="POQSEQ"
[L]FORMULE='[F:POQ]POQSEQ'
If dim([F:AAA_]POQSEQ)>0
 [F:AAA_]POQSEQ = [F:POQ]POQSEQ
Endif

### POPSEQ
[L]FLD="POPSEQ"
[L]FORMULE='[F:POP]POPSEQ'
If dim([F:AAA_]POPSEQ)>0
 [F:AAA_]POPSEQ = [F:POP]POPSEQ
Endif

### DOCTYPLIN
[L]FLD="DOCTYPLIN"
[L]FORMULE='1'
If dim([F:AAA_]DOCTYPLIN)>0
 [F:AAA_]DOCTYPLIN = 1
Endif

### LINCLEFLG
[L]FLD="LINCLEFLG"
[L]FORMULE='[F:POQ]LINCLEFLG'
If dim([F:AAA_]LINCLEFLG)>0
 [F:AAA_]LINCLEFLG = [F:POQ]LINCLEFLG
Endif

### LININVFLG
[L]FLD="LININVFLG"
[L]FORMULE='[F:POQ]LININVFLG'
If dim([F:AAA_]LININVFLG)>0
 [F:AAA_]LININVFLG = [F:POQ]LININVFLG
Endif

### RCPCLEFLG
[L]FLD="RCPCLEFLG"
[L]FORMULE='[F:POQ]RCPCLEFLG'
If dim([F:AAA_]RCPCLEFLG)>0
 [F:AAA_]RCPCLEFLG = [F:POQ]RCPCLEFLG
Endif

### FBUFLG
[L]FLD="FBUFLG"
[L]FORMULE='[F:POQ]FBUFLG'
If dim([F:AAA_]FBUFLG)>0
 [F:AAA_]FBUFLG = [F:POQ]FBUFLG
Endif

### LINOCNDAT
[L]FLD="LINOCNDAT"
[L]FORMULE='[F:POQ]LINOCNDAT'
If dim([F:AAA_]LINOCNDAT)>0
 [F:AAA_]LINOCNDAT = [F:POQ]LINOCNDAT
Endif

### EXTRCPDAT
[L]FLD="EXTRCPDAT"
[L]FORMULE='[F:POQ]EXTRCPDAT'
If dim([F:AAA_]EXTRCPDAT)>0
 [F:AAA_]EXTRCPDAT = [F:POQ]EXTRCPDAT
Endif

### RETRCPDAT
[L]FLD="RETRCPDAT"
[L]FORMULE='[F:POQ]RETRCPDAT'
If dim([F:AAA_]RETRCPDAT)>0
 [F:AAA_]RETRCPDAT = [F:POQ]RETRCPDAT
Endif

### DEMRCPDAT
[L]FLD="DEMRCPDAT"
[L]FORMULE='[F:POQ]DEMRCPDAT'
If dim([F:AAA_]DEMRCPDAT)>0
 [F:AAA_]DEMRCPDAT = [F:POQ]DEMRCPDAT
Endif

### OFS
[L]FLD="OFS"
[L]FORMULE='[F:POQ]OFS'
If dim([F:AAA_]OFS)>0
 [F:AAA_]OFS = [F:POQ]OFS
Endif

### LINTYP
[L]FLD="LINTYP"
[L]FORMULE='[F:POQ]LINTYP'
If dim([F:AAA_]LINTYP)>0
 [F:AAA_]LINTYP = [F:POQ]LINTYP
Endif

### PUU
[L]FLD="PUU"
[L]FORMULE='[F:POQ]PUU'
If dim([F:AAA_]PUU)>0
 [F:AAA_]PUU = [F:POQ]PUU
Endif

### UOM
[L]FLD="UOM"
[L]FORMULE='[F:POQ]UOM'
If dim([F:AAA_]UOM)>0
 [F:AAA_]UOM = [F:POQ]UOM
Endif

### UOMPUUCOE
[L]FLD="UOMPUUCOE"
[L]FORMULE='[F:POQ]UOMPUUCOE'
If dim([F:AAA_]UOMPUUCOE)>0
 [F:AAA_]UOMPUUCOE = [F:POQ]UOMPUUCOE
Endif

### ORI
[L]FLD="ORI"
[L]FORMULE='[F:POQ]ORI'
If dim([F:AAA_]ORI)>0
 [F:AAA_]ORI = [F:POQ]ORI
Endif

### CMMNUM
[L]FLD="CMMNUM"
[L]FORMULE='[F:POQ]CMMNUM'
If dim([F:AAA_]CMMNUM)>0
 [F:AAA_]CMMNUM = [F:POQ]CMMNUM
Endif

### PQHNUM
[L]FLD="PQHNUM"
[L]FORMULE='[F:POQ]PQHNUM'
If dim([F:AAA_]PQHNUM)>0
 [F:AAA_]PQHNUM = [F:POQ]PQHNUM
Endif

### PPDLIN
[L]FLD="PPDLIN"
[L]FORMULE='[F:POQ]PPDLIN'
If dim([F:AAA_]PPDLIN)>0
 [F:AAA_]PPDLIN = [F:POQ]PPDLIN
Endif

### DTAVCRNUM
[L]FLD="DTAVCRNUM"
[L]FORMULE='""'
If dim([F:AAA_]DTAVCRNUM)>0
FORMULE = ''
 [F:AAA_]DTAVCRNUM = ''
Endif

### DTAVCRTYP
[L]FLD="DTAVCRTYP"
[L]FORMULE='0'
If dim([F:AAA_]DTAVCRTYP)>0
 [F:AAA_]DTAVCRTYP = 0
Endif

### DTAIND
[L]FLD="DTAIND"
[L]FORMULE='0'
If dim([F:AAA_]DTAIND)>0
 [F:AAA_]DTAIND = 0
Endif


Return

