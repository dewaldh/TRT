#<AdxTL>@(#)0.0.0.0 $Revision$Class Subcontract orders
# Supervisor
## ACLA-CLASSE ## SCOHEAD
# 2018-08-27 13:27:57 141

 
####################################################################
# Labels of the main class and methods 
####################################################################
 
####################################################################
# 1 : MODALL Allocation method ( Field Local menu number 398)
####################################################################
 
$SET_MODALL
If [L]_AOLDVAL<>this.MODALL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MODALL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MODALL
 Gosub PROPAGATE_MODALL
Endif
Return

$INIT_MODALL
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "MODALL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.MODALL=0 and fmet this.AGETATTRIBUTE("MODALL","$isMandatory")="true"
 this.MODALL = 1
Endif
Return
 
$CONTROL_MODALL
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "MODALL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MODALL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MODALL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MODALL
[L]CURPRO = "MODALL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MODALL=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MODALL
[L]CURPRO = "MODALL"
If this.MODALL<0 or this.MODALL>len(mess(0,398,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"398 ->"-num$(this.MODALL)-mess(99,123,1)):  Return : # Local menu "398 -> Invalid option
Endif
Return

$_AOTHERS_MODALL
[L]CURPRO = "MODALL"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MODALL
[L]CURPRO = "MODALL"
Return

$PROPAGATE_MODALL
this.isReadonly = 0
[L]CURPRO = "MODALL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MODALL
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "MODALL"
$_LNKPRO_MODALL
Return


####################################################################
# 2 : TRTPIC Picking code ( Field C 4)
####################################################################
 
$SET_TRTPIC
If [L]_AOLDVAL<>this.TRTPIC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TRTPIC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TRTPIC
 Gosub PROPAGATE_TRTPIC
Endif
Return

$INIT_TRTPIC
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "TRTPIC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TRTPIC
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "TRTPIC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TRTPIC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TRTPIC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TRTPIC
[L]CURPRO = "TRTPIC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TRTPIC=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TRTPIC
[L]CURPRO = "TRTPIC"
Return

$_AOTHERS_TRTPIC
[L]CURPRO = "TRTPIC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TRTPIC
[L]CURPRO = "TRTPIC"
Return

$PROPAGATE_TRTPIC
this.isReadonly = 0
[L]CURPRO = "TRTPIC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TRTPIC
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "TRTPIC"
$_LNKPRO_TRTPIC
Return


####################################################################
# 3 : PECFLG Requirement considered ( Field Local menu number 1)
####################################################################
 
$SET_PECFLG
If [L]_AOLDVAL<>this.PECFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PECFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PECFLG
 Gosub PROPAGATE_PECFLG
Endif
Return

$INIT_PECFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PECFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PECFLG=0 and fmet this.AGETATTRIBUTE("PECFLG","$isMandatory")="true"
 this.PECFLG = 1
Endif
Return
 
$CONTROL_PECFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PECFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PECFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PECFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PECFLG
[L]CURPRO = "PECFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PECFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PECFLG
[L]CURPRO = "PECFLG"
If this.PECFLG<0 or this.PECFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.PECFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_PECFLG
[L]CURPRO = "PECFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PECFLG
[L]CURPRO = "PECFLG"
Return

$PROPAGATE_PECFLG
this.isReadonly = 0
[L]CURPRO = "PECFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PECFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PECFLG"
$_LNKPRO_PECFLG
Return


####################################################################
# 4 : CREFLG Creation flag ( Field C 4)
####################################################################
 
$SET_CREFLG
If [L]_AOLDVAL<>this.CREFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREFLG
 Gosub PROPAGATE_CREFLG
Endif
Return

$INIT_CREFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "CREFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CREFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "CREFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREFLG
[L]CURPRO = "CREFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CREFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREFLG
[L]CURPRO = "CREFLG"
Return

$_AOTHERS_CREFLG
[L]CURPRO = "CREFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREFLG
[L]CURPRO = "CREFLG"
Return

$PROPAGATE_CREFLG
this.isReadonly = 0
[L]CURPRO = "CREFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "CREFLG"
$_LNKPRO_CREFLG
Return


####################################################################
# 5 : UPDFLG Validated flag ( Field Local menu number 1)
####################################################################
 
$SET_UPDFLG
If [L]_AOLDVAL<>this.UPDFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UPDFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UPDFLG
 Gosub PROPAGATE_UPDFLG
Endif
Return

$INIT_UPDFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "UPDFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.UPDFLG=0 and fmet this.AGETATTRIBUTE("UPDFLG","$isMandatory")="true"
 this.UPDFLG = 1
Endif
Return
 
$CONTROL_UPDFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "UPDFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UPDFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UPDFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UPDFLG
[L]CURPRO = "UPDFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UPDFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UPDFLG
[L]CURPRO = "UPDFLG"
If this.UPDFLG<0 or this.UPDFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.UPDFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_UPDFLG
[L]CURPRO = "UPDFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UPDFLG
[L]CURPRO = "UPDFLG"
Return

$PROPAGATE_UPDFLG
this.isReadonly = 0
[L]CURPRO = "UPDFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UPDFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "UPDFLG"
$_LNKPRO_UPDFLG
Return


####################################################################
# 6 : BUY Buyer ( Field AUS 5)
####################################################################
 
$SET_BUY
If [L]_AOLDVAL<>this.BUY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BUY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BUY
 Gosub PROPAGATE_BUY
Endif
Return

$INIT_BUY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BUY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BUY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BUY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BUY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BUY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BUY
[L]CURPRO = "BUY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BUY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BUY
[L]CURPRO = "BUY"
If vireblc(this.BUY,2)<>vireblc(format$("K:5B",this.BUY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BUY
[L]CURPRO = "BUY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BUY
[L]CURPRO = "BUY"
Return

$PROPAGATE_BUY
this.isReadonly = 0
[L]CURPRO = "BUY"
Gosub _LNKPRO_BUY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BUY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BUY"
$_LNKPRO_BUY
If vireblc(this.BUY,2)<>""
 # Link AUTILIS
 Local File AUTILIS [WAUS]
 Read [F:WAUS]CODUSR = this.BUY
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BUY","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BUY","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WAUS]
Endif
Return


####################################################################
# 7 : TSSCOD Statistical group ( Field Miscellaneous table number)
####################################################################
 
$SET_TSSCOD
If [L]_AOLDVAL<>this.TSSCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TSSCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TSSCOD
 Gosub PROPAGATE_TSSCOD
Endif
Return

$INIT_TSSCOD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "TSSCOD"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"TSSCOD",this.TSSCOD,val(this.TSSCOD))
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TSSCOD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "TSSCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TSSCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TSSCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TSSCOD
[L]CURPRO = "TSSCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TSSCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TSSCOD
[L]CURPRO = "TSSCOD"
If vireblc(this.TSSCOD,2)<>vireblc(format$("K:20B",this.TSSCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TSSCOD
[L]CURPRO = "TSSCOD"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"TSSCOD",this.TSSCOD,val(this.TSSCOD),"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TSSCOD
[L]CURPRO = "TSSCOD"
Return

$PROPAGATE_TSSCOD
this.isReadonly = 0
[L]CURPRO = "TSSCOD"
Gosub _LNKPRO_TSSCOD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TSSCOD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "TSSCOD"
$_LNKPRO_TSSCOD
If vireblc(this.TSSCOD,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = val(this.TSSCOD);this.TSSCOD
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TSSCOD","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TSSCOD","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 8 : LAN Language ( Field LAN 3)
####################################################################
 
$SET_LAN
If [L]_AOLDVAL<>this.LAN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LAN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LAN
 Gosub PROPAGATE_LAN
Endif
Return

$INIT_LAN
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "LAN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LAN
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "LAN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LAN                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LAN                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LAN
[L]CURPRO = "LAN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LAN,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LAN
[L]CURPRO = "LAN"
If vireblc(this.LAN,2)<>vireblc(format$("KTD:3B",this.LAN),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_LAN
[L]CURPRO = "LAN"
If vireblc(this.LAN,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPLAN.ACTRLREF(this,"LAN",this.LAN,this.LAN,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.LAN<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LAN
[L]CURPRO = "LAN"
Return

$PROPAGATE_LAN
this.isReadonly = 0
[L]CURPRO = "LAN"
Gosub _LNKPRO_LAN
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LAN
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "LAN"
$_LNKPRO_LAN
If vireblc(this.LAN,2)<>""
 # Link TABLAN
 Local File TABLAN [WTLA]
 Read [F:WTLA]TLA0 = this.LAN
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTSHO" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTDES" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTLA]
Endif
Return


####################################################################
# 9 : OSTAUZAMT Authorized credit ( Field DCB 11)
####################################################################
 
$SET_OSTAUZAMT
If [L]_AOLDVAL<>this.OSTAUZAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OSTAUZAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OSTAUZAMT
 Gosub PROPAGATE_OSTAUZAMT
Endif
Return

$INIT_OSTAUZAMT
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "OSTAUZAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OSTAUZAMT
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "OSTAUZAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OSTAUZAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OSTAUZAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OSTAUZAMT
[L]CURPRO = "OSTAUZAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.OSTAUZAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OSTAUZAMT
[L]CURPRO = "OSTAUZAMT"
Return

$_AOTHERS_OSTAUZAMT
[L]CURPRO = "OSTAUZAMT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OSTAUZAMT
[L]CURPRO = "OSTAUZAMT"
Return

$PROPAGATE_OSTAUZAMT
this.isReadonly = 0
[L]CURPRO = "OSTAUZAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OSTAUZAMT
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "OSTAUZAMT"
$_LNKPRO_OSTAUZAMT
Return


####################################################################
# 10 : BPRPAY Pay-to ( Field BPR 15)
####################################################################
 
$SET_BPRPAY
If [L]_AOLDVAL<>this.BPRPAY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPRPAY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPRPAY
 Gosub PROPAGATE_BPRPAY
Endif
Return

$INIT_BPRPAY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPRPAY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPRPAY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPRPAY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPRPAY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPRPAY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPRPAY
[L]CURPRO = "BPRPAY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPRPAY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPRPAY
[L]CURPRO = "BPRPAY"
If vireblc(this.BPRPAY,2)<>vireblc(format$("K:15c",this.BPRPAY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPRPAY
[L]CURPRO = "BPRPAY"
If vireblc(this.BPRPAY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPRPAY",this.BPRPAY,this.BPRPAY,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPRPAY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPRPAY
[L]CURPRO = "BPRPAY"
Return

$PROPAGATE_BPRPAY
this.isReadonly = 0
[L]CURPRO = "BPRPAY"
Gosub _LNKPRO_BPRPAY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPRPAY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPRPAY"
$_LNKPRO_BPRPAY
If vireblc(this.BPRPAY,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPRPAY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPRPAY","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPRPAY","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return


####################################################################
# 11 : BPAPAY Address paying BP ( Field ADR 5)
####################################################################
 
$SET_BPAPAY
If [L]_AOLDVAL<>this.BPAPAY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPAPAY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPAPAY
 Gosub PROPAGATE_BPAPAY
Endif
Return

$INIT_BPAPAY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPAPAY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPAPAY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPAPAY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPAPAY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPAPAY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPAPAY
[L]CURPRO = "BPAPAY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPAPAY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPAPAY
[L]CURPRO = "BPAPAY"
If vireblc(this.BPAPAY,2)<>vireblc(format$("K:5c",this.BPAPAY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPAPAY
[L]CURPRO = "BPAPAY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPAPAY
[L]CURPRO = "BPAPAY"
If vireblc(this.BPAPAY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPADR.ACTRLREF(this,"BPAPAY",this.BPAPAY,1,this.BPRPAY,this.BPAPAY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPAPAY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_BPAPAY
this.isReadonly = 0
[L]CURPRO = "BPAPAY"
Gosub _LNKPRO_BPAPAY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPAPAY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPAPAY"
$_LNKPRO_BPAPAY
If vireblc(this.BPAPAY,2)<>""
 # Link BPADDRESS
 Local File BPADDRESS [WBPA]
 Read [F:WBPA]BPA0 = 1;this.BPRPAY;this.BPAPAY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPAPAY","$description",[F:WBPA]BPADES)
 Endif
 LogicClose File [WBPA]
Endif
Return


####################################################################
# 12 : BPSINV Invoicing BP ( Field BPS 15)
####################################################################
 
$SET_BPSINV
If [L]_AOLDVAL<>this.BPSINV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPSINV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPSINV
 Gosub PROPAGATE_BPSINV
Endif
Return

$INIT_BPSINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPSINV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPSINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPSINV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPSINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPSINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPSINV
[L]CURPRO = "BPSINV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPSINV,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPSINV
[L]CURPRO = "BPSINV"
If vireblc(this.BPSINV,2)<>vireblc(format$("K:15c",this.BPSINV),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPSINV
[L]CURPRO = "BPSINV"
If vireblc(this.BPSINV,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPS.ACTRLREF(this,"BPSINV",this.BPSINV,this.BPSINV,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPSINV<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPSINV
[L]CURPRO = "BPSINV"
Return

$PROPAGATE_BPSINV
this.isReadonly = 0
[L]CURPRO = "BPSINV"
Gosub _LNKPRO_BPSINV
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPSINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPSINV"
$_LNKPRO_BPSINV
If vireblc(this.BPSINV,2)<>""
 # Link BPSUPPLIER
 Local File BPSUPPLIER [WBPS]
 Read [F:WBPS]BPS0 = this.BPSINV
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPSINV","$title",[F:WBPS]BPSSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPSINV","$description",[F:WBPS]BPSNAM)
 Endif
 LogicClose File [WBPS]
Endif
Return


####################################################################
# 13 : BPAINV Billing address ( Field ADR 5)
####################################################################
 
$SET_BPAINV
If [L]_AOLDVAL<>this.BPAINV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPAINV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPAINV
 Gosub PROPAGATE_BPAINV
Endif
Return

$INIT_BPAINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPAINV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPAINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPAINV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPAINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPAINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPAINV
[L]CURPRO = "BPAINV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPAINV,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPAINV
[L]CURPRO = "BPAINV"
If vireblc(this.BPAINV,2)<>vireblc(format$("K:5c",this.BPAINV),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPAINV
[L]CURPRO = "BPAINV"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPAINV
[L]CURPRO = "BPAINV"
If vireblc(this.BPAINV,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPADR.ACTRLREF(this,"BPAINV",this.BPAINV,1,this.BPSINV,this.BPAINV,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPAINV<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_BPAINV
this.isReadonly = 0
[L]CURPRO = "BPAINV"
Gosub _LNKPRO_BPAINV
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPAINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPAINV"
$_LNKPRO_BPAINV
If vireblc(this.BPAINV,2)<>""
 # Link BPADDRESS
 Local File BPADDRESS [WBPA]
 Read [F:WBPA]BPA0 = 1;this.BPSINV;this.BPAINV
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPAINV","$description",[F:WBPA]BPADES)
 Endif
 LogicClose File [WBPA]
Endif
Return


####################################################################
# 14 : OLDCUR Currency before change ( Field CUR 3)
####################################################################
 
$SET_OLDCUR
If [L]_AOLDVAL<>this.OLDCUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OLDCUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OLDCUR
 Gosub PROPAGATE_OLDCUR
Endif
Return

$INIT_OLDCUR
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "OLDCUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OLDCUR
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "OLDCUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OLDCUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OLDCUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OLDCUR
[L]CURPRO = "OLDCUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.OLDCUR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OLDCUR
[L]CURPRO = "OLDCUR"
If vireblc(this.OLDCUR,2)<>vireblc(format$("K:3c",this.OLDCUR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_OLDCUR
[L]CURPRO = "OLDCUR"
If vireblc(this.OLDCUR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCUR.ACTRLREF(this,"OLDCUR",this.OLDCUR,this.OLDCUR,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.OLDCUR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OLDCUR
[L]CURPRO = "OLDCUR"
Return

$PROPAGATE_OLDCUR
this.isReadonly = 0
[L]CURPRO = "OLDCUR"
Gosub _LNKPRO_OLDCUR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OLDCUR
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "OLDCUR"
$_LNKPRO_OLDCUR
If vireblc(this.OLDCUR,2)<>""
 # Link TABCUR
 Local File TABCUR [WTCU]
 Read [F:WTCU]TCU0 = this.OLDCUR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTSHO" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("OLDCUR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTDES" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("OLDCUR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("OLDCUR","$symbol",[F:WTCU]CURSYM)
  If int(val([F:WTCU]CURFMT1))>0
   Local Char WPREC(10)
   Local Char WSCALE(10)
   WPREC=num$(int(val([F:WTCU]CURFMT1)))
   WSCALE=num$(int(10*(val([F:WTCU]CURFMT1)-int(val([F:WTCU]CURFMT1)))))
   [L]ASTATUS = fmet this.ASETATTRIBUTE("OLDCUR","$precision",WPREC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("OLDCUR","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTCU]
Endif
Return


####################################################################
# 15 : SALFCY Sales site ( Field FCY 5)
####################################################################
 
$SET_SALFCY
If [L]_AOLDVAL<>this.SALFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SALFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SALFCY
 Gosub PROPAGATE_SALFCY
Endif
Return

$INIT_SALFCY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "SALFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SALFCY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "SALFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SALFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SALFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SALFCY
[L]CURPRO = "SALFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SALFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SALFCY
[L]CURPRO = "SALFCY"
If vireblc(this.SALFCY,2)<>vireblc(format$("K:5c",this.SALFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SALFCY
[L]CURPRO = "SALFCY"
If vireblc(this.SALFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"SALFCY",this.SALFCY,this.SALFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.SALFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SALFCY
[L]CURPRO = "SALFCY"
Return

$PROPAGATE_SALFCY
this.isReadonly = 0
[L]CURPRO = "SALFCY"
Gosub _LNKPRO_SALFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SALFCY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "SALFCY"
$_LNKPRO_SALFCY
If vireblc(this.SALFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.SALFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SALFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SALFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 16 : COEFLG Coefficient flag ( Field C 1)
####################################################################
 
$SET_COEFLG
If [L]_AOLDVAL<>this.COEFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_COEFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.COEFLG
 Gosub PROPAGATE_COEFLG
Endif
Return

$INIT_COEFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "COEFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_COEFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "COEFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_COEFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_COEFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_COEFLG
[L]CURPRO = "COEFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.COEFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_COEFLG
[L]CURPRO = "COEFLG"
Return

$_AOTHERS_COEFLG
[L]CURPRO = "COEFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_COEFLG
[L]CURPRO = "COEFLG"
Return

$PROPAGATE_COEFLG
this.isReadonly = 0
[L]CURPRO = "COEFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_COEFLG
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "COEFLG"
$_LNKPRO_COEFLG
Return


####################################################################
# 17 : PTOCOD Rule ( Field PTO 5)
####################################################################
 
$SET_PTOCOD
If [L]_AOLDVAL<>this.PTOCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PTOCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PTOCOD
 Gosub PROPAGATE_PTOCOD
Endif
Return

$INIT_PTOCOD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PTOCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PTOCOD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PTOCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PTOCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PTOCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PTOCOD
[L]CURPRO = "PTOCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PTOCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PTOCOD
[L]CURPRO = "PTOCOD"
If vireblc(this.PTOCOD,2)<>vireblc(format$("K:5c",this.PTOCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PTOCOD
[L]CURPRO = "PTOCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PTOCOD
[L]CURPRO = "PTOCOD"
Return

$PROPAGATE_PTOCOD
this.isReadonly = 0
[L]CURPRO = "PTOCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PTOCOD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PTOCOD"
$_LNKPRO_PTOCOD
Return


####################################################################
# 18 : PURMINQTY Minimum PO qty. ( Field QTY 0)
####################################################################
 
$SET_PURMINQTY
If [L]_AOLDVAL<>this.PURMINQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PURMINQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PURMINQTY
 Gosub PROPAGATE_PURMINQTY
Endif
Return

$INIT_PURMINQTY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PURMINQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PURMINQTY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PURMINQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PURMINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PURMINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PURMINQTY
[L]CURPRO = "PURMINQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PURMINQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PURMINQTY
[L]CURPRO = "PURMINQTY"
Return

$_AOTHERS_PURMINQTY
[L]CURPRO = "PURMINQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PURMINQTY
[L]CURPRO = "PURMINQTY"
Return

$PROPAGATE_PURMINQTY
this.isReadonly = 0
[L]CURPRO = "PURMINQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PURMINQTY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "PURMINQTY"
$_LNKPRO_PURMINQTY
Return


####################################################################
# 19 : DALLSTA Allocation ( Field Local menu number 336)
####################################################################
 
$SET_DALLSTA
If [L]_AOLDVAL<>this.DALLSTA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DALLSTA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DALLSTA
 Gosub PROPAGATE_DALLSTA
Endif
Return

$INIT_DALLSTA
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DALLSTA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DALLSTA=0 and fmet this.AGETATTRIBUTE("DALLSTA","$isMandatory")="true"
 this.DALLSTA = 1
Endif
Return
 
$CONTROL_DALLSTA
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DALLSTA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DALLSTA               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DALLSTA               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DALLSTA
[L]CURPRO = "DALLSTA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DALLSTA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DALLSTA
[L]CURPRO = "DALLSTA"
If this.DALLSTA<0 or this.DALLSTA>len(mess(0,336,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"336 ->"-num$(this.DALLSTA)-mess(99,123,1)):  Return : # Local menu "336 -> Invalid option
Endif
Return

$_AOTHERS_DALLSTA
[L]CURPRO = "DALLSTA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DALLSTA
[L]CURPRO = "DALLSTA"
Return

$PROPAGATE_DALLSTA
this.isReadonly = 0
[L]CURPRO = "DALLSTA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DALLSTA
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DALLSTA"
$_LNKPRO_DALLSTA
Return


####################################################################
# 20 : XALLSTA Allocation ( Field Local menu number 336)
####################################################################
 
$SET_XALLSTA
If [L]_AOLDVAL<>this.XALLSTA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_XALLSTA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.XALLSTA
 Gosub PROPAGATE_XALLSTA
Endif
Return

$INIT_XALLSTA
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "XALLSTA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.XALLSTA=0 and fmet this.AGETATTRIBUTE("XALLSTA","$isMandatory")="true"
 this.XALLSTA = 1
Endif
Return
 
$CONTROL_XALLSTA
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "XALLSTA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_XALLSTA               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_XALLSTA               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_XALLSTA
[L]CURPRO = "XALLSTA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.XALLSTA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_XALLSTA
[L]CURPRO = "XALLSTA"
If this.XALLSTA<0 or this.XALLSTA>len(mess(0,336,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"336 ->"-num$(this.XALLSTA)-mess(99,123,1)):  Return : # Local menu "336 -> Invalid option
Endif
Return

$_AOTHERS_XALLSTA
[L]CURPRO = "XALLSTA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_XALLSTA
[L]CURPRO = "XALLSTA"
Return

$PROPAGATE_XALLSTA
this.isReadonly = 0
[L]CURPRO = "XALLSTA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_XALLSTA
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "XALLSTA"
$_LNKPRO_XALLSTA
Return


####################################################################
# 21 : BPCORD Sold-to ( Field BPR 15)
####################################################################
 
$SET_BPCORD
If [L]_AOLDVAL<>this.BPCORD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPCORD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPCORD
 Gosub PROPAGATE_BPCORD
Endif
Return

$INIT_BPCORD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPCORD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPCORD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPCORD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPCORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPCORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPCORD
[L]CURPRO = "BPCORD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPCORD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPCORD
[L]CURPRO = "BPCORD"
If vireblc(this.BPCORD,2)<>vireblc(format$("K:15c",this.BPCORD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPCORD
[L]CURPRO = "BPCORD"
If vireblc(this.BPCORD,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPCORD",this.BPCORD,this.BPCORD,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPCORD<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPCORD
[L]CURPRO = "BPCORD"
Return

$PROPAGATE_BPCORD
this.isReadonly = 0
[L]CURPRO = "BPCORD"
Gosub _LNKPRO_BPCORD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPCORD
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPCORD"
$_LNKPRO_BPCORD
If vireblc(this.BPCORD,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPCORD
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCORD","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCORD","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return


####################################################################
# 22 : BPCINV Bill-to customer ( Field BPR 15)
####################################################################
 
$SET_BPCINV
If [L]_AOLDVAL<>this.BPCINV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPCINV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPCINV
 Gosub PROPAGATE_BPCINV
Endif
Return

$INIT_BPCINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPCINV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPCINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPCINV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPCINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPCINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPCINV
[L]CURPRO = "BPCINV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPCINV,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPCINV
[L]CURPRO = "BPCINV"
If vireblc(this.BPCINV,2)<>vireblc(format$("K:15c",this.BPCINV),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPCINV
[L]CURPRO = "BPCINV"
If vireblc(this.BPCINV,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPCINV",this.BPCINV,this.BPCINV,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPCINV<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPCINV
[L]CURPRO = "BPCINV"
Return

$PROPAGATE_BPCINV
this.isReadonly = 0
[L]CURPRO = "BPCINV"
Gosub _LNKPRO_BPCINV
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPCINV
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "BPCINV"
$_LNKPRO_BPCINV
If vireblc(this.BPCINV,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPCINV
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCINV","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCINV","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return


####################################################################
# 23 : DME Partial delivery ( Field Local menu number 414)
####################################################################
 
$SET_DME
If [L]_AOLDVAL<>this.DME
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DME
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DME
 Gosub PROPAGATE_DME
Endif
Return

$INIT_DME
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DME"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DME=0 and fmet this.AGETATTRIBUTE("DME","$isMandatory")="true"
 this.DME = 1
Endif
Return
 
$CONTROL_DME
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DME"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DME                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DME                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DME
[L]CURPRO = "DME"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DME=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DME
[L]CURPRO = "DME"
If this.DME<0 or this.DME>len(mess(0,414,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"414 ->"-num$(this.DME)-mess(99,123,1)):  Return : # Local menu "414 -> Invalid option
Endif
Return

$_AOTHERS_DME
[L]CURPRO = "DME"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DME
[L]CURPRO = "DME"
Return

$PROPAGATE_DME
this.isReadonly = 0
[L]CURPRO = "DME"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DME
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DME"
$_LNKPRO_DME
Return


####################################################################
# 24 : ORIFCY Original site ( Field FCY 5)
####################################################################
 
$SET_ORIFCY
If [L]_AOLDVAL<>this.ORIFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ORIFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ORIFCY
 Gosub PROPAGATE_ORIFCY
Endif
Return

$INIT_ORIFCY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "ORIFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ORIFCY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "ORIFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ORIFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ORIFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ORIFCY
[L]CURPRO = "ORIFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ORIFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ORIFCY
[L]CURPRO = "ORIFCY"
If vireblc(this.ORIFCY,2)<>vireblc(format$("K:5c",this.ORIFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ORIFCY
[L]CURPRO = "ORIFCY"
If vireblc(this.ORIFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"ORIFCY",this.ORIFCY,this.ORIFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ORIFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ORIFCY
[L]CURPRO = "ORIFCY"
Return

$PROPAGATE_ORIFCY
this.isReadonly = 0
[L]CURPRO = "ORIFCY"
Gosub _LNKPRO_ORIFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ORIFCY
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "ORIFCY"
$_LNKPRO_ORIFCY
If vireblc(this.ORIFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.ORIFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("ORIFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("ORIFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 25 : MODALL_1 Allocation method ( Field Local menu number 398)
####################################################################
 
$SET_MODALL_1
If [L]_AOLDVAL<>this.MODALL_1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MODALL_1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MODALL_1
 Gosub PROPAGATE_MODALL_1
Endif
Return

$INIT_MODALL_1
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "MODALL_1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.MODALL_1=0 and fmet this.AGETATTRIBUTE("MODALL_1","$isMandatory")="true"
 this.MODALL_1 = 1
Endif
Return
 
$CONTROL_MODALL_1
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "MODALL_1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MODALL_1              : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MODALL_1              : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MODALL_1
[L]CURPRO = "MODALL_1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MODALL_1=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MODALL_1
[L]CURPRO = "MODALL_1"
If this.MODALL_1<0 or this.MODALL_1>len(mess(0,398,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"398 ->"-num$(this.MODALL_1)-mess(99,123,1)):  Return : # Local menu "398 -> Invalid option
Endif
Return

$_AOTHERS_MODALL_1
[L]CURPRO = "MODALL_1"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MODALL_1
[L]CURPRO = "MODALL_1"
Return

$PROPAGATE_MODALL_1
this.isReadonly = 0
[L]CURPRO = "MODALL_1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MODALL_1
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "MODALL_1"
$_LNKPRO_MODALL_1
Return


####################################################################
# 26 : EORTYP Default EO management mode ( Field Local menu number 302)
####################################################################
 
$SET_EORTYP
If [L]_AOLDVAL<>this.EORTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EORTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EORTYP
 Gosub PROPAGATE_EORTYP
Endif
Return

$INIT_EORTYP
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "EORTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.EORTYP=0 and fmet this.AGETATTRIBUTE("EORTYP","$isMandatory")="true"
 this.EORTYP = 1
Endif
Return
 
$CONTROL_EORTYP
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "EORTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EORTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EORTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EORTYP
[L]CURPRO = "EORTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EORTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EORTYP
[L]CURPRO = "EORTYP"
If this.EORTYP<0 or this.EORTYP>len(mess(0,302,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"302 ->"-num$(this.EORTYP)-mess(99,123,1)):  Return : # Local menu "302 -> Invalid option
Endif
Return

$_AOTHERS_EORTYP
[L]CURPRO = "EORTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EORTYP
[L]CURPRO = "EORTYP"
Return

$PROPAGATE_EORTYP
this.isReadonly = 0
[L]CURPRO = "EORTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EORTYP
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "EORTYP"
$_LNKPRO_EORTYP
Return


####################################################################
# 27 : FMTDIE Dimension formats ( Field A 15)
####################################################################
 
$SET_FMTDIE
If [L]_AOLDVAL<>this.FMTDIE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FMTDIE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FMTDIE
 Gosub PROPAGATE_FMTDIE
Endif
Return

$INIT_FMTDIE
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "FMTDIE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FMTDIE
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "FMTDIE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FMTDIE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FMTDIE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FMTDIE
[L]CURPRO = "FMTDIE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.FMTDIE,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FMTDIE
[L]CURPRO = "FMTDIE"
Return

$_AOTHERS_FMTDIE
[L]CURPRO = "FMTDIE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FMTDIE
[L]CURPRO = "FMTDIE"
Return

$PROPAGATE_FMTDIE
this.isReadonly = 0
[L]CURPRO = "FMTDIE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FMTDIE
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "FMTDIE"
$_LNKPRO_FMTDIE
Return


####################################################################
# 28 : DISCRGVAL1 Discount/Charge 1 ( Field DCB 6)
####################################################################
 
$SET_DISCRGVAL1
If [L]_AOLDVAL<>this.DISCRGVAL1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DISCRGVAL1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DISCRGVAL1
 Gosub PROPAGATE_DISCRGVAL1
Endif
Return

$INIT_DISCRGVAL1
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DISCRGVAL1
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DISCRGVAL1            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DISCRGVAL1            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DISCRGVAL1
[L]CURPRO = "DISCRGVAL1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DISCRGVAL1=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DISCRGVAL1
[L]CURPRO = "DISCRGVAL1"
Return

$_AOTHERS_DISCRGVAL1
[L]CURPRO = "DISCRGVAL1"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DISCRGVAL1
[L]CURPRO = "DISCRGVAL1"
Return

$PROPAGATE_DISCRGVAL1
this.isReadonly = 0
[L]CURPRO = "DISCRGVAL1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DISCRGVAL1
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL1"
$_LNKPRO_DISCRGVAL1
Return


####################################################################
# 29 : DISCRGVAL2 Discount/Charge 2 ( Field DCB 6)
####################################################################
 
$SET_DISCRGVAL2
If [L]_AOLDVAL<>this.DISCRGVAL2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DISCRGVAL2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DISCRGVAL2
 Gosub PROPAGATE_DISCRGVAL2
Endif
Return

$INIT_DISCRGVAL2
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DISCRGVAL2
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DISCRGVAL2            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DISCRGVAL2            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DISCRGVAL2
[L]CURPRO = "DISCRGVAL2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DISCRGVAL2=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DISCRGVAL2
[L]CURPRO = "DISCRGVAL2"
Return

$_AOTHERS_DISCRGVAL2
[L]CURPRO = "DISCRGVAL2"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DISCRGVAL2
[L]CURPRO = "DISCRGVAL2"
Return

$PROPAGATE_DISCRGVAL2
this.isReadonly = 0
[L]CURPRO = "DISCRGVAL2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DISCRGVAL2
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL2"
$_LNKPRO_DISCRGVAL2
Return


####################################################################
# 30 : DISCRGVAL3 Discount/Charge 3 ( Field DCB 6)
####################################################################
 
$SET_DISCRGVAL3
If [L]_AOLDVAL<>this.DISCRGVAL3
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DISCRGVAL3
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DISCRGVAL3
 Gosub PROPAGATE_DISCRGVAL3
Endif
Return

$INIT_DISCRGVAL3
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL3"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DISCRGVAL3
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL3"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DISCRGVAL3            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DISCRGVAL3            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DISCRGVAL3
[L]CURPRO = "DISCRGVAL3"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DISCRGVAL3=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DISCRGVAL3
[L]CURPRO = "DISCRGVAL3"
Return

$_AOTHERS_DISCRGVAL3
[L]CURPRO = "DISCRGVAL3"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DISCRGVAL3
[L]CURPRO = "DISCRGVAL3"
Return

$PROPAGATE_DISCRGVAL3
this.isReadonly = 0
[L]CURPRO = "DISCRGVAL3"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DISCRGVAL3
Gosub DECLARE_VAR From WMR0SCOHEAD
[L]CURPRO = "DISCRGVAL3"
$_LNKPRO_DISCRGVAL3
Return




