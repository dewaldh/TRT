#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
## BI-DIMENSION ## Synchronization rule SADSIH

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".SINVOICE" : If clalev([F:SIH])=0 : Local File =OUVTAB [SIH] : Endif
OUVTAB = GDOSSIER+".SINVOICEV" : If clalev([F:SIV])=0 : Local File =OUVTAB [SIV] : Endif
OUVTAB = GDOSSIER+".COMPANY" : If clalev([F:CPY])=0 : Local File =OUVTAB [CPY] : Endif
OUVTAB = "Link [SIH]"
Link [SIH] With
& [SIV]SIV0 ~= [F:SIH]NUM,
& [CPY]CPY0 = [F:SIV]CPY
& As [LNK_]
& Where [F:SIH]ORIMOD=5 & [F:SIH]STA=3
& Order By Key CLE = [SIH]NUM
FILTRE = ""
Return

$FERME
If clalev([F:SIH]) : Close local File [SIH] : Endif
If clalev([F:SIV]) : Close local File [SIV] : Endif
If clalev([F:CPY]) : Close local File [CPY] : Endif
Return

$DCLE
Local Char    DCLE(GLONAVA)(1..1)
Local Integer DTYP(1..1)
Local Integer NBDCLE
NBDCLE = 1
DCLE(1) = "SIHNUM"
DTYP(1) =  7
Return

$CHARGE_CLE
If dim([F:AAA_]SIHNUM)>0
 [F:AAA_]SIHNUM = [F:SIH]NUM
Endif
Return

########################################################################
# Return the filter necessary for incremental delete in synchroonization
Subprog GET_FLTDELINC(PFLT)
Variable Clbfile PFLT
PFLT = "1=1"
Append PFLT, " & [F:AAA_]SIHNUM=[F:SIH]NUM"

End

$MAJFLD
### SIHNUM
[L]FLD="SIHNUM"
[L]FORMULE='[F:SIH]NUM'
If dim([F:AAA_]SIHNUM)>0
 [F:AAA_]SIHNUM = [F:SIH]NUM
Endif

### SIHNUMLNK
[L]FLD="SIHNUMLNK"
[L]FORMULE='[F:SIH]NUM'
If dim([F:AAA_]SIHNUMLNK)>0
 [F:AAA_]SIHNUMLNK = [F:SIH]NUM
Endif

### SIVTYP
[L]FLD="SIVTYP"
[L]FORMULE='[F:SIV]SIVTYP'
If dim([F:AAA_]SIVTYP)>0
 [F:AAA_]SIVTYP = [F:SIV]SIVTYP
Endif

### SIVTYP_LEG
[L]FLD="SIVTYP_LEG"
[L]FORMULE='func TRTX3BIVEN.GETLEG_SIVTYP([F:AAA_]SIVTYP,[F:CPY]LEG)'
If dim([F:AAA_]SIVTYP_LEG)>0
 [F:AAA_]SIVTYP_LEG = func TRTX3BIVEN.GETLEG_SIVTYP([F:AAA_]SIVTYP,[F:CPY]LEG)
Endif

### INVTYP
[L]FLD="INVTYP"
[L]FORMULE='[F:SIV]INVTYP'
If dim([F:AAA_]INVTYP)>0
 [F:AAA_]INVTYP = [F:SIV]INVTYP
Endif

### INVDAT
[L]FLD="INVDAT"
[L]FORMULE='[F:SIV]INVDAT'
If dim([F:AAA_]INVDAT)>0
 [F:AAA_]INVDAT = [F:SIV]INVDAT
Endif

### BPRFCT
[L]FLD="BPRFCT"
[L]FORMULE='[F:SIH]BPRFCT'
If dim([F:AAA_]BPRFCT)>0
 [F:AAA_]BPRFCT = [F:SIH]BPRFCT
Endif

### EECICT
[L]FLD="EECICT"
[L]FORMULE='[F:SIV]EECICT'
If dim([F:AAA_]EECICT)>0
 [F:AAA_]EECICT = [F:SIV]EECICT
Endif

### EECSCH
[L]FLD="EECSCH"
[L]FORMULE='[F:SIV]EECSCH'
If dim([F:AAA_]EECSCH)>0
 [F:AAA_]EECSCH = [F:SIV]EECSCH
Endif

### EECSCH_LEG
[L]FLD="EECSCH_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_EECSCH([F:AAA_]EECSCH,[F:CPY]LEG)'
If dim([F:AAA_]EECSCH_LEG)>0
 [F:AAA_]EECSCH_LEG = func TRTX3BITC.GETLEG_EECSCH([F:AAA_]EECSCH,[F:CPY]LEG)
Endif

### EECNAT
[L]FLD="EECNAT"
[L]FORMULE='[F:SIV]EECNAT'
If dim([F:AAA_]EECNAT)>0
 [F:AAA_]EECNAT = [F:SIV]EECNAT
Endif

### EECNAT_LEG
[L]FLD="EECNAT_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_EECNAT([F:AAA_]EECNAT,[F:CPY]LEG)'
If dim([F:AAA_]EECNAT_LEG)>0
 [F:AAA_]EECNAT_LEG = func TRTX3BITC.GETLEG_EECNAT([F:AAA_]EECNAT,[F:CPY]LEG)
Endif

### FFWNUM
[L]FLD="FFWNUM"
[L]FORMULE='[F:SIV]FFWNUM'
If dim([F:AAA_]FFWNUM)>0
 [F:AAA_]FFWNUM = [F:SIV]FFWNUM
Endif

### VAC
[L]FLD="VAC"
[L]FORMULE='[F:SIH]VAC'
If dim([F:AAA_]VAC)>0
 [F:AAA_]VAC = [F:SIH]VAC
Endif

### VACBPR_LEG
[L]FLD="VACBPR_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_VACBPR([F:AAA_]VAC,[F:CPY]LEG)'
If dim([F:AAA_]VACBPR_LEG)>0
 [F:AAA_]VACBPR_LEG = func TRTX3BITC.GETLEG_VACBPR([F:AAA_]VAC,[F:CPY]LEG)
Endif

### PTE
[L]FLD="PTE"
[L]FORMULE='[F:SIH]PTE'
If dim([F:AAA_]PTE)>0
 [F:AAA_]PTE = [F:SIH]PTE
Endif

### PTE_LEG
[L]FLD="PTE_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_PTE([F:AAA_]PTE,[F:CPY]LEG)'
If dim([F:AAA_]PTE_LEG)>0
 [F:AAA_]PTE_LEG = func TRTX3BITC.GETLEG_PTE([F:AAA_]PTE,[F:CPY]LEG)
Endif

### DEP
[L]FLD="DEP"
[L]FORMULE='[F:SIV]DEP'
If dim([F:AAA_]DEP)>0
 [F:AAA_]DEP = [F:SIV]DEP
Endif

### DEP_LEG
[L]FLD="DEP_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_DEP([F:AAA_]DEP,[F:CPY]LEG)'
If dim([F:AAA_]DEP_LEG)>0
 [F:AAA_]DEP_LEG = func TRTX3BITC.GETLEG_DEP([F:AAA_]DEP,[F:CPY]LEG)
Endif

### CNOREN
[L]FLD="CNOREN"
[L]FORMULE='[F:SIV]CNOREN'
If dim([F:AAA_]CNOREN)>0
 [F:AAA_]CNOREN = [F:SIV]CNOREN
Endif

### BPINAM
[L]FLD="BPINAM"
[L]FORMULE='[F:SIV]BPINAM'
If dim([F:AAA_]BPINAM)>0
 [F:AAA_]BPINAM = [F:SIV]BPINAM
Endif

### CNINAM
[L]FLD="CNINAM"
[L]FORMULE='[F:SIV]CNINAM'
If dim([F:AAA_]CNINAM)>0
 [F:AAA_]CNINAM = [F:SIV]CNINAM
Endif

### POSCOD
[L]FLD="POSCOD"
[L]FORMULE='vireblc([F:SIH]POSCOD,1)'
If dim([F:AAA_]POSCOD)>0
 [F:AAA_]POSCOD = vireblc([F:SIH]POSCOD,1)
Endif

### CTY
[L]FLD="CTY"
[L]FORMULE='[F:SIH]CTY'
If dim([F:AAA_]CTY)>0
 [F:AAA_]CTY = [F:SIH]CTY
Endif

### CRY
[L]FLD="CRY"
[L]FORMULE='[F:SIH]CRY'
If dim([F:AAA_]CRY)>0
 [F:AAA_]CRY = [F:SIH]CRY
Endif

### BPDNAM
[L]FLD="BPDNAM"
[L]FORMULE='[F:SIV]BPDNAM'
If dim([F:AAA_]BPDNAM)>0
 [F:AAA_]BPDNAM = [F:SIV]BPDNAM
Endif

### CNDNAM
[L]FLD="CNDNAM"
[L]FORMULE='[F:SIV]CNDNAM'
If dim([F:AAA_]CNDNAM)>0
 [F:AAA_]CNDNAM = [F:SIV]CNDNAM
Endif

### BPDPOSCOD
[L]FLD="BPDPOSCOD"
[L]FORMULE='vireblc([F:SIV]BPDPOSCOD,1)'
If dim([F:AAA_]BPDPOSCOD)>0
 [F:AAA_]BPDPOSCOD = vireblc([F:SIV]BPDPOSCOD,1)
Endif

### BPDCTY
[L]FLD="BPDCTY"
[L]FORMULE='[F:SIV]BPDCTY'
If dim([F:AAA_]BPDCTY)>0
 [F:AAA_]BPDCTY = [F:SIV]BPDCTY
Endif

### BPDCRY
[L]FLD="BPDCRY"
[L]FORMULE='[F:SIV]BPDCRY'
If dim([F:AAA_]BPDCRY)>0
 [F:AAA_]BPDCRY = [F:SIV]BPDCRY
Endif

### BPYNAM
[L]FLD="BPYNAM"
[L]FORMULE='[F:SIH]BPYNAM'
If dim([F:AAA_]BPYNAM)>0
 [F:AAA_]BPYNAM = [F:SIH]BPYNAM
Endif

### BPYPOSCOD
[L]FLD="BPYPOSCOD"
[L]FORMULE='vireblc([F:SIH]BPYPOSCOD,1)'
If dim([F:AAA_]BPYPOSCOD)>0
 [F:AAA_]BPYPOSCOD = vireblc([F:SIH]BPYPOSCOD,1)
Endif

### BPYCTY
[L]FLD="BPYCTY"
[L]FORMULE='[F:SIH]BPYCTY'
If dim([F:AAA_]BPYCTY)>0
 [F:AAA_]BPYCTY = [F:SIH]BPYCTY
Endif

### BPYCRY
[L]FLD="BPYCRY"
[L]FORMULE='[F:SIH]BPYCRY'
If dim([F:AAA_]BPYCRY)>0
 [F:AAA_]BPYCRY = [F:SIH]BPYCRY
Endif


Return

