#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
## BI-DIMENSION ## Synchronization rule SADSID

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".SINVOICED" : If clalev([F:SID])=0 : Local File =OUVTAB [SID] : Endif
OUVTAB = GDOSSIER+".SINVOICE" : If clalev([F:SIH])=0 : Local File =OUVTAB [SIH] : Endif
OUVTAB = GDOSSIER+".SINVOICEV" : If clalev([F:SIV])=0 : Local File =OUVTAB [SIV] : Endif
OUVTAB = GDOSSIER+".COMPANY" : If clalev([F:CPY])=0 : Local File =OUVTAB [CPY] : Endif
OUVTAB = "Link [SID]"
Link [SID] With
& [SIH]SIH0 ~= [F:SID]NUM,
& [SIV]SIV0 ~= [F:SID]NUM,
& [CPY]CPY0 = [F:SIV]CPY
& As [LNK_]
& Where [F:SIH]ORIMOD=5 & [F:SIH]STA=3
& Order By Key CLE = [SID]NUM;[SID]SIDLIN
FILTRE = ""
Return

$FERME
If clalev([F:SID]) : Close local File [SID] : Endif
If clalev([F:SIH]) : Close local File [SIH] : Endif
If clalev([F:SIV]) : Close local File [SIV] : Endif
If clalev([F:CPY]) : Close local File [CPY] : Endif
Return

$DCLE
Local Char    DCLE(GLONAVA)(1..3)
Local Integer DTYP(1..3)
Local Integer NBDCLE
NBDCLE = 3
DCLE(1) = "SIHNUM"
DTYP(1) =  7
DCLE(2) = "DOCTYPLIN"
DTYP(2) =  7
DCLE(3) = "SIDLIN"
DTYP(3) =  3
Return

$CHARGE_CLE
If dim([F:AAA_]SIHNUM)>0
 [F:AAA_]SIHNUM = [F:SID]NUM
Endif
If dim([F:AAA_]DOCTYPLIN)>0
 [F:AAA_]DOCTYPLIN = 1
Endif
If dim([F:AAA_]SIDLIN)>0
 [F:AAA_]SIDLIN = [F:SID]SIDLIN
Endif
Return

########################################################################
# Return the filter necessary for incremental delete in synchroonization
Subprog GET_FLTDELINC(PFLT)
Variable Clbfile PFLT
PFLT = "1=1"
Append PFLT, " & [F:AAA_]SIHNUM=[F:SID]NUM"
Append PFLT, " & [F:AAA_]SIDLIN=[F:SID]SIDLIN"

End

$MAJFLD
### SIHNUM
[L]FLD="SIHNUM"
[L]FORMULE='[F:SID]NUM'
If dim([F:AAA_]SIHNUM)>0
 [F:AAA_]SIHNUM = [F:SID]NUM
Endif

### SIDLIN
[L]FLD="SIDLIN"
[L]FORMULE='[F:SID]SIDLIN'
If dim([F:AAA_]SIDLIN)>0
 [F:AAA_]SIDLIN = [F:SID]SIDLIN
Endif

### DOCTYPLIN
[L]FLD="DOCTYPLIN"
[L]FORMULE='1'
If dim([F:AAA_]DOCTYPLIN)>0
 [F:AAA_]DOCTYPLIN = 1
Endif

### EECFLOPHY
[L]FLD="EECFLOPHY"
[L]FORMULE='[F:SID]EECFLOPHY'
If dim([F:AAA_]EECFLOPHY)>0
 [F:AAA_]EECFLOPHY = [F:SID]EECFLOPHY
Endif

### VAT
[L]FLD="VAT"
[L]FORMULE='[F:SID]VAT(0)'
If dim([F:AAA_]VAT)>0
 [F:AAA_]VAT = [F:SID]VAT(0)
Endif

### VAT_LEG
[L]FLD="VAT_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_VAT([F:AAA_]VAT,[F:CPY]LEG)'
If dim([F:AAA_]VAT_LEG)>0
 [F:AAA_]VAT_LEG = func TRTX3BITC.GETLEG_VAT([F:AAA_]VAT,[F:CPY]LEG)
Endif

### ITMDES1
[L]FLD="ITMDES1"
[L]FORMULE='[F:SID]ITMDES1'
If dim([F:AAA_]ITMDES1)>0
 [F:AAA_]ITMDES1 = [F:SID]ITMDES1
Endif

### ECCVALMAJ
[L]FLD="ECCVALMAJ"
[L]FORMULE='[F:SID]ECCVALMAJ'
If dim([F:AAA_]ECCVALMAJ)>0
 [F:AAA_]ECCVALMAJ = [F:SID]ECCVALMAJ
Endif

### ECCVALMIN
[L]FLD="ECCVALMIN"
[L]FORMULE='[F:SID]ECCVALMIN'
If dim([F:AAA_]ECCVALMIN)>0
 [F:AAA_]ECCVALMIN = [F:SID]ECCVALMIN
Endif

### LINTYP
[L]FLD="LINTYP"
[L]FORMULE='[F:SID]LINTYP'
If dim([F:AAA_]LINTYP)>0
 [F:AAA_]LINTYP = [F:SID]LINTYP
Endif

### FOCFLG
[L]FLD="FOCFLG"
[L]FORMULE='[F:SID]FOCFLG'
If dim([F:AAA_]FOCFLG)>0
 [F:AAA_]FOCFLG = [F:SID]FOCFLG
Endif

### GROPRI
[L]FLD="GROPRI"
[L]FORMULE='[F:SID]GROPRI'
If dim([F:AAA_]GROPRI)>0
 [F:AAA_]GROPRI = [F:SID]GROPRI
Endif

### NETPRI
[L]FLD="NETPRI"
[L]FORMULE='[F:SID]NETPRI'
If dim([F:AAA_]NETPRI)>0
 [F:AAA_]NETPRI = [F:SID]NETPRI
Endif

### CPRPRI
[L]FLD="CPRPRI"
[L]FORMULE='[F:SID]CPRPRI'
If dim([F:AAA_]CPRPRI)>0
 [F:AAA_]CPRPRI = [F:SID]CPRPRI
Endif

### PFM
[L]FLD="PFM"
[L]FORMULE='[F:SID]PFM'
If dim([F:AAA_]PFM)>0
 [F:AAA_]PFM = [F:SID]PFM
Endif

### PRIORD
[L]FLD="PRIORD"
[L]FORMULE='[F:SID]PRIORD'
If dim([F:AAA_]PRIORD)>0
 [F:AAA_]PRIORD = [F:SID]PRIORD
Endif

### SAU
[L]FLD="SAU"
[L]FORMULE='[F:SID]SAU'
If dim([F:AAA_]SAU)>0
 [F:AAA_]SAU = [F:SID]SAU
Endif

### SAUSTUCOE
[L]FLD="SAUSTUCOE"
[L]FORMULE='[F:SID]SAUSTUCOE'
If dim([F:AAA_]SAUSTUCOE)>0
 [F:AAA_]SAUSTUCOE = [F:SID]SAUSTUCOE
Endif

### REPRAT1
[L]FLD="REPRAT1"
[L]FORMULE='[F:SID]REPRAT1'
If dim([F:AAA_]REPRAT1)>0
 [F:AAA_]REPRAT1 = [F:SID]REPRAT1
Endif

### REPRAT2
[L]FLD="REPRAT2"
[L]FORMULE='[F:SID]REPRAT2'
If dim([F:AAA_]REPRAT2)>0
 [F:AAA_]REPRAT2 = [F:SID]REPRAT2
Endif

### SOHNUM
[L]FLD="SOHNUM"
[L]FORMULE='[F:SID]SOHNUM'
If dim([F:AAA_]SOHNUM)>0
 [F:AAA_]SOHNUM = [F:SID]SOHNUM
Endif

### SOPLIN
[L]FLD="SOPLIN"
[L]FORMULE='[F:SID]SOPLIN'
If dim([F:AAA_]SOPLIN)>0
 [F:AAA_]SOPLIN = [F:SID]SOPLIN
Endif

### SOQSEQ
[L]FLD="SOQSEQ"
[L]FORMULE='[F:SID]SOQSEQ'
If dim([F:AAA_]SOQSEQ)>0
 [F:AAA_]SOQSEQ = [F:SID]SOQSEQ
Endif

### SDHNUM
[L]FLD="SDHNUM"
[L]FORMULE='[F:SID]SDHNUM'
If dim([F:AAA_]SDHNUM)>0
 [F:AAA_]SDHNUM = [F:SID]SDHNUM
Endif

### SDDLIN
[L]FLD="SDDLIN"
[L]FORMULE='[F:SID]SDDLIN'
If dim([F:AAA_]SDDLIN)>0
 [F:AAA_]SDDLIN = [F:SID]SDDLIN
Endif

### SRHNUM
[L]FLD="SRHNUM"
[L]FORMULE='[F:SID]SRHNUM'
If dim([F:AAA_]SRHNUM)>0
 [F:AAA_]SRHNUM = [F:SID]SRHNUM
Endif

### SRDLIN
[L]FLD="SRDLIN"
[L]FORMULE='[F:SID]SRDLIN'
If dim([F:AAA_]SRDLIN)>0
 [F:AAA_]SRDLIN = [F:SID]SRDLIN
Endif

### SIHORINUM
[L]FLD="SIHORINUM"
[L]FORMULE='[F:SID]SIHORINUM'
If dim([F:AAA_]SIHORINUM)>0
 [F:AAA_]SIHORINUM = [F:SID]SIHORINUM
Endif

### SIDORILIN
[L]FLD="SIDORILIN"
[L]FORMULE='[F:SID]SIDORILIN'
If dim([F:AAA_]SIDORILIN)>0
 [F:AAA_]SIDORILIN = [F:SID]SIDORILIN
Endif

### CONNUM
[L]FLD="CONNUM"
[L]FORMULE='[F:SID]CONNUM'
If dim([F:AAA_]CONNUM)>0
 [F:AAA_]CONNUM = [F:SID]CONNUM
Endif

### SRENUM
[L]FLD="SRENUM"
[L]FORMULE='[F:SID]SRENUM'
If dim([F:AAA_]SRENUM)>0
 [F:AAA_]SRENUM = [F:SID]SRENUM
Endif

### SGHNUM
[L]FLD="SGHNUM"
[L]FORMULE='[F:SID]SGHNUM'
If dim([F:AAA_]SGHNUM)>0
 [F:AAA_]SGHNUM = [F:SID]SGHNUM
Endif

### DTAVCRNUM
[L]FLD="DTAVCRNUM"
[L]FORMULE='""'
If dim([F:AAA_]DTAVCRNUM)>0
FORMULE = ''
 [F:AAA_]DTAVCRNUM = ''
Endif

### DTAVCRTYP
[L]FLD="DTAVCRTYP"
[L]FORMULE='0'
If dim([F:AAA_]DTAVCRTYP)>0
 [F:AAA_]DTAVCRTYP = 0
Endif

### DTADTANUM
[L]FLD="DTADTANUM"
[L]FORMULE='0'
If dim([F:AAA_]DTADTANUM)>0
 [F:AAA_]DTADTANUM = 0
Endif

### DUDTYP
[L]FLD="DUDTYP"
[L]FORMULE='""'
If dim([F:AAA_]DUDTYP)>0
FORMULE = ''
 [F:AAA_]DUDTYP = ''
Endif

### DUDNUM
[L]FLD="DUDNUM"
[L]FORMULE='""'
If dim([F:AAA_]DUDNUM)>0
FORMULE = ''
 [F:AAA_]DUDNUM = ''
Endif

### DUDLIG
[L]FLD="DUDLIG"
[L]FORMULE='0'
If dim([F:AAA_]DUDLIG)>0
 [F:AAA_]DUDLIG = 0
Endif

### DUDDUDLIG
[L]FLD="DUDDUDLIG"
[L]FORMULE='0'
If dim([F:AAA_]DUDDUDLIG)>0
 [F:AAA_]DUDDUDLIG = 0
Endif


Return

