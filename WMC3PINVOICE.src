#<AdxTL>@(#)0.0.0.0 $Revision$Class Purchase invoices
# Supervisor
## ACLA-CLASSE ## PINVOICE
# 2018-08-27 12:39:19 388

####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 61 : EECNAT Transaction nature ( Field TEC 5)
####################################################################

$SET_EECNAT
If [L]_AOLDVAL<>this.EECNAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECNAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECNAT
 Gosub PROPAGATE_EECNAT
Endif
Return

$INIT_EECNAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECNAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECNAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECNAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECNAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECNAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECNAT
[L]CURPRO = "EECNAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECNAT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECNAT
[L]CURPRO = "EECNAT"
If vireblc(this.EECNAT,2)<>vireblc(format$("K:5c",this.EECNAT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECNAT
[L]CURPRO = "EECNAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECNAT
[L]CURPRO = "EECNAT"
Return

$PROPAGATE_EECNAT
this.isReadonly = 0
[L]CURPRO = "EECNAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECNAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECNAT"
$_LNKPRO_EECNAT
Return


####################################################################
# 62 : EECSCH EU rule ( Field TSC 5)
####################################################################

$SET_EECSCH
If [L]_AOLDVAL<>this.EECSCH
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECSCH
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECSCH
 Gosub PROPAGATE_EECSCH
Endif
Return

$INIT_EECSCH
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECSCH"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECSCH
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECSCH"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECSCH                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECSCH                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECSCH
[L]CURPRO = "EECSCH"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECSCH,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECSCH
[L]CURPRO = "EECSCH"
If vireblc(this.EECSCH,2)<>vireblc(format$("K:5c",this.EECSCH),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECSCH
[L]CURPRO = "EECSCH"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECSCH
[L]CURPRO = "EECSCH"
Return

$PROPAGATE_EECSCH
this.isReadonly = 0
[L]CURPRO = "EECSCH"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECSCH
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECSCH"
$_LNKPRO_EECSCH
Return


####################################################################
# 63 : EECTRN EU transport mode ( Field Local menu number 237)
####################################################################

$SET_EECTRN
If [L]_AOLDVAL<>this.EECTRN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECTRN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECTRN
 Gosub PROPAGATE_EECTRN
Endif
Return

$INIT_EECTRN
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECTRN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.EECTRN=0 and fmet this.AGETATTRIBUTE("EECTRN","$isMandatory")="true"
 this.EECTRN = 1
Endif
Return
 
$CONTROL_EECTRN
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECTRN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECTRN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECTRN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECTRN
[L]CURPRO = "EECTRN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EECTRN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECTRN
[L]CURPRO = "EECTRN"
If this.EECTRN<0 or this.EECTRN>len(mess(0,237,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"237 ->"-num$(this.EECTRN)-mess(99,123,1)):  Return : # Local menu "237 -> Invalid option
Endif
Return

$_AOTHERS_EECTRN
[L]CURPRO = "EECTRN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECTRN
[L]CURPRO = "EECTRN"
Return

$PROPAGATE_EECTRN
this.isReadonly = 0
[L]CURPRO = "EECTRN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECTRN
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECTRN"
$_LNKPRO_EECTRN
Return


####################################################################
# 64 : EECICT Incoterm ( Field ICT 5)
####################################################################

$SET_EECICT
If [L]_AOLDVAL<>this.EECICT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECICT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECICT
 Gosub PROPAGATE_EECICT
Endif
Return

$INIT_EECICT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECICT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECICT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECICT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECICT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECICT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECICT
[L]CURPRO = "EECICT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECICT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECICT
[L]CURPRO = "EECICT"
If vireblc(this.EECICT,2)<>vireblc(format$("K:5c",this.EECICT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECICT
[L]CURPRO = "EECICT"
If vireblc(this.EECICT,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPICT.ACTRLREF(this,"EECICT",this.EECICT,this.EECICT,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.EECICT<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECICT
[L]CURPRO = "EECICT"
Return

$PROPAGATE_EECICT
this.isReadonly = 0
[L]CURPRO = "EECICT"
Gosub _LNKPRO_EECICT
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECICT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECICT"
$_LNKPRO_EECICT
If vireblc(this.EECICT,2)<>""
 # Link INCOTERM
 Local File INCOTERM [WICTH]
 Read [F:WICTH]ICT0 = this.EECICT
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="INCOTERM" & ZONE="DES" & IDENT1=[F:WICTH]ICTCOD & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("EECICT","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WICTH]
Endif
Return


####################################################################
# 65 : EECICT2 Incoterm ( Field ICT 5)
####################################################################

$SET_EECICT2
If [L]_AOLDVAL<>this.EECICT2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECICT2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECICT2
 Gosub PROPAGATE_EECICT2
Endif
Return

$INIT_EECICT2
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECICT2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECICT2
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECICT2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECICT2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECICT2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECICT2
[L]CURPRO = "EECICT2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECICT2,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECICT2
[L]CURPRO = "EECICT2"
If vireblc(this.EECICT2,2)<>vireblc(format$("K:5c",this.EECICT2),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECICT2
[L]CURPRO = "EECICT2"
If vireblc(this.EECICT2,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPICT.ACTRLREF(this,"EECICT2",this.EECICT2,this.EECICT2,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.EECICT2<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECICT2
[L]CURPRO = "EECICT2"
Return

$PROPAGATE_EECICT2
this.isReadonly = 0
[L]CURPRO = "EECICT2"
Gosub _LNKPRO_EECICT2
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECICT2
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECICT2"
$_LNKPRO_EECICT2
If vireblc(this.EECICT2,2)<>""
 # Link INCOTERM
 Local File INCOTERM [WICTH]
 Read [F:WICTH]ICT0 = this.EECICT2
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="INCOTERM" & ZONE="DES" & IDENT1=[F:WICTH]ICTCOD & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("EECICT2","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WICTH]
Endif
Return


####################################################################
# 66 : ICTCTY Incoterm town ( Field CTY 40)
####################################################################

$SET_ICTCTY
If [L]_AOLDVAL<>this.ICTCTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ICTCTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ICTCTY
 Gosub PROPAGATE_ICTCTY
Endif
Return

$INIT_ICTCTY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ICTCTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ICTCTY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ICTCTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ICTCTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ICTCTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ICTCTY
[L]CURPRO = "ICTCTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ICTCTY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ICTCTY
[L]CURPRO = "ICTCTY"
If vireblc(this.ICTCTY,2)<>vireblc(format$("K:40X",this.ICTCTY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ICTCTY
[L]CURPRO = "ICTCTY"
[L]ASTATUS =  func ASYRTRTATY.CONTROLCTY(this,"ICTCTY",this.ICTCTY,this.CRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ICTCTY
[L]CURPRO = "ICTCTY"
Return

$PROPAGATE_ICTCTY
this.isReadonly = 0
[L]ASTATUS =  func ASYRTRTATY.PROPAGATECTY(this,"ICTCTY",this.ICTCTY,this.POSCOD,this.SAT,this.CRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]CURPRO = "ICTCTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ICTCTY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ICTCTY"
$_LNKPRO_ICTCTY
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATCTY(this,"ICTCTY",this.ICTCTY,[L]AFORMAT,this.CRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("ICTCTY","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 67 : ICTCTY2 Incoterm town ( Field CTY 40)
####################################################################

$SET_ICTCTY2
If [L]_AOLDVAL<>this.ICTCTY2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ICTCTY2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ICTCTY2
 Gosub PROPAGATE_ICTCTY2
Endif
Return

$INIT_ICTCTY2
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ICTCTY2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ICTCTY2
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ICTCTY2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ICTCTY2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ICTCTY2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ICTCTY2
[L]CURPRO = "ICTCTY2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ICTCTY2,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ICTCTY2
[L]CURPRO = "ICTCTY2"
If vireblc(this.ICTCTY2,2)<>vireblc(format$("K:40X",this.ICTCTY2),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ICTCTY2
[L]CURPRO = "ICTCTY2"
[L]ASTATUS =  func ASYRTRTATY.CONTROLCTY(this,"ICTCTY2",this.ICTCTY2,this.CRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ICTCTY2
[L]CURPRO = "ICTCTY2"
Return

$PROPAGATE_ICTCTY2
this.isReadonly = 0
[L]ASTATUS =  func ASYRTRTATY.PROPAGATECTY(this,"ICTCTY2",this.ICTCTY2,this.POSCOD,this.SAT,this.CRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]CURPRO = "ICTCTY2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ICTCTY2
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ICTCTY2"
$_LNKPRO_ICTCTY2
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATCTY(this,"ICTCTY2",this.ICTCTY2,[L]AFORMAT,this.CRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("ICTCTY2","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 68 : EECLOC EU transport location ( Field Local menu number 236)
####################################################################

$SET_EECLOC
If [L]_AOLDVAL<>this.EECLOC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECLOC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECLOC
 Gosub PROPAGATE_EECLOC
Endif
Return

$INIT_EECLOC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECLOC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.EECLOC=0 and fmet this.AGETATTRIBUTE("EECLOC","$isMandatory")="true"
 this.EECLOC = 1
Endif
Return
 
$CONTROL_EECLOC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECLOC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECLOC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECLOC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECLOC
[L]CURPRO = "EECLOC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EECLOC=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECLOC
[L]CURPRO = "EECLOC"
If this.EECLOC<0 or this.EECLOC>len(mess(0,236,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"236 ->"-num$(this.EECLOC)-mess(99,123,1)):  Return : # Local menu "236 -> Invalid option
Endif
Return

$_AOTHERS_EECLOC
[L]CURPRO = "EECLOC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECLOC
[L]CURPRO = "EECLOC"
Return

$PROPAGATE_EECLOC
this.isReadonly = 0
[L]CURPRO = "EECLOC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECLOC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECLOC"
$_LNKPRO_EECLOC
Return


####################################################################
# 69 : EECNUM EU identification ( Field A 20)
####################################################################

$SET_EECNUM
If [L]_AOLDVAL<>this.EECNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECNUM
 Gosub PROPAGATE_EECNUM
Endif
Return

$INIT_EECNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECNUM
[L]CURPRO = "EECNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECNUM
[L]CURPRO = "EECNUM"
Return

$_AOTHERS_EECNUM
[L]CURPRO = "EECNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECNUM
[L]CURPRO = "EECNUM"
Return

$PROPAGATE_EECNUM
this.isReadonly = 0
[L]CURPRO = "EECNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EECNUM"
$_LNKPRO_EECNUM
Return


####################################################################
# 70 : FFWNUM Freight agent ( Field BPT 15)
####################################################################

$SET_FFWNUM
If [L]_AOLDVAL<>this.FFWNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FFWNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FFWNUM
 Gosub PROPAGATE_FFWNUM
Endif
Return

$INIT_FFWNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FFWNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FFWNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FFWNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FFWNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FFWNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FFWNUM
[L]CURPRO = "FFWNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.FFWNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FFWNUM
[L]CURPRO = "FFWNUM"
If vireblc(this.FFWNUM,2)<>vireblc(format$("K:15c",this.FFWNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_FFWNUM
[L]CURPRO = "FFWNUM"
If vireblc(this.FFWNUM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPT.ACTRLREF(this,"FFWNUM",this.FFWNUM,this.FFWNUM,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.FFWNUM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FFWNUM
[L]CURPRO = "FFWNUM"
Return

$PROPAGATE_FFWNUM
this.isReadonly = 0
[L]CURPRO = "FFWNUM"
Gosub _LNKPRO_FFWNUM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FFWNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FFWNUM"
$_LNKPRO_FFWNUM
If vireblc(this.FFWNUM,2)<>""
 # Link BPCARRIER
 Local File BPCARRIER [WBPT]
 Read [F:WBPT]BPT0 = this.FFWNUM
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FFWNUM","$title",[F:WBPT]BPTSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FFWNUM","$description",[F:WBPT]BPTNAM)
 Endif
 LogicClose File [WBPT]
Endif
Return


####################################################################
# 71 : FFWADD Forwarding agent address ( Field ADR 5)
####################################################################

$SET_FFWADD
If [L]_AOLDVAL<>this.FFWADD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FFWADD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FFWADD
 Gosub PROPAGATE_FFWADD
Endif
Return

$INIT_FFWADD
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FFWADD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FFWADD
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FFWADD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FFWADD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FFWADD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FFWADD
[L]CURPRO = "FFWADD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.FFWADD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FFWADD
[L]CURPRO = "FFWADD"
If vireblc(this.FFWADD,2)<>vireblc(format$("K:5c",this.FFWADD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_FFWADD
[L]CURPRO = "FFWADD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FFWADD
[L]CURPRO = "FFWADD"
If vireblc(this.FFWADD,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPADR.ACTRLREF(this,"FFWADD",this.FFWADD,1,this.FFWNUM,this.FFWADD,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.FFWADD<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_FFWADD
this.isReadonly = 0
[L]CURPRO = "FFWADD"
Gosub _LNKPRO_FFWADD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FFWADD
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FFWADD"
$_LNKPRO_FFWADD
If vireblc(this.FFWADD,2)<>""
 # Link BPADDRESS
 Local File BPADDRESS [WBPA]
 Read [F:WBPA]BPA0 = 1;this.FFWNUM;this.FFWADD
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FFWADD","$description",[F:WBPA]BPADES)
 Endif
 LogicClose File [WBPA]
Endif
Return


####################################################################
# 72 : FIY Fiscal year ( Field C 2)
####################################################################

$SET_FIY
If [L]_AOLDVAL<>this.FIY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FIY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FIY
 Gosub PROPAGATE_FIY
Endif
Return

$INIT_FIY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FIY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FIY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FIY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FIY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FIY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FIY
[L]CURPRO = "FIY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.FIY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FIY
[L]CURPRO = "FIY"
Return

$_AOTHERS_FIY
[L]CURPRO = "FIY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FIY
[L]CURPRO = "FIY"
Return

$PROPAGATE_FIY
this.isReadonly = 0
[L]CURPRO = "FIY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FIY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FIY"
$_LNKPRO_FIY
Return


####################################################################
# 73 : PER Period ( Field C 2)
####################################################################

$SET_PER
If [L]_AOLDVAL<>this.PER
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PER
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PER
 Gosub PROPAGATE_PER
Endif
Return

$INIT_PER
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "PER"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PER
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "PER"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PER                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PER                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PER
[L]CURPRO = "PER"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PER=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PER
[L]CURPRO = "PER"
Return

$_AOTHERS_PER
[L]CURPRO = "PER"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PER
[L]CURPRO = "PER"
Return

$PROPAGATE_PER
this.isReadonly = 0
[L]CURPRO = "PER"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PER
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "PER"
$_LNKPRO_PER
Return


####################################################################
# 74 : RITNBR No. of retentions ( Field C 4)
####################################################################

$SET_RITNBR
If [L]_AOLDVAL<>this.RITNBR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RITNBR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RITNBR
 Gosub PROPAGATE_RITNBR
Endif
Return

$INIT_RITNBR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITNBR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RITNBR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITNBR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RITNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RITNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RITNBR
[L]CURPRO = "RITNBR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RITNBR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RITNBR
[L]CURPRO = "RITNBR"
Return

$_AOTHERS_RITNBR
[L]CURPRO = "RITNBR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RITNBR
[L]CURPRO = "RITNBR"
Return

$PROPAGATE_RITNBR
this.isReadonly = 0
[L]CURPRO = "RITNBR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RITNBR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITNBR"
$_LNKPRO_RITNBR
Return


####################################################################
# 76 : RITINV Proforma ( Field VCR 20)
####################################################################

$SET_RITINV
If [L]_AOLDVAL<>this.RITINV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RITINV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RITINV
 Gosub PROPAGATE_RITINV
Endif
Return

$INIT_RITINV
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITINV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RITINV
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITINV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RITINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RITINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RITINV
[L]CURPRO = "RITINV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.RITINV,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RITINV
[L]CURPRO = "RITINV"
If vireblc(this.RITINV,2)<>vireblc(format$("K:20X",this.RITINV),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_RITINV
[L]CURPRO = "RITINV"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RITINV
[L]CURPRO = "RITINV"
Return

$PROPAGATE_RITINV
this.isReadonly = 0
[L]CURPRO = "RITINV"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RITINV
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITINV"
$_LNKPRO_RITINV
Return


####################################################################
# 77 : RITPAY Payment ( Field VCR 20)
####################################################################

$SET_RITPAY
If [L]_AOLDVAL<>this.RITPAY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RITPAY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RITPAY
 Gosub PROPAGATE_RITPAY
Endif
Return

$INIT_RITPAY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITPAY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RITPAY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITPAY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RITPAY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RITPAY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RITPAY
[L]CURPRO = "RITPAY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.RITPAY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RITPAY
[L]CURPRO = "RITPAY"
If vireblc(this.RITPAY,2)<>vireblc(format$("K:20X",this.RITPAY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_RITPAY
[L]CURPRO = "RITPAY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RITPAY
[L]CURPRO = "RITPAY"
Return

$PROPAGATE_RITPAY
this.isReadonly = 0
[L]CURPRO = "RITPAY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RITPAY
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "RITPAY"
$_LNKPRO_RITPAY
Return


####################################################################
# 78 : STRDATSVC Start service ( Field D)
####################################################################

$SET_STRDATSVC
If [L]_AOLDVAL<>this.STRDATSVC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STRDATSVC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STRDATSVC
 Gosub PROPAGATE_STRDATSVC
Endif
Return

$INIT_STRDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "STRDATSVC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STRDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "STRDATSVC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STRDATSVC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STRDATSVC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STRDATSVC
[L]CURPRO = "STRDATSVC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STRDATSVC=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STRDATSVC
[L]CURPRO = "STRDATSVC"
Return

$_AOTHERS_STRDATSVC
[L]CURPRO = "STRDATSVC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STRDATSVC
[L]CURPRO = "STRDATSVC"
Return

$PROPAGATE_STRDATSVC
this.isReadonly = 0
[L]CURPRO = "STRDATSVC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STRDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "STRDATSVC"
$_LNKPRO_STRDATSVC
Return


####################################################################
# 79 : ENDDATSVC End service ( Field D)
####################################################################

$SET_ENDDATSVC
If [L]_AOLDVAL<>this.ENDDATSVC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ENDDATSVC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ENDDATSVC
 Gosub PROPAGATE_ENDDATSVC
Endif
Return

$INIT_ENDDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ENDDATSVC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ENDDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ENDDATSVC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ENDDATSVC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ENDDATSVC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ENDDATSVC
[L]CURPRO = "ENDDATSVC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ENDDATSVC=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ENDDATSVC
[L]CURPRO = "ENDDATSVC"
Return

$_AOTHERS_ENDDATSVC
[L]CURPRO = "ENDDATSVC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ENDDATSVC
[L]CURPRO = "ENDDATSVC"
Return

$PROPAGATE_ENDDATSVC
this.isReadonly = 0
[L]CURPRO = "ENDDATSVC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ENDDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "ENDDATSVC"
$_LNKPRO_ENDDATSVC
Return


####################################################################
# 80 : LASDATSVC Accrued costs posted ( Field D)
####################################################################

$SET_LASDATSVC
If [L]_AOLDVAL<>this.LASDATSVC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LASDATSVC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LASDATSVC
 Gosub PROPAGATE_LASDATSVC
Endif
Return

$INIT_LASDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "LASDATSVC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LASDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "LASDATSVC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LASDATSVC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LASDATSVC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LASDATSVC
[L]CURPRO = "LASDATSVC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.LASDATSVC=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LASDATSVC
[L]CURPRO = "LASDATSVC"
Return

$_AOTHERS_LASDATSVC
[L]CURPRO = "LASDATSVC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LASDATSVC
[L]CURPRO = "LASDATSVC"
Return

$PROPAGATE_LASDATSVC
this.isReadonly = 0
[L]CURPRO = "LASDATSVC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LASDATSVC
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "LASDATSVC"
$_LNKPRO_LASDATSVC
Return


####################################################################
# 81 : EXPNUM Export number ( Field L 8)
####################################################################

$SET_EXPNUM
If [L]_AOLDVAL<>this.EXPNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXPNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXPNUM
 Gosub PROPAGATE_EXPNUM
Endif
Return

$INIT_EXPNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EXPNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXPNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EXPNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXPNUM
[L]CURPRO = "EXPNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXPNUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$_AOTHERS_EXPNUM
[L]CURPRO = "EXPNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$PROPAGATE_EXPNUM
this.isReadonly = 0
[L]CURPRO = "EXPNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXPNUM
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "EXPNUM"
$_LNKPRO_EXPNUM
Return


####################################################################
# 82 : CREDAT Date created ( Field D)
####################################################################

$SET_CREDAT
If [L]_AOLDVAL<>this.CREDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREDAT
 Gosub PROPAGATE_CREDAT
Endif
Return

$INIT_CREDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "CREDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CREDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "CREDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREDAT
[L]CURPRO = "CREDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CREDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREDAT
[L]CURPRO = "CREDAT"
Return

$_AOTHERS_CREDAT
[L]CURPRO = "CREDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREDAT
[L]CURPRO = "CREDAT"
Return

$PROPAGATE_CREDAT
this.isReadonly = 0
[L]CURPRO = "CREDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "CREDAT"
$_LNKPRO_CREDAT
Return


####################################################################
# 83 : CREUSR Creation author ( Field A 5)
####################################################################

$SET_CREUSR
If [L]_AOLDVAL<>this.CREUSR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREUSR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREUSR
 Gosub PROPAGATE_CREUSR
Endif
Return

$INIT_CREUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "CREUSR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CREUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "CREUSR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREUSR
[L]CURPRO = "CREUSR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CREUSR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREUSR
[L]CURPRO = "CREUSR"
Return

$_AOTHERS_CREUSR
[L]CURPRO = "CREUSR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREUSR
[L]CURPRO = "CREUSR"
Return

$PROPAGATE_CREUSR
this.isReadonly = 0
[L]CURPRO = "CREUSR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "CREUSR"
$_LNKPRO_CREUSR
Return


####################################################################
# 84 : UPDDAT Change date ( Field D)
####################################################################

$SET_UPDDAT
If [L]_AOLDVAL<>this.UPDDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UPDDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UPDDAT
 Gosub PROPAGATE_UPDDAT
Endif
Return

$INIT_UPDDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UPDDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UPDDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UPDDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UPDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UPDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UPDDAT
[L]CURPRO = "UPDDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UPDDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UPDDAT
[L]CURPRO = "UPDDAT"
Return

$_AOTHERS_UPDDAT
[L]CURPRO = "UPDDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UPDDAT
[L]CURPRO = "UPDDAT"
Return

$PROPAGATE_UPDDAT
this.isReadonly = 0
[L]CURPRO = "UPDDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UPDDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UPDDAT"
$_LNKPRO_UPDDAT
Return


####################################################################
# 85 : UPDUSR Change author ( Field A 5)
####################################################################

$SET_UPDUSR
If [L]_AOLDVAL<>this.UPDUSR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UPDUSR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UPDUSR
 Gosub PROPAGATE_UPDUSR
Endif
Return

$INIT_UPDUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UPDUSR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UPDUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UPDUSR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UPDUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UPDUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UPDUSR
[L]CURPRO = "UPDUSR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.UPDUSR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UPDUSR
[L]CURPRO = "UPDUSR"
Return

$_AOTHERS_UPDUSR
[L]CURPRO = "UPDUSR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UPDUSR
[L]CURPRO = "UPDUSR"
Return

$PROPAGATE_UPDUSR
this.isReadonly = 0
[L]CURPRO = "UPDUSR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UPDUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UPDUSR"
$_LNKPRO_UPDUSR
Return


####################################################################
# 86 : UBLUSR Unblock user ( Field AUS 5)
####################################################################

$SET_UBLUSR
If [L]_AOLDVAL<>this.UBLUSR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UBLUSR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UBLUSR
 Gosub PROPAGATE_UBLUSR
Endif
Return

$INIT_UBLUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLUSR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UBLUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLUSR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UBLUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UBLUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UBLUSR
[L]CURPRO = "UBLUSR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.UBLUSR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UBLUSR
[L]CURPRO = "UBLUSR"
If vireblc(this.UBLUSR,2)<>vireblc(format$("K:5B",this.UBLUSR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_UBLUSR
[L]CURPRO = "UBLUSR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UBLUSR
[L]CURPRO = "UBLUSR"
Return

$PROPAGATE_UBLUSR
this.isReadonly = 0
[L]CURPRO = "UBLUSR"
Gosub _LNKPRO_UBLUSR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UBLUSR
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLUSR"
$_LNKPRO_UBLUSR
If vireblc(this.UBLUSR,2)<>""
 # Link AUTILIS
 Local File AUTILIS [WAUS]
 Read [F:WAUS]CODUSR = this.UBLUSR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("UBLUSR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("UBLUSR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WAUS]
Endif
Return


####################################################################
# 87 : UBLDAT Unblock date ( Field D)
####################################################################

$SET_UBLDAT
If [L]_AOLDVAL<>this.UBLDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UBLDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UBLDAT
 Gosub PROPAGATE_UBLDAT
Endif
Return

$INIT_UBLDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UBLDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UBLDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UBLDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UBLDAT
[L]CURPRO = "UBLDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UBLDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UBLDAT
[L]CURPRO = "UBLDAT"
Return

$_AOTHERS_UBLDAT
[L]CURPRO = "UBLDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UBLDAT
[L]CURPRO = "UBLDAT"
Return

$PROPAGATE_UBLDAT
this.isReadonly = 0
[L]CURPRO = "UBLDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UBLDAT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLDAT"
$_LNKPRO_UBLDAT
Return


####################################################################
# 88 : UBLAMT Unblock amount ( Field MD8 0)
####################################################################

$SET_UBLAMT
If [L]_AOLDVAL<>this.UBLAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UBLAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UBLAMT
 Gosub PROPAGATE_UBLAMT
Endif
Return

$INIT_UBLAMT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UBLAMT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UBLAMT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UBLAMT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UBLAMT
[L]CURPRO = "UBLAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UBLAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UBLAMT
[L]CURPRO = "UBLAMT"
Return

$_AOTHERS_UBLAMT
[L]CURPRO = "UBLAMT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UBLAMT
[L]CURPRO = "UBLAMT"
Return

$PROPAGATE_UBLAMT
this.isReadonly = 0
[L]CURPRO = "UBLAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UBLAMT
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "UBLAMT"
$_LNKPRO_UBLAMT
Return


####################################################################
# 89 : TWMSTA Match status ( Field Local menu number 585)
####################################################################

$SET_TWMSTA
If [L]_AOLDVAL<>this.TWMSTA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TWMSTA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TWMSTA
 Gosub PROPAGATE_TWMSTA
Endif
Return

$INIT_TWMSTA
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "TWMSTA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.TWMSTA=0 and fmet this.AGETATTRIBUTE("TWMSTA","$isMandatory")="true"
 this.TWMSTA = 1
Endif
Return
 
$CONTROL_TWMSTA
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "TWMSTA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TWMSTA                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TWMSTA                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TWMSTA
[L]CURPRO = "TWMSTA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TWMSTA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TWMSTA
[L]CURPRO = "TWMSTA"
If this.TWMSTA<0 or this.TWMSTA>len(mess(0,585,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"585 ->"-num$(this.TWMSTA)-mess(99,123,1)):  Return : # Local menu "585 -> Invalid option
Endif
Return

$_AOTHERS_TWMSTA
[L]CURPRO = "TWMSTA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TWMSTA
[L]CURPRO = "TWMSTA"
Return

$PROPAGATE_TWMSTA
this.isReadonly = 0
[L]CURPRO = "TWMSTA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TWMSTA
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "TWMSTA"
$_LNKPRO_TWMSTA
Return


####################################################################
# 90 : FRM1099 1099 form ( Field Local menu number 3601)
####################################################################

$SET_FRM1099
If [L]_AOLDVAL<>this.FRM1099
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FRM1099
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FRM1099
 Gosub PROPAGATE_FRM1099
Endif
Return

$INIT_FRM1099
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FRM1099"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.FRM1099=0 and fmet this.AGETATTRIBUTE("FRM1099","$isMandatory")="true"
 this.FRM1099 = 1
Endif
Return
 
$CONTROL_FRM1099
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FRM1099"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FRM1099               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FRM1099               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FRM1099
[L]CURPRO = "FRM1099"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.FRM1099=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FRM1099
[L]CURPRO = "FRM1099"
If this.FRM1099<0 or this.FRM1099>len(mess(0,3601,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"3601 ->"-num$(this.FRM1099)-mess(99,123,1)):  Return : # Local menu "3601 -> Invalid option
Endif
Return

$_AOTHERS_FRM1099
[L]CURPRO = "FRM1099"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FRM1099
[L]CURPRO = "FRM1099"
Return

$PROPAGATE_FRM1099
this.isReadonly = 0
[L]CURPRO = "FRM1099"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FRM1099
Gosub DECLARE_VAR From WMC0PINVOICE
[L]CURPRO = "FRM1099"
$_LNKPRO_FRM1099
Return




