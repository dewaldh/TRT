#<AdxTL>@(#)0.0.0.0 $Revision$Class Accounts
# Supervisor
## ACLA-CLASSE ## GACCOUNT
# 2018-08-27 12:32:35 449

####################################################################
# AINIT
####################################################################

$AINIT
Gosub DECLARE_VAR From WMC0GACCOUNT
Local Integer ALINE,TBLINE,ASTASNAPSHOT,ALLSTAT
If this.APARENT=null & this.snapshotEnabled=0
 this.snapshotEnabled = 1
Elsif this.APARENT<>null
 this.snapshotEnabled = this.APARENT.snapshotEnabled
Endif
If this.ASTALIN=[V]CST_ALL : this.ASTALIN = [V]CST_ANEW : Endif
For TBLINE=1 to 10
 [L]ALINE = func ASYRSUBTAB.ADDLINE([L]TBLINE,"CNV","C_GACCOUNT_CNV",this)
 If [L]ALINE=[V]CST_ANOTDEFINED : [L]ASTATUS = [V]CST_AERROR : Break : Endif
Next
If [L]ASTATUS = [V]CST_AERROR :  Gosub TESTALLSTAT : Endif
Gosub INIT_COA From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DES From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_ACC From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DESSHO From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DESTRA From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_SAC From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_SHOTRA From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_ACCSHO From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CSLFLGFLW From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLODEB From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLOCDT From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_LEGCLS From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CLSCOD From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CUR From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_SUBACC From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_SUBBPR From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLGUOM From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_UOM From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_VALUOM From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_ENAFLG From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_ACS From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FCY From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_VLYSTR From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_VLYEND From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_AUZ From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_COANBR From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLGVAT From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_VATIPT From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_ESDTRK From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_SNSDEF From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_SNSBLC From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_MTC From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CEN From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DIFFLG From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DIF From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_LOSGAIGNR From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DAS From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DASTYP From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLGABL From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLGEXPCRE From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_GACPVS From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_GACACN From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_RITTYP From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_UPDBLC From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DSP From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_DACDIENBR From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_BUDTRK From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_TIMDSP From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FRWCUR From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_BPAADD From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_BIDNUM From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_UPDDAT From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CREDAT From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_UPDTIM From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CRETIM From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_EXPNUM From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_FLG281 From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_TYP281 From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_LVATYP From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_COAACC From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CREDATTIM From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_UPDDATTIM From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_AUUID From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CREUSR From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_UPDUSR From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_TYPRATFLG From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_TYPRAT From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CSLFLGBPR From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub INIT_CSLBPRACE From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub AINIT From WMC0GACCOUNT : Gosub TESTALLSTAT
If this.snapshotEnabled=1 & this.APARENT=null
 [L]ASTASNAPSHOT = this.freeSnapshot
Endif
Return

####################################################################
# _ALOADATTRIBUTE
####################################################################

$_ALOADATTRIBUTE
Gosub DECLARE_VAR From WMC0GACCOUNT
Gosub _ALOADATTRIBUTE_COA From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_ACC From WMC1GACCOUNT : Gosub TESTALLSTAT
Return

####################################################################
# _ALNKPRO
####################################################################

$_ALNKPRO
Gosub DECLARE_VAR From WMC0GACCOUNT
Gosub LNKPRO_COA From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_ACC From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_FLODEB From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_FLOCDT From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_LEGCLS From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_CLSCOD From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_CUR From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_SUBACC From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_SUBBPR From WMC1GACCOUNT : Gosub TESTALLSTAT
For AINDCLA=1 To 10
 If this.RPT(AINDCLA)<>null& find(this.RPT(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.RPT(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_UOM From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_VALUOM From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_ACS From WMC1GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_AUZ From WMC1GACCOUNT : Gosub TESTALLSTAT
For AINDCLA=1 To 50
 If this.COAGAC(AINDCLA)<>null& find(this.COAGAC(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.COAGAC(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To 3
 If this.VAT1(AINDCLA)<>null& find(this.VAT1(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.VAT1(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_GACPVS From WMC2GACCOUNT : Gosub TESTALLSTAT
For AINDCLA=1 To 10
 If this.AUZ1(AINDCLA)<>null& find(this.AUZ1(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.AUZ1(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To 20
 If this.CCE1(AINDCLA)<>null& find(this.CCE1(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.CCE1(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_TIMDSP From WMC2GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_BPAADD From WMC2GACCOUNT : Gosub TESTALLSTAT
For AINDCLA=1 To 20
 If this.BPA(AINDCLA)<>null& find(this.BPA(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.BPA(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To 10
 If this.BID1(AINDCLA)<>null& find(this.BID1(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.BID1(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_CREUSR From WMC3GACCOUNT : Gosub TESTALLSTAT
Gosub LNKPRO_UPDUSR From WMC3GACCOUNT : Gosub TESTALLSTAT
For AINDCLA=1 To 10
 If this.CNV(AINDCLA)<>null& find(this.CNV(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.CNV(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Return

$TESTALLSTAT
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return



