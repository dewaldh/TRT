#<AdxTL>@(#)0.0.0.0 $Revision$Class Project budget
# Sage X3 supervisor
## ACLA-CLASSE ## PJMBUD
# 2018-06-20 06:51:49 938


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : PBUFCY Site ( Field FCY 5)
####################################################################

$SET_PBUFCY
If [L]_AOLDVAL<>this.PBUFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUFCY
 Gosub PROPAGATE_PBUFCY
Endif
Return

$INIT_PBUFCY
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUFCY
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUFCY
[L]CURPRO = "PBUFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PBUFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUFCY
[L]CURPRO = "PBUFCY"
If vireblc(this.PBUFCY,2)<>vireblc(format$("K:5c",this.PBUFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PBUFCY
[L]CURPRO = "PBUFCY"
If vireblc(this.PBUFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"PBUFCY",this.PBUFCY,this.PBUFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PBUFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUFCY
[L]CURPRO = "PBUFCY"
Return

$PROPAGATE_PBUFCY
this.isReadonly = 0
[L]CURPRO = "PBUFCY"
Gosub _LNKPRO_PBUFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUFCY
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUFCY"
$_LNKPRO_PBUFCY
If vireblc(this.PBUFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.PBUFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PBUFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PBUFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return

$_ALOADATTRIBUTE_PBUFCY
[L]ASTATUS = fmet this.ASETATTRIBUTE("PBUFCY","$isMandatory","true")
Return


####################################################################
# 2 : OPPNUM Project number ( Field PIM 40)
####################################################################

$SET_OPPNUM
If [L]_AOLDVAL<>this.OPPNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPPNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPPNUM
 Gosub PROPAGATE_OPPNUM
Endif
Return

$INIT_OPPNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "OPPNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPPNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "OPPNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPPNUM
[L]CURPRO = "OPPNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.OPPNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPPNUM
[L]CURPRO = "OPPNUM"
If vireblc(this.OPPNUM,2)<>vireblc(format$("K:40X",this.OPPNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_OPPNUM
[L]CURPRO = "OPPNUM"
[L]ASTATUS =  func PIMPL_CSTD_PROGS.PIM_FORMAT(this,"OPPNUM",this.OPPNUM)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPPNUM
[L]CURPRO = "OPPNUM"
Return

$PROPAGATE_OPPNUM
this.isReadonly = 0
[L]CURPRO = "OPPNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPPNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "OPPNUM"
$_LNKPRO_OPPNUM
Return

$_ALOADATTRIBUTE_OPPNUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("OPPNUM","$isMandatory","true")
Return


####################################################################
# 3 : PBUPAE Parent code ( Field PBU 15)
####################################################################

$SET_PBUPAE
If [L]_AOLDVAL<>this.PBUPAE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUPAE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUPAE
 Gosub PROPAGATE_PBUPAE
Endif
Return

$INIT_PBUPAE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUPAE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUPAE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUPAE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUPAE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUPAE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUPAE
[L]CURPRO = "PBUPAE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PBUPAE,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUPAE
[L]CURPRO = "PBUPAE"
If vireblc(this.PBUPAE,2)<>vireblc(format$("K:15X",this.PBUPAE),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PBUPAE
[L]CURPRO = "PBUPAE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUPAE
[L]CURPRO = "PBUPAE"
Return

$PROPAGATE_PBUPAE
this.isReadonly = 0
[L]CURPRO = "PBUPAE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUPAE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUPAE"
$_LNKPRO_PBUPAE
Return


####################################################################
# 4 : PBUCOD Budget code ( Field PBU 15)
####################################################################

$SET_PBUCOD
If [L]_AOLDVAL<>this.PBUCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUCOD
 Gosub PROPAGATE_PBUCOD
Endif
Return

$INIT_PBUCOD
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUCOD
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUCOD
[L]CURPRO = "PBUCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PBUCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUCOD
[L]CURPRO = "PBUCOD"
If vireblc(this.PBUCOD,2)<>vireblc(format$("K:15X",this.PBUCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PBUCOD
[L]CURPRO = "PBUCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUCOD
[L]CURPRO = "PBUCOD"
Return

$PROPAGATE_PBUCOD
this.isReadonly = 0
[L]CURPRO = "PBUCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUCOD
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOD"
$_LNKPRO_PBUCOD
Return

$_ALOADATTRIBUTE_PBUCOD
[L]ASTATUS = fmet this.ASETATTRIBUTE("PBUCOD","$isMandatory","true")
Return


####################################################################
# 5 : KEYCONCAT Concatenation ( Field A 40)
####################################################################

$SET_KEYCONCAT
If [L]_AOLDVAL<>this.KEYCONCAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_KEYCONCAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.KEYCONCAT
 Gosub PROPAGATE_KEYCONCAT
Endif
Return

$INIT_KEYCONCAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "KEYCONCAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_KEYCONCAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "KEYCONCAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_KEYCONCAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_KEYCONCAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_KEYCONCAT
[L]CURPRO = "KEYCONCAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.KEYCONCAT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_KEYCONCAT
[L]CURPRO = "KEYCONCAT"
Return

$_AOTHERS_KEYCONCAT
[L]CURPRO = "KEYCONCAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_KEYCONCAT
[L]CURPRO = "KEYCONCAT"
Return

$PROPAGATE_KEYCONCAT
this.isReadonly = 0
[L]CURPRO = "KEYCONCAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_KEYCONCAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "KEYCONCAT"
$_LNKPRO_KEYCONCAT
Return

$_ALOADATTRIBUTE_KEYCONCAT
[L]ASTATUS = fmet this.ASETATTRIBUTE("KEYCONCAT","$isMandatory","true")
Return


####################################################################
# 6 : PBUDATH Suspension date ( Field D)
####################################################################

$SET_PBUDATH
If [L]_AOLDVAL<>this.PBUDATH
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUDATH
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUDATH
 Gosub PROPAGATE_PBUDATH
Endif
Return

$INIT_PBUDATH
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATH"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUDATH
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATH"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUDATH               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUDATH               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUDATH
[L]CURPRO = "PBUDATH"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUDATH=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUDATH
[L]CURPRO = "PBUDATH"
Return

$_AOTHERS_PBUDATH
[L]CURPRO = "PBUDATH"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUDATH
[L]CURPRO = "PBUDATH"
Return

$PROPAGATE_PBUDATH
this.isReadonly = 0
[L]CURPRO = "PBUDATH"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUDATH
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATH"
$_LNKPRO_PBUDATH
Return


####################################################################
# 7 : PBUDATS Closing date ( Field D)
####################################################################

$SET_PBUDATS
If [L]_AOLDVAL<>this.PBUDATS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUDATS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUDATS
 Gosub PROPAGATE_PBUDATS
Endif
Return

$INIT_PBUDATS
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUDATS
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUDATS               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUDATS               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUDATS
[L]CURPRO = "PBUDATS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUDATS=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUDATS
[L]CURPRO = "PBUDATS"
Return

$_AOTHERS_PBUDATS
[L]CURPRO = "PBUDATS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUDATS
[L]CURPRO = "PBUDATS"
Return

$PROPAGATE_PBUDATS
this.isReadonly = 0
[L]CURPRO = "PBUDATS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUDATS
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATS"
$_LNKPRO_PBUDATS
Return


####################################################################
# 8 : PBUDATO WIP issue date ( Field D)
####################################################################

$SET_PBUDATO
If [L]_AOLDVAL<>this.PBUDATO
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUDATO
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUDATO
 Gosub PROPAGATE_PBUDATO
Endif
Return

$INIT_PBUDATO
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATO"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUDATO
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATO"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUDATO               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUDATO               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUDATO
[L]CURPRO = "PBUDATO"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUDATO=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUDATO
[L]CURPRO = "PBUDATO"
Return

$_AOTHERS_PBUDATO
[L]CURPRO = "PBUDATO"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUDATO
[L]CURPRO = "PBUDATO"
Return

$PROPAGATE_PBUDATO
this.isReadonly = 0
[L]CURPRO = "PBUDATO"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUDATO
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDATO"
$_LNKPRO_PBUDATO
Return


####################################################################
# 9 : PBUSTATE Status ( Field Local menu number 2251)
####################################################################

$SET_PBUSTATE
If [L]_AOLDVAL<>this.PBUSTATE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUSTATE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUSTATE
 Gosub PROPAGATE_PBUSTATE
Endif
Return

$INIT_PBUSTATE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUSTATE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PBUSTATE=0 and fmet this.AGETATTRIBUTE("PBUSTATE","$isMandatory")="true"
 this.PBUSTATE = 1
Endif
Return
 
$CONTROL_PBUSTATE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUSTATE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUSTATE              : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUSTATE              : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUSTATE
[L]CURPRO = "PBUSTATE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUSTATE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUSTATE
[L]CURPRO = "PBUSTATE"
If this.PBUSTATE<0 or this.PBUSTATE>len(mess(0,2251,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2251 ->"-num$(this.PBUSTATE)-mess(99,123,1)):  Return : # Local menu "2251 -> Invalid option
Endif
Return

$_AOTHERS_PBUSTATE
[L]CURPRO = "PBUSTATE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUSTATE
[L]CURPRO = "PBUSTATE"
Return

$PROPAGATE_PBUSTATE
this.isReadonly = 0
[L]CURPRO = "PBUSTATE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUSTATE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUSTATE"
$_LNKPRO_PBUSTATE
Return


####################################################################
# 10 : PBUELE Elementary ( Field Local menu number 1)
####################################################################

$SET_PBUELE
If [L]_AOLDVAL<>this.PBUELE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUELE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUELE
 Gosub PROPAGATE_PBUELE
Endif
Return

$INIT_PBUELE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUELE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PBUELE=0 and fmet this.AGETATTRIBUTE("PBUELE","$isMandatory")="true"
 this.PBUELE = 1
Endif
Return
 
$CONTROL_PBUELE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUELE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUELE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUELE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUELE
[L]CURPRO = "PBUELE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUELE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUELE
[L]CURPRO = "PBUELE"
If this.PBUELE<0 or this.PBUELE>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.PBUELE)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_PBUELE
[L]CURPRO = "PBUELE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUELE
[L]CURPRO = "PBUELE"
Return

$PROPAGATE_PBUELE
this.isReadonly = 0
[L]CURPRO = "PBUELE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUELE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUELE"
$_LNKPRO_PBUELE
Return


####################################################################
# 11 : PBUIMP Chargeable ( Field Local menu number 1)
####################################################################

$SET_PBUIMP
If [L]_AOLDVAL<>this.PBUIMP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUIMP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUIMP
 Gosub PROPAGATE_PBUIMP
Endif
Return

$INIT_PBUIMP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUIMP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PBUIMP=0 and fmet this.AGETATTRIBUTE("PBUIMP","$isMandatory")="true"
 this.PBUIMP = 1
Endif
Return
 
$CONTROL_PBUIMP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUIMP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUIMP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUIMP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUIMP
[L]CURPRO = "PBUIMP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUIMP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUIMP
[L]CURPRO = "PBUIMP"
If this.PBUIMP<0 or this.PBUIMP>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.PBUIMP)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_PBUIMP
[L]CURPRO = "PBUIMP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUIMP
[L]CURPRO = "PBUIMP"
Return

$PROPAGATE_PBUIMP
this.isReadonly = 0
[L]CURPRO = "PBUIMP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUIMP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUIMP"
$_LNKPRO_PBUIMP
Return


####################################################################
# 12 : PBUSTARTDT Start date ( Field D)
####################################################################

$SET_PBUSTARTDT
If [L]_AOLDVAL<>this.PBUSTARTDT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUSTARTDT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUSTARTDT
 Gosub PROPAGATE_PBUSTARTDT
Endif
Return

$INIT_PBUSTARTDT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUSTARTDT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUSTARTDT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUSTARTDT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUSTARTDT            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUSTARTDT            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUSTARTDT
[L]CURPRO = "PBUSTARTDT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUSTARTDT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUSTARTDT
[L]CURPRO = "PBUSTARTDT"
Return

$_AOTHERS_PBUSTARTDT
[L]CURPRO = "PBUSTARTDT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUSTARTDT
[L]CURPRO = "PBUSTARTDT"
Return

$PROPAGATE_PBUSTARTDT
this.isReadonly = 0
[L]CURPRO = "PBUSTARTDT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUSTARTDT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUSTARTDT"
$_LNKPRO_PBUSTARTDT
Return


####################################################################
# 13 : PBUENDDT End date ( Field D)
####################################################################

$SET_PBUENDDT
If [L]_AOLDVAL<>this.PBUENDDT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUENDDT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUENDDT
 Gosub PROPAGATE_PBUENDDT
Endif
Return

$INIT_PBUENDDT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUENDDT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUENDDT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUENDDT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUENDDT              : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUENDDT              : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUENDDT
[L]CURPRO = "PBUENDDT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PBUENDDT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUENDDT
[L]CURPRO = "PBUENDDT"
Return

$_AOTHERS_PBUENDDT
[L]CURPRO = "PBUENDDT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUENDDT
[L]CURPRO = "PBUENDDT"
Return

$PROPAGATE_PBUENDDT
this.isReadonly = 0
[L]CURPRO = "PBUENDDT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUENDDT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUENDDT"
$_LNKPRO_PBUENDDT
Return


####################################################################
# 14 : PBUNUM Sequence no. ( Field VCR 20)
####################################################################

$SET_PBUNUM
If [L]_AOLDVAL<>this.PBUNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PBUNUM
 Gosub PROPAGATE_PBUNUM
Endif
Return

$INIT_PBUNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUNUM
[L]CURPRO = "PBUNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PBUNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUNUM
[L]CURPRO = "PBUNUM"
If vireblc(this.PBUNUM,2)<>vireblc(format$("K:20X",this.PBUNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PBUNUM
[L]CURPRO = "PBUNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUNUM
[L]CURPRO = "PBUNUM"
Return

$PROPAGATE_PBUNUM
this.isReadonly = 0
[L]CURPRO = "PBUNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUNUM"
$_LNKPRO_PBUNUM
Return

$_ALOADATTRIBUTE_PBUNUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("PBUNUM","$isMandatory","true")
Return


####################################################################
# 18 : PBUDESTEX Description ( Field ACPLAIN 1)
####################################################################

$GET_PBUDESTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDESTEX"
Local Char _CNT(100)
Local Tinyint _EXI : [L]_EXI=1
[L]ASTATUS = fmet this.AREAD_CLB("PBUDESTEX",
& "PJMBUD"
& +[V]CST_AURLSEPLOB+"PBUDESTEX"
& +[V]CST_AURLSEPLOB+this.KEYCONCAT
& +[V]CST_AURLSEPLOB+AVOID.ACHAR
& +[V]CST_AURLSEPLOB+AVOID.ACHAR
& ,[L]_CNT,this.PBUDESTEX)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isLoaded")<>"true"
 [L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
Endif
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_PBUDESTEX
If fmet this.AGETATTRIBUTE("PBUDESTEX","$isLoaded")<>"true" or [L]_AOLDVAL<>this.PBUDESTEX
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUDESTEX
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE("PBUDESTEX","$isLoaded")<>"true" or [L]_AOLDVAL<>this.PBUDESTEX
 Gosub PROPAGATE_PBUDESTEX
Endif
Return

$INIT_PBUDESTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDESTEX"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUDESTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDESTEX"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUDESTEX             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUDESTEX             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUDESTEX
[L]CURPRO = "PBUDESTEX"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & len(this.PBUDESTEX)=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUDESTEX
[L]CURPRO = "PBUDESTEX"
Return

$_AOTHERS_PBUDESTEX
[L]CURPRO = "PBUDESTEX"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUDESTEX
[L]CURPRO = "PBUDESTEX"
Return

$PROPAGATE_PBUDESTEX
this.isReadonly = 0
[L]CURPRO = "PBUDESTEX"
[L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUDESTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUDESTEX"
$_LNKPRO_PBUDESTEX
Local Tinyint _EXI : [L]_EXI=1
Gosub READ_EXI_PBUDESTEX From WMC0PJMBUD
[L]ASTATUS = fmet this.ASETATTRIBUTE("PBUDESTEX","$isLobFound",func ASYRSUB.BOOLEAN_TO_SYR([L]_EXI+1))
Return


####################################################################
# 19 : PBUCOMTEX Comment ( Field ACPLAIN 1)
####################################################################

$GET_PBUCOMTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOMTEX"
Local Char _CNT(100)
Local Tinyint _EXI : [L]_EXI=1
[L]ASTATUS = fmet this.AREAD_CLB("PBUCOMTEX",
& "PJMBUD"
& +[V]CST_AURLSEPLOB+"PBUCOMTEX"
& +[V]CST_AURLSEPLOB+this.KEYCONCAT
& +[V]CST_AURLSEPLOB+AVOID.ACHAR
& +[V]CST_AURLSEPLOB+AVOID.ACHAR
& ,[L]_CNT,this.PBUCOMTEX)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isLoaded")<>"true"
 [L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
Endif
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_PBUCOMTEX
If fmet this.AGETATTRIBUTE("PBUCOMTEX","$isLoaded")<>"true" or [L]_AOLDVAL<>this.PBUCOMTEX
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PBUCOMTEX
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE("PBUCOMTEX","$isLoaded")<>"true" or [L]_AOLDVAL<>this.PBUCOMTEX
 Gosub PROPAGATE_PBUCOMTEX
Endif
Return

$INIT_PBUCOMTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOMTEX"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PBUCOMTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOMTEX"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PBUCOMTEX             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PBUCOMTEX             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PBUCOMTEX
[L]CURPRO = "PBUCOMTEX"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & len(this.PBUCOMTEX)=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PBUCOMTEX
[L]CURPRO = "PBUCOMTEX"
Return

$_AOTHERS_PBUCOMTEX
[L]CURPRO = "PBUCOMTEX"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PBUCOMTEX
[L]CURPRO = "PBUCOMTEX"
Return

$PROPAGATE_PBUCOMTEX
this.isReadonly = 0
[L]CURPRO = "PBUCOMTEX"
[L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PBUCOMTEX
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "PBUCOMTEX"
$_LNKPRO_PBUCOMTEX
Local Tinyint _EXI : [L]_EXI=1
Gosub READ_EXI_PBUCOMTEX From WMC0PJMBUD
[L]ASTATUS = fmet this.ASETATTRIBUTE("PBUCOMTEX","$isLobFound",func ASYRSUB.BOOLEAN_TO_SYR([L]_EXI+1))
Return


####################################################################
# 20 : CUR Currency ( Field CUR 3)
####################################################################

$SET_CUR
If [L]_AOLDVAL<>this.CUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CUR
 Gosub PROPAGATE_CUR
Endif
Return

$INIT_CUR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CUR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CUR
[L]CURPRO = "CUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CUR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>vireblc(format$("K:3c",this.CUR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCUR.ACTRLREF(this,"CUR",this.CUR,this.CUR,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CUR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CUR
[L]CURPRO = "CUR"
Return

$PROPAGATE_CUR
this.isReadonly = 0
[L]CURPRO = "CUR"
Gosub _LNKPRO_CUR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CUR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CUR"
$_LNKPRO_CUR
If vireblc(this.CUR,2)<>""
 # Link TABCUR
 Local File TABCUR [WTCU]
 Read [F:WTCU]TCU0 = this.CUR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTSHO" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTDES" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$symbol",[F:WTCU]CURSYM)
  If int(val([F:WTCU]CURFMT1))>0
   Local Char WPREC(10)
   Local Char WSCALE(10)
   WPREC=num$(int(val([F:WTCU]CURFMT1)))
   WSCALE=num$(int(10*(val([F:WTCU]CURFMT1)-int(val([F:WTCU]CURFMT1)))))
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$precision",WPREC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTCU]
Endif
Return


####################################################################
# 21 : TCHOPPIMPT Budgeting intermediate levels ( Field Local menu number 1)
####################################################################

$SET_TCHOPPIMPT
If [L]_AOLDVAL<>this.TCHOPPIMPT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TCHOPPIMPT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TCHOPPIMPT
 Gosub PROPAGATE_TCHOPPIMPT
Endif
Return

$INIT_TCHOPPIMPT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHOPPIMPT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.TCHOPPIMPT=0 and fmet this.AGETATTRIBUTE("TCHOPPIMPT","$isMandatory")="true"
 this.TCHOPPIMPT = 1
Endif
Return
 
$CONTROL_TCHOPPIMPT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHOPPIMPT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TCHOPPIMPT            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TCHOPPIMPT            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TCHOPPIMPT
[L]CURPRO = "TCHOPPIMPT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TCHOPPIMPT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TCHOPPIMPT
[L]CURPRO = "TCHOPPIMPT"
If this.TCHOPPIMPT<0 or this.TCHOPPIMPT>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.TCHOPPIMPT)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_TCHOPPIMPT
[L]CURPRO = "TCHOPPIMPT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TCHOPPIMPT
[L]CURPRO = "TCHOPPIMPT"
Return

$PROPAGATE_TCHOPPIMPT
this.isReadonly = 0
[L]CURPRO = "TCHOPPIMPT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TCHOPPIMPT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHOPPIMPT"
$_LNKPRO_TCHOPPIMPT
Return


####################################################################
# 22 : TCHCHGTYP Rate type ( Field Local menu number 202)
####################################################################

$SET_TCHCHGTYP
If [L]_AOLDVAL<>this.TCHCHGTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TCHCHGTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TCHCHGTYP
 Gosub PROPAGATE_TCHCHGTYP
Endif
Return

$INIT_TCHCHGTYP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHCHGTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.TCHCHGTYP=0 and fmet this.AGETATTRIBUTE("TCHCHGTYP","$isMandatory")="true"
 this.TCHCHGTYP = 1
Endif
Return
 
$CONTROL_TCHCHGTYP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHCHGTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TCHCHGTYP             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TCHCHGTYP             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TCHCHGTYP
[L]CURPRO = "TCHCHGTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TCHCHGTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TCHCHGTYP
[L]CURPRO = "TCHCHGTYP"
If this.TCHCHGTYP<0 or this.TCHCHGTYP>len(mess(0,202,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"202 ->"-num$(this.TCHCHGTYP)-mess(99,123,1)):  Return : # Local menu "202 -> Invalid option
Endif
Return

$_AOTHERS_TCHCHGTYP
[L]CURPRO = "TCHCHGTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TCHCHGTYP
[L]CURPRO = "TCHCHGTYP"
Return

$PROPAGATE_TCHCHGTYP
this.isReadonly = 0
[L]CURPRO = "TCHCHGTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TCHCHGTYP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHCHGTYP"
$_LNKPRO_TCHCHGTYP
Return


####################################################################
# 23 : TCHACTION Action ( Field A 20)
####################################################################

$SET_TCHACTION
If [L]_AOLDVAL<>this.TCHACTION
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TCHACTION
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TCHACTION
 Gosub PROPAGATE_TCHACTION
Endif
Return

$INIT_TCHACTION
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHACTION"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TCHACTION
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHACTION"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TCHACTION             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TCHACTION             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TCHACTION
[L]CURPRO = "TCHACTION"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TCHACTION,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TCHACTION
[L]CURPRO = "TCHACTION"
Return

$_AOTHERS_TCHACTION
[L]CURPRO = "TCHACTION"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TCHACTION
[L]CURPRO = "TCHACTION"
Return

$PROPAGATE_TCHACTION
this.isReadonly = 0
[L]CURPRO = "TCHACTION"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TCHACTION
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHACTION"
$_LNKPRO_TCHACTION
Return


####################################################################
# 24 : TCHOPPSTATE Status ( Field Local menu number 2249)
####################################################################

$SET_TCHOPPSTATE
If [L]_AOLDVAL<>this.TCHOPPSTATE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TCHOPPSTATE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TCHOPPSTATE
 Gosub PROPAGATE_TCHOPPSTATE
Endif
Return

$INIT_TCHOPPSTATE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHOPPSTATE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.TCHOPPSTATE=0 and fmet this.AGETATTRIBUTE("TCHOPPSTATE","$isMandatory")="true"
 this.TCHOPPSTATE = 1
Endif
Return
 
$CONTROL_TCHOPPSTATE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHOPPSTATE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TCHOPPSTATE           : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TCHOPPSTATE           : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TCHOPPSTATE
[L]CURPRO = "TCHOPPSTATE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TCHOPPSTATE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TCHOPPSTATE
[L]CURPRO = "TCHOPPSTATE"
If this.TCHOPPSTATE<0 or this.TCHOPPSTATE>len(mess(0,2249,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2249 ->"-num$(this.TCHOPPSTATE)-mess(99,123,1)):  Return : # Local menu "2249 -> Invalid option
Endif
Return

$_AOTHERS_TCHOPPSTATE
[L]CURPRO = "TCHOPPSTATE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TCHOPPSTATE
[L]CURPRO = "TCHOPPSTATE"
Return

$PROPAGATE_TCHOPPSTATE
this.isReadonly = 0
[L]CURPRO = "TCHOPPSTATE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TCHOPPSTATE
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "TCHOPPSTATE"
$_LNKPRO_TCHOPPSTATE
Return


####################################################################
# 25 : OPPCMP BP ( Field BPC 15)
####################################################################

$SET_OPPCMP
If [L]_AOLDVAL<>this.OPPCMP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPPCMP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPPCMP
 Gosub PROPAGATE_OPPCMP
Endif
Return

$INIT_OPPCMP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "OPPCMP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPPCMP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "OPPCMP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPPCMP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPPCMP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPPCMP
[L]CURPRO = "OPPCMP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.OPPCMP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPPCMP
[L]CURPRO = "OPPCMP"
If vireblc(this.OPPCMP,2)<>vireblc(format$("K:15c",this.OPPCMP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_OPPCMP
[L]CURPRO = "OPPCMP"
If vireblc(this.OPPCMP,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPC.ACTRLREF(this,"OPPCMP",this.OPPCMP,this.OPPCMP,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.OPPCMP<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPPCMP
[L]CURPRO = "OPPCMP"
Return

$PROPAGATE_OPPCMP
this.isReadonly = 0
[L]CURPRO = "OPPCMP"
Gosub _LNKPRO_OPPCMP
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPPCMP
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "OPPCMP"
$_LNKPRO_OPPCMP
If vireblc(this.OPPCMP,2)<>""
 # Link BPCUSTOMER
 Local File BPCUSTOMER [WBPC]
 Read [F:WBPC]BPC0 = this.OPPCMP
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("OPPCMP","$title",[F:WBPC]BPCSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("OPPCMP","$description",[F:WBPC]BPCNAM)
 Endif
 LogicClose File [WBPC]
Endif
Return


####################################################################
# 26 : EXPNUM Export number ( Field L 8)
####################################################################

$SET_EXPNUM
If [L]_AOLDVAL<>this.EXPNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXPNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXPNUM
 Gosub PROPAGATE_EXPNUM
Endif
Return

$INIT_EXPNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "EXPNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXPNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "EXPNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXPNUM
[L]CURPRO = "EXPNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXPNUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$_AOTHERS_EXPNUM
[L]CURPRO = "EXPNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$PROPAGATE_EXPNUM
this.isReadonly = 0
[L]CURPRO = "EXPNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXPNUM
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "EXPNUM"
$_LNKPRO_EXPNUM
Return


####################################################################
# 27 : CREDAT Date created ( Field D)
####################################################################

$SET_CREDAT
If [L]_AOLDVAL<>this.CREDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREDAT
 Gosub PROPAGATE_CREDAT
Endif
Return

$INIT_CREDAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CREDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CREDAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CREDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREDAT
[L]CURPRO = "CREDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CREDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREDAT
[L]CURPRO = "CREDAT"
Return

$_AOTHERS_CREDAT
[L]CURPRO = "CREDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREDAT
[L]CURPRO = "CREDAT"
Return

$PROPAGATE_CREDAT
this.isReadonly = 0
[L]CURPRO = "CREDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREDAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CREDAT"
$_LNKPRO_CREDAT
Return


####################################################################
# 28 : CREUSR Creation user ( Field A 5)
####################################################################

$SET_CREUSR
If [L]_AOLDVAL<>this.CREUSR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREUSR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREUSR
 Gosub PROPAGATE_CREUSR
Endif
Return

$INIT_CREUSR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CREUSR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CREUSR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CREUSR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREUSR
[L]CURPRO = "CREUSR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CREUSR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREUSR
[L]CURPRO = "CREUSR"
Return

$_AOTHERS_CREUSR
[L]CURPRO = "CREUSR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREUSR
[L]CURPRO = "CREUSR"
Return

$PROPAGATE_CREUSR
this.isReadonly = 0
[L]CURPRO = "CREUSR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREUSR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "CREUSR"
$_LNKPRO_CREUSR
Return


####################################################################
# 29 : UPDDAT Change date ( Field D)
####################################################################

$SET_UPDDAT
If [L]_AOLDVAL<>this.UPDDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UPDDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UPDDAT
 Gosub PROPAGATE_UPDDAT
Endif
Return

$INIT_UPDDAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "UPDDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UPDDAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "UPDDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UPDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UPDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UPDDAT
[L]CURPRO = "UPDDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UPDDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UPDDAT
[L]CURPRO = "UPDDAT"
Return

$_AOTHERS_UPDDAT
[L]CURPRO = "UPDDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UPDDAT
[L]CURPRO = "UPDDAT"
Return

$PROPAGATE_UPDDAT
this.isReadonly = 0
[L]CURPRO = "UPDDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UPDDAT
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "UPDDAT"
$_LNKPRO_UPDDAT
Return


####################################################################
# 30 : UPDUSR Change user ( Field A 10)
####################################################################

$SET_UPDUSR
If [L]_AOLDVAL<>this.UPDUSR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UPDUSR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UPDUSR
 Gosub PROPAGATE_UPDUSR
Endif
Return

$INIT_UPDUSR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "UPDUSR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UPDUSR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "UPDUSR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UPDUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UPDUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UPDUSR
[L]CURPRO = "UPDUSR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.UPDUSR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UPDUSR
[L]CURPRO = "UPDUSR"
Return

$_AOTHERS_UPDUSR
[L]CURPRO = "UPDUSR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UPDUSR
[L]CURPRO = "UPDUSR"
Return

$PROPAGATE_UPDUSR
this.isReadonly = 0
[L]CURPRO = "UPDUSR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UPDUSR
Gosub DECLARE_VAR From WMC0PJMBUD
[L]CURPRO = "UPDUSR"
$_LNKPRO_UPDUSR
Return




