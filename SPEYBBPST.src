#<AdxTL>@(#)0.0.0.0 $Revision$
######################################################################################################
# FILE NAME   : SPEYBBVAL
# DESCRIPTION : Business Batch Validation
######################################################################################################
# DATE        : 11-10-2018
# AUTHOR      : Dewald Henning
# COMPANY     : Leverage Technologies
#-----------------------------------------------------------------------------------------------------
# Epics Code  : DFCX1-27
#-----------------------------------------------------------------------------------------------------
######################################################################################################

$ACTION
  Case ACTION
    When "YBBPST"  :   Gosub POST
    When Default
  Endcase
Return

$POST
Local Char MESSAGE(255) : MESSAGE = "Post business batch "-[M:YBB0]YBATNBR-" to journals?"
  Call OUINON(MESSAGE,OK)  From GESECRAN
  Case OK
     When 2: Goto PST_BUSBAT  #yes
  Endcase

Return


$PST_BUSBAT
  #Set Batch Number
  Local Char YBATNBR(50) : [L]YBATNBR = [M:YBB0]YBATNBR
  Local Char ZNAME(255) :  [L]ZNAME =  [L]YBATNBR+"_"+format$("D:YYMMDDhhmmss",date$)

  Call OUVRE_TRACE("Journal Integration") From LECFIC
  Call ECR_TRACE("Start Date: " + num$(datetime$),0) From GESECRAN

  #Open File To Write GL Data
  Openo filpath('tmp',[L]ZNAME ,'DAT'),-1 Using [ZGL]

  Iomode adxium 50 Using [ZGL]
  Iomode adxirs chr$(13)+ chr$(10) Using [ZGL] # Line Seperator
  Iomode adxifs ',' Using [ZGL] #Field Seperator

#HEADER Details
#-------------------------- Required
# 1.  Identifier = 'G'
# 2.
Return

