#<AdxTL>@(#)0.0.0.0 $Revision$Class Order sub-contract services
# Supervisor
## ACLA-CLASSE ## SCOSRV
# 2018-08-27 12:44:12 672


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : SCONUM Subcontract order ( Field VCR 20)
####################################################################

$SET_SCONUM
If [L]_AOLDVAL<>this.SCONUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCONUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCONUM
 Gosub PROPAGATE_SCONUM
Endif
Return

$INIT_SCONUM
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCONUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCONUM
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCONUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCONUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCONUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCONUM
[L]CURPRO = "SCONUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SCONUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCONUM
[L]CURPRO = "SCONUM"
If vireblc(this.SCONUM,2)<>vireblc(format$("K:20X",this.SCONUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SCONUM
[L]CURPRO = "SCONUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCONUM
[L]CURPRO = "SCONUM"
Return

$PROPAGATE_SCONUM
this.isReadonly = 0
[L]CURPRO = "SCONUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCONUM
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCONUM"
$_LNKPRO_SCONUM
Return

$_ALOADATTRIBUTE_SCONUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("SCONUM","$isMandatory","true")
Return


####################################################################
# 2 : SCILIN Product no. ( Field L 8)
####################################################################

$SET_SCILIN
If [L]_AOLDVAL<>this.SCILIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCILIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCILIN
 Gosub PROPAGATE_SCILIN
Endif
Return

$INIT_SCILIN
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCILIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCILIN
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCILIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCILIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCILIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCILIN
[L]CURPRO = "SCILIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SCILIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCILIN
[L]CURPRO = "SCILIN"
Return

$_AOTHERS_SCILIN
[L]CURPRO = "SCILIN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCILIN
[L]CURPRO = "SCILIN"
Return

$PROPAGATE_SCILIN
this.isReadonly = 0
[L]CURPRO = "SCILIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCILIN
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCILIN"
$_LNKPRO_SCILIN
Return

$_ALOADATTRIBUTE_SCILIN
[L]ASTATUS = fmet this.ASETATTRIBUTE("SCILIN","$isMandatory","true")
Return


####################################################################
# 3 : SCSLIN Line ( Field L 8)
####################################################################

$SET_SCSLIN
If [L]_AOLDVAL<>this.SCSLIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCSLIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCSLIN
 Gosub PROPAGATE_SCSLIN
Endif
Return

$INIT_SCSLIN
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCSLIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCSLIN
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCSLIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCSLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCSLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCSLIN
[L]CURPRO = "SCSLIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SCSLIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCSLIN
[L]CURPRO = "SCSLIN"
Return

$_AOTHERS_SCSLIN
[L]CURPRO = "SCSLIN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCSLIN
[L]CURPRO = "SCSLIN"
Return

$PROPAGATE_SCSLIN
this.isReadonly = 0
[L]CURPRO = "SCSLIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCSLIN
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCSLIN"
$_LNKPRO_SCSLIN
Return

$_ALOADATTRIBUTE_SCSLIN
[L]ASTATUS = fmet this.ASETATTRIBUTE("SCSLIN","$isMandatory","true")
Return


####################################################################
# 4 : ITMREF Parent ( Field ITM 20)
####################################################################

$SET_ITMREF
If [L]_AOLDVAL<>this.ITMREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMREF
 Gosub PROPAGATE_ITMREF
Endif
Return

$INIT_ITMREF
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "ITMREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMREF
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "ITMREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMREF
[L]CURPRO = "ITMREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>vireblc(format$("K:20c",this.ITMREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITM.ACTRLREF(this,"ITMREF",this.ITMREF,this.ITMREF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ITMREF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMREF
[L]CURPRO = "ITMREF"
Return

$PROPAGATE_ITMREF
this.isReadonly = 0
[L]CURPRO = "ITMREF"
Gosub _LNKPRO_ITMREF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMREF
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "ITMREF"
$_LNKPRO_ITMREF
If vireblc(this.ITMREF,2)<>""
 # Link ITMMASTER
 Local File ITMMASTER [WITM]
 Read [F:WITM]ITM0 = this.ITMREF
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMMASTER" & ZONE="DES1AXX" & IDENT1=[F:WITM]ITMREF & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITM]
Endif
Return

$_ALOADATTRIBUTE_ITMREF
[L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$isMandatory","true")
Return


####################################################################
# 5 : BOMALT BOM code ( Field C 2)
####################################################################

$SET_BOMALT
If [L]_AOLDVAL<>this.BOMALT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BOMALT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BOMALT
 Gosub PROPAGATE_BOMALT
Endif
Return

$INIT_BOMALT
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BOMALT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BOMALT
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BOMALT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BOMALT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BOMALT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BOMALT
[L]CURPRO = "BOMALT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BOMALT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BOMALT
[L]CURPRO = "BOMALT"
Return

$_AOTHERS_BOMALT
[L]CURPRO = "BOMALT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BOMALT
[L]CURPRO = "BOMALT"
Return

$PROPAGATE_BOMALT
this.isReadonly = 0
[L]CURPRO = "BOMALT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BOMALT
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BOMALT"
$_LNKPRO_BOMALT
Return


####################################################################
# 6 : BOMSEQ BOM sequence ( Field C 4)
####################################################################

$SET_BOMSEQ
If [L]_AOLDVAL<>this.BOMSEQ
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BOMSEQ
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BOMSEQ
 Gosub PROPAGATE_BOMSEQ
Endif
Return

$INIT_BOMSEQ
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BOMSEQ"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BOMSEQ
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BOMSEQ"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BOMSEQ                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BOMSEQ                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BOMSEQ
[L]CURPRO = "BOMSEQ"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BOMSEQ=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BOMSEQ
[L]CURPRO = "BOMSEQ"
Return

$_AOTHERS_BOMSEQ
[L]CURPRO = "BOMSEQ"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BOMSEQ
[L]CURPRO = "BOMSEQ"
Return

$PROPAGATE_BOMSEQ
this.isReadonly = 0
[L]CURPRO = "BOMSEQ"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BOMSEQ
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BOMSEQ"
$_LNKPRO_BOMSEQ
Return


####################################################################
# 7 : SRVITMREF Subcontracted prod. ( Field ITM 20)
####################################################################

$SET_SRVITMREF
If [L]_AOLDVAL<>this.SRVITMREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SRVITMREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SRVITMREF
 Gosub PROPAGATE_SRVITMREF
Endif
Return

$INIT_SRVITMREF
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SRVITMREF
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SRVITMREF             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SRVITMREF             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SRVITMREF
[L]CURPRO = "SRVITMREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SRVITMREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SRVITMREF
[L]CURPRO = "SRVITMREF"
If vireblc(this.SRVITMREF,2)<>vireblc(format$("K:20c",this.SRVITMREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SRVITMREF
[L]CURPRO = "SRVITMREF"
If vireblc(this.SRVITMREF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITM.ACTRLREF(this,"SRVITMREF",this.SRVITMREF,this.SRVITMREF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.SRVITMREF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SRVITMREF
[L]CURPRO = "SRVITMREF"
Return

$PROPAGATE_SRVITMREF
this.isReadonly = 0
[L]CURPRO = "SRVITMREF"
Gosub _LNKPRO_SRVITMREF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SRVITMREF
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMREF"
$_LNKPRO_SRVITMREF
If vireblc(this.SRVITMREF,2)<>""
 # Link ITMMASTER
 Local File ITMMASTER [WITM]
 Read [F:WITM]ITM0 = this.SRVITMREF
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMMASTER" & ZONE="DES1AXX" & IDENT1=[F:WITM]ITMREF & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SRVITMREF","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITM]
Endif
Return

$_ALOADATTRIBUTE_SRVITMREF
[L]ASTATUS = fmet this.ASETATTRIBUTE("SRVITMREF","$isMandatory","true")
Return


####################################################################
# 8 : SRVITMDES Description ( Field DES 30)
####################################################################

$GET_SRVITMDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMDES"
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_SRVITMDES
If [L]_AOLDVAL<>this.SRVITMDES
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SRVITMDES
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SRVITMDES
 Gosub PROPAGATE_SRVITMDES
Endif
Return

$INIT_SRVITMDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMDES"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SRVITMDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMDES"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SRVITMDES             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SRVITMDES             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SRVITMDES
[L]CURPRO = "SRVITMDES"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SRVITMDES,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SRVITMDES
[L]CURPRO = "SRVITMDES"
If vireblc(this.SRVITMDES,2)<>vireblc(format$("K:30X",this.SRVITMDES),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SRVITMDES
[L]CURPRO = "SRVITMDES"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SRVITMDES
[L]CURPRO = "SRVITMDES"
Return

$PROPAGATE_SRVITMDES
this.isReadonly = 0
[L]CURPRO = "SRVITMDES"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SRVITMDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SRVITMDES"
$_LNKPRO_SRVITMDES
Return


####################################################################
# 9 : CPY Company ( Field CPY 5)
####################################################################

$SET_CPY
If [L]_AOLDVAL<>this.CPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPY
 Gosub PROPAGATE_CPY
Endif
Return

$INIT_CPY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "CPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "CPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPY
[L]CURPRO = "CPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CPY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>vireblc(format$("K:5c",this.CPY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCPY.ACTRLREF(this,"CPY",this.CPY,this.CPY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CPY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPY
[L]CURPRO = "CPY"
Return

$PROPAGATE_CPY
this.isReadonly = 0
[L]CURPRO = "CPY"
Gosub _LNKPRO_CPY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "CPY"
$_LNKPRO_CPY
If vireblc(this.CPY,2)<>""
 # Link COMPANY
 Local File COMPANY [WCPY]
 Read [F:WCPY]CPY0 = this.CPY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$title",[F:WCPY]CPYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$description",[F:WCPY]CPYNAM)
 Endif
 LogicClose File [WCPY]
Endif
Return

$_ALOADATTRIBUTE_CPY
[L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$isMandatory","true")
Return


####################################################################
# 10 : BPRNUM Supplier ( Field BPR 15)
####################################################################

$SET_BPRNUM
If [L]_AOLDVAL<>this.BPRNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPRNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPRNUM
 Gosub PROPAGATE_BPRNUM
Endif
Return

$INIT_BPRNUM
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BPRNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPRNUM
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BPRNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPRNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPRNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPRNUM
[L]CURPRO = "BPRNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPRNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPRNUM
[L]CURPRO = "BPRNUM"
If vireblc(this.BPRNUM,2)<>vireblc(format$("K:15c",this.BPRNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPRNUM
[L]CURPRO = "BPRNUM"
If vireblc(this.BPRNUM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPRNUM",this.BPRNUM,this.BPRNUM,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPRNUM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPRNUM
[L]CURPRO = "BPRNUM"
Return

$PROPAGATE_BPRNUM
this.isReadonly = 0
[L]CURPRO = "BPRNUM"
Gosub _LNKPRO_BPRNUM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPRNUM
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "BPRNUM"
$_LNKPRO_BPRNUM
If vireblc(this.BPRNUM,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPRNUM
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPRNUM","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPRNUM","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return


####################################################################
# 11 : POHTYP Order type ( Field Local menu number 506)
####################################################################

$SET_POHTYP
If [L]_AOLDVAL<>this.POHTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_POHTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.POHTYP
 Gosub PROPAGATE_POHTYP
Endif
Return

$INIT_POHTYP
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "POHTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.POHTYP=0 and fmet this.AGETATTRIBUTE("POHTYP","$isMandatory")="true"
 this.POHTYP = 1
Endif
Return
 
$CONTROL_POHTYP
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "POHTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_POHTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_POHTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_POHTYP
[L]CURPRO = "POHTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.POHTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_POHTYP
[L]CURPRO = "POHTYP"
If this.POHTYP<0 or this.POHTYP>len(mess(0,506,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"506 ->"-num$(this.POHTYP)-mess(99,123,1)):  Return : # Local menu "506 -> Invalid option
Endif
Return

$_AOTHERS_POHTYP
[L]CURPRO = "POHTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_POHTYP
[L]CURPRO = "POHTYP"
Return

$PROPAGATE_POHTYP
this.isReadonly = 0
[L]CURPRO = "POHTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_POHTYP
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "POHTYP"
$_LNKPRO_POHTYP
Return


####################################################################
# 12 : PRHFCY Receiving site ( Field FCY 5)
####################################################################

$SET_PRHFCY
If [L]_AOLDVAL<>this.PRHFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PRHFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PRHFCY
 Gosub PROPAGATE_PRHFCY
Endif
Return

$INIT_PRHFCY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "PRHFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PRHFCY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "PRHFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PRHFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PRHFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PRHFCY
[L]CURPRO = "PRHFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PRHFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PRHFCY
[L]CURPRO = "PRHFCY"
If vireblc(this.PRHFCY,2)<>vireblc(format$("K:5c",this.PRHFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PRHFCY
[L]CURPRO = "PRHFCY"
If vireblc(this.PRHFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"PRHFCY",this.PRHFCY,this.PRHFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PRHFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PRHFCY
[L]CURPRO = "PRHFCY"
Return

$PROPAGATE_PRHFCY
this.isReadonly = 0
[L]CURPRO = "PRHFCY"
Gosub _LNKPRO_PRHFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PRHFCY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "PRHFCY"
$_LNKPRO_PRHFCY
If vireblc(this.PRHFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.PRHFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PRHFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PRHFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return

$_ALOADATTRIBUTE_PRHFCY
[L]ASTATUS = fmet this.ASETATTRIBUTE("PRHFCY","$isMandatory","true")
Return


####################################################################
# 13 : RPLIND Alternate index ( Field C 3)
####################################################################

$SET_RPLIND
If [L]_AOLDVAL<>this.RPLIND
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RPLIND
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RPLIND
 Gosub PROPAGATE_RPLIND
Endif
Return

$INIT_RPLIND
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "RPLIND"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RPLIND
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "RPLIND"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RPLIND                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RPLIND                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RPLIND
[L]CURPRO = "RPLIND"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RPLIND=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RPLIND
[L]CURPRO = "RPLIND"
Return

$_AOTHERS_RPLIND
[L]CURPRO = "RPLIND"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RPLIND
[L]CURPRO = "RPLIND"
Return

$PROPAGATE_RPLIND
this.isReadonly = 0
[L]CURPRO = "RPLIND"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RPLIND
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "RPLIND"
$_LNKPRO_RPLIND
Return


####################################################################
# 14 : OPESTA Service status ( Field Local menu number 2239)
####################################################################

$SET_OPESTA
If [L]_AOLDVAL<>this.OPESTA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPESTA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPESTA
 Gosub PROPAGATE_OPESTA
Endif
Return

$INIT_OPESTA
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.OPESTA=0 and fmet this.AGETATTRIBUTE("OPESTA","$isMandatory")="true"
 this.OPESTA = 1
Endif
Return
 
$CONTROL_OPESTA
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPESTA                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPESTA                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPESTA
[L]CURPRO = "OPESTA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.OPESTA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPESTA
[L]CURPRO = "OPESTA"
If this.OPESTA<0 or this.OPESTA>len(mess(0,2239,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2239 ->"-num$(this.OPESTA)-mess(99,123,1)):  Return : # Local menu "2239 -> Invalid option
Endif
Return

$_AOTHERS_OPESTA
[L]CURPRO = "OPESTA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPESTA
[L]CURPRO = "OPESTA"
Return

$PROPAGATE_OPESTA
this.isReadonly = 0
[L]CURPRO = "OPESTA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPESTA
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTA"
$_LNKPRO_OPESTA
Return


####################################################################
# 15 : SCSTRKFLG Service situation ( Field Local menu number 2238)
####################################################################

$SET_SCSTRKFLG
If [L]_AOLDVAL<>this.SCSTRKFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCSTRKFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCSTRKFLG
 Gosub PROPAGATE_SCSTRKFLG
Endif
Return

$INIT_SCSTRKFLG
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCSTRKFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.SCSTRKFLG=0 and fmet this.AGETATTRIBUTE("SCSTRKFLG","$isMandatory")="true"
 this.SCSTRKFLG = 1
Endif
Return
 
$CONTROL_SCSTRKFLG
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCSTRKFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCSTRKFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCSTRKFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCSTRKFLG
[L]CURPRO = "SCSTRKFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SCSTRKFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCSTRKFLG
[L]CURPRO = "SCSTRKFLG"
If this.SCSTRKFLG<0 or this.SCSTRKFLG>len(mess(0,2238,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2238 ->"-num$(this.SCSTRKFLG)-mess(99,123,1)):  Return : # Local menu "2238 -> Invalid option
Endif
Return

$_AOTHERS_SCSTRKFLG
[L]CURPRO = "SCSTRKFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCSTRKFLG
[L]CURPRO = "SCSTRKFLG"
Return

$PROPAGATE_SCSTRKFLG
this.isReadonly = 0
[L]CURPRO = "SCSTRKFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCSTRKFLG
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCSTRKFLG"
$_LNKPRO_SCSTRKFLG
Return


####################################################################
# 16 : OPESTR Start date ( Field D)
####################################################################

$SET_OPESTR
If [L]_AOLDVAL<>this.OPESTR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPESTR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPESTR
 Gosub PROPAGATE_OPESTR
Endif
Return

$INIT_OPESTR
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPESTR
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPESTR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPESTR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPESTR
[L]CURPRO = "OPESTR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.OPESTR=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPESTR
[L]CURPRO = "OPESTR"
Return

$_AOTHERS_OPESTR
[L]CURPRO = "OPESTR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPESTR
[L]CURPRO = "OPESTR"
Return

$PROPAGATE_OPESTR
this.isReadonly = 0
[L]CURPRO = "OPESTR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPESTR
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTR"
$_LNKPRO_OPESTR
Return


####################################################################
# 17 : OPEEND End date ( Field D)
####################################################################

$SET_OPEEND
If [L]_AOLDVAL<>this.OPEEND
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPEEND
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPEEND
 Gosub PROPAGATE_OPEEND
Endif
Return

$INIT_OPEEND
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPEEND"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPEEND
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPEEND"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPEEND                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPEEND                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPEEND
[L]CURPRO = "OPEEND"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.OPEEND=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPEEND
[L]CURPRO = "OPEEND"
Return

$_AOTHERS_OPEEND
[L]CURPRO = "OPEEND"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPEEND
[L]CURPRO = "OPEEND"
Return

$PROPAGATE_OPEEND
this.isReadonly = 0
[L]CURPRO = "OPEEND"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPEEND
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPEEND"
$_LNKPRO_OPEEND
Return


####################################################################
# 18 : SCOLTI Subcontract LT ( Field C 4)
####################################################################

$SET_SCOLTI
If [L]_AOLDVAL<>this.SCOLTI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCOLTI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCOLTI
 Gosub PROPAGATE_SCOLTI
Endif
Return

$INIT_SCOLTI
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOLTI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCOLTI
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOLTI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCOLTI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCOLTI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCOLTI
[L]CURPRO = "SCOLTI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SCOLTI=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCOLTI
[L]CURPRO = "SCOLTI"
Return

$_AOTHERS_SCOLTI
[L]CURPRO = "SCOLTI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCOLTI
[L]CURPRO = "SCOLTI"
Return

$PROPAGATE_SCOLTI
this.isReadonly = 0
[L]CURPRO = "SCOLTI"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCOLTI
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOLTI"
$_LNKPRO_SCOLTI
Return


####################################################################
# 19 : SCOPUU Sub-contracting PO unit ( Field UOM 3)
####################################################################

$SET_SCOPUU
If [L]_AOLDVAL<>this.SCOPUU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCOPUU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCOPUU
 Gosub PROPAGATE_SCOPUU
Endif
Return

$INIT_SCOPUU
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCOPUU
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCOPUU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCOPUU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCOPUU
[L]CURPRO = "SCOPUU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SCOPUU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCOPUU
[L]CURPRO = "SCOPUU"
If vireblc(this.SCOPUU,2)<>vireblc(format$("K:3X",this.SCOPUU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SCOPUU
[L]CURPRO = "SCOPUU"
If vireblc(this.SCOPUU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"SCOPUU",this.SCOPUU,this.SCOPUU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.SCOPUU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCOPUU
[L]CURPRO = "SCOPUU"
Return

$PROPAGATE_SCOPUU
this.isReadonly = 0
[L]CURPRO = "SCOPUU"
Gosub _LNKPRO_SCOPUU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCOPUU
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUU"
$_LNKPRO_SCOPUU
If vireblc(this.SCOPUU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.SCOPUU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SCOPUU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SCOPUU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SCOPUU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("SCOPUU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return


####################################################################
# 20 : SCOPUUDES Description ( Field DES 30)
####################################################################

$GET_SCOPUUDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUUDES"
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_SCOPUUDES
If [L]_AOLDVAL<>this.SCOPUUDES
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCOPUUDES
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCOPUUDES
 Gosub PROPAGATE_SCOPUUDES
Endif
Return

$INIT_SCOPUUDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUUDES"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCOPUUDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUUDES"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCOPUUDES             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCOPUUDES             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCOPUUDES
[L]CURPRO = "SCOPUUDES"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SCOPUUDES,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCOPUUDES
[L]CURPRO = "SCOPUUDES"
If vireblc(this.SCOPUUDES,2)<>vireblc(format$("K:30X",this.SCOPUUDES),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SCOPUUDES
[L]CURPRO = "SCOPUUDES"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCOPUUDES
[L]CURPRO = "SCOPUUDES"
Return

$PROPAGATE_SCOPUUDES
this.isReadonly = 0
[L]CURPRO = "SCOPUUDES"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCOPUUDES
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "SCOPUUDES"
$_LNKPRO_SCOPUUDES
Return


####################################################################
# 21 : OPESTRCOE Coefficient STK-OPE ( Field COE 0)
####################################################################

$SET_OPESTRCOE
If [L]_AOLDVAL<>this.OPESTRCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPESTRCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPESTRCOE
 Gosub PROPAGATE_OPESTRCOE
Endif
Return

$INIT_OPESTRCOE
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTRCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPESTRCOE
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTRCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPESTRCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPESTRCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPESTRCOE
[L]CURPRO = "OPESTRCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.OPESTRCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPESTRCOE
[L]CURPRO = "OPESTRCOE"
Return

$_AOTHERS_OPESTRCOE
[L]CURPRO = "OPESTRCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPESTRCOE
[L]CURPRO = "OPESTRCOE"
Return

$PROPAGATE_OPESTRCOE
this.isReadonly = 0
[L]CURPRO = "OPESTRCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPESTRCOE
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTRCOE"
$_LNKPRO_OPESTRCOE
Return


####################################################################
# 22 : STRQTYCOD Link quantity code ( Field Local menu number 226)
####################################################################

$SET_STRQTYCOD
If [L]_AOLDVAL<>this.STRQTYCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STRQTYCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STRQTYCOD
 Gosub PROPAGATE_STRQTYCOD
Endif
Return

$INIT_STRQTYCOD
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "STRQTYCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.STRQTYCOD=0 and fmet this.AGETATTRIBUTE("STRQTYCOD","$isMandatory")="true"
 this.STRQTYCOD = 1
Endif
Return
 
$CONTROL_STRQTYCOD
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "STRQTYCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STRQTYCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STRQTYCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STRQTYCOD
[L]CURPRO = "STRQTYCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STRQTYCOD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STRQTYCOD
[L]CURPRO = "STRQTYCOD"
If this.STRQTYCOD<0 or this.STRQTYCOD>len(mess(0,226,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"226 ->"-num$(this.STRQTYCOD)-mess(99,123,1)):  Return : # Local menu "226 -> Invalid option
Endif
Return

$_AOTHERS_STRQTYCOD
[L]CURPRO = "STRQTYCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STRQTYCOD
[L]CURPRO = "STRQTYCOD"
Return

$PROPAGATE_STRQTYCOD
this.isReadonly = 0
[L]CURPRO = "STRQTYCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STRQTYCOD
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "STRQTYCOD"
$_LNKPRO_STRQTYCOD
Return


####################################################################
# 23 : EXTSTRQTY Sub-contract quantity ( Field QTY 0)
####################################################################

$SET_EXTSTRQTY
If [L]_AOLDVAL<>this.EXTSTRQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXTSTRQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXTSTRQTY
 Gosub PROPAGATE_EXTSTRQTY
Endif
Return

$INIT_EXTSTRQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTSTRQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXTSTRQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTSTRQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXTSTRQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXTSTRQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXTSTRQTY
[L]CURPRO = "EXTSTRQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXTSTRQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXTSTRQTY
[L]CURPRO = "EXTSTRQTY"
Return

$_AOTHERS_EXTSTRQTY
[L]CURPRO = "EXTSTRQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXTSTRQTY
[L]CURPRO = "EXTSTRQTY"
Return

$PROPAGATE_EXTSTRQTY
this.isReadonly = 0
[L]CURPRO = "EXTSTRQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXTSTRQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTSTRQTY"
$_LNKPRO_EXTSTRQTY
Return


####################################################################
# 24 : OPESTU Stock unit ( Field UOM 3)
####################################################################

$SET_OPESTU
If [L]_AOLDVAL<>this.OPESTU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPESTU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPESTU
 Gosub PROPAGATE_OPESTU
Endif
Return

$INIT_OPESTU
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPESTU
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPESTU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPESTU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPESTU
[L]CURPRO = "OPESTU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.OPESTU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPESTU
[L]CURPRO = "OPESTU"
If vireblc(this.OPESTU,2)<>vireblc(format$("K:3X",this.OPESTU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_OPESTU
[L]CURPRO = "OPESTU"
If vireblc(this.OPESTU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"OPESTU",this.OPESTU,this.OPESTU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.OPESTU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPESTU
[L]CURPRO = "OPESTU"
Return

$PROPAGATE_OPESTU
this.isReadonly = 0
[L]CURPRO = "OPESTU"
Gosub _LNKPRO_OPESTU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPESTU
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTU"
$_LNKPRO_OPESTU
If vireblc(this.OPESTU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.OPESTU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("OPESTU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("OPESTU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("OPESTU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("OPESTU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return


####################################################################
# 25 : OPESTUCOE STK-OPE conversion ( Field COE 0)
####################################################################

$SET_OPESTUCOE
If [L]_AOLDVAL<>this.OPESTUCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_OPESTUCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.OPESTUCOE
 Gosub PROPAGATE_OPESTUCOE
Endif
Return

$INIT_OPESTUCOE
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTUCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_OPESTUCOE
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTUCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_OPESTUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_OPESTUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_OPESTUCOE
[L]CURPRO = "OPESTUCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.OPESTUCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_OPESTUCOE
[L]CURPRO = "OPESTUCOE"
Return

$_AOTHERS_OPESTUCOE
[L]CURPRO = "OPESTUCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_OPESTUCOE
[L]CURPRO = "OPESTUCOE"
Return

$PROPAGATE_OPESTUCOE
this.isReadonly = 0
[L]CURPRO = "OPESTUCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_OPESTUCOE
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "OPESTUCOE"
$_LNKPRO_OPESTUCOE
Return


####################################################################
# 26 : EXTSTUQTY Expected STK quantity ( Field QTY 0)
####################################################################

$SET_EXTSTUQTY
If [L]_AOLDVAL<>this.EXTSTUQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXTSTUQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXTSTUQTY
 Gosub PROPAGATE_EXTSTUQTY
Endif
Return

$INIT_EXTSTUQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTSTUQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXTSTUQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTSTUQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXTSTUQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXTSTUQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXTSTUQTY
[L]CURPRO = "EXTSTUQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXTSTUQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXTSTUQTY
[L]CURPRO = "EXTSTUQTY"
Return

$_AOTHERS_EXTSTUQTY
[L]CURPRO = "EXTSTUQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXTSTUQTY
[L]CURPRO = "EXTSTUQTY"
Return

$PROPAGATE_EXTSTUQTY
this.isReadonly = 0
[L]CURPRO = "EXTSTUQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXTSTUQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTSTUQTY"
$_LNKPRO_EXTSTUQTY
Return


####################################################################
# 27 : STDQTY Standard quantity ( Field QTY 0)
####################################################################

$SET_STDQTY
If [L]_AOLDVAL<>this.STDQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STDQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STDQTY
 Gosub PROPAGATE_STDQTY
Endif
Return

$INIT_STDQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "STDQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STDQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "STDQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STDQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STDQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STDQTY
[L]CURPRO = "STDQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STDQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STDQTY
[L]CURPRO = "STDQTY"
Return

$_AOTHERS_STDQTY
[L]CURPRO = "STDQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STDQTY
[L]CURPRO = "STDQTY"
Return

$PROPAGATE_STDQTY
this.isReadonly = 0
[L]CURPRO = "STDQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STDQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "STDQTY"
$_LNKPRO_STDQTY
Return


####################################################################
# 28 : EXTQTY Planned quantity ( Field QTY 0)
####################################################################

$SET_EXTQTY
If [L]_AOLDVAL<>this.EXTQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXTQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXTQTY
 Gosub PROPAGATE_EXTQTY
Endif
Return

$INIT_EXTQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXTQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXTQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXTQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXTQTY
[L]CURPRO = "EXTQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXTQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXTQTY
[L]CURPRO = "EXTQTY"
Return

$_AOTHERS_EXTQTY
[L]CURPRO = "EXTQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXTQTY
[L]CURPRO = "EXTQTY"
Return

$PROPAGATE_EXTQTY
this.isReadonly = 0
[L]CURPRO = "EXTQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXTQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "EXTQTY"
$_LNKPRO_EXTQTY
Return


####################################################################
# 29 : CPLQTY Total achieved qty. ( Field QTY 0)
####################################################################

$SET_CPLQTY
If [L]_AOLDVAL<>this.CPLQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPLQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPLQTY
 Gosub PROPAGATE_CPLQTY
Endif
Return

$INIT_CPLQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "CPLQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPLQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "CPLQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPLQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPLQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPLQTY
[L]CURPRO = "CPLQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CPLQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPLQTY
[L]CURPRO = "CPLQTY"
Return

$_AOTHERS_CPLQTY
[L]CURPRO = "CPLQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPLQTY
[L]CURPRO = "CPLQTY"
Return

$PROPAGATE_CPLQTY
this.isReadonly = 0
[L]CURPRO = "CPLQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPLQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "CPLQTY"
$_LNKPRO_CPLQTY
Return


####################################################################
# 30 : ORDQTY Ordered qty. ( Field QTY 0)
####################################################################

$SET_ORDQTY
If [L]_AOLDVAL<>this.ORDQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ORDQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ORDQTY
 Gosub PROPAGATE_ORDQTY
Endif
Return

$INIT_ORDQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "ORDQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ORDQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "ORDQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ORDQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ORDQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ORDQTY
[L]CURPRO = "ORDQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ORDQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ORDQTY
[L]CURPRO = "ORDQTY"
Return

$_AOTHERS_ORDQTY
[L]CURPRO = "ORDQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ORDQTY
[L]CURPRO = "ORDQTY"
Return

$PROPAGATE_ORDQTY
this.isReadonly = 0
[L]CURPRO = "ORDQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ORDQTY
Gosub DECLARE_VAR From WMC0SCOSRV
[L]CURPRO = "ORDQTY"
$_LNKPRO_ORDQTY
Return




