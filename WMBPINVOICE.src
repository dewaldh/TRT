#<AdxTL>@(#)0.0.0.0 $Revision$
# Sage X3 supervisor
## BI-REGLE ## Synchronization rule PINVOICE

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".PINVOICED" : If clalev([F:PID])=0 : Local File =OUVTAB [PID] : Endif
OUVTAB = GDOSSIER+".PINVOICE" : If clalev([F:PIH])=0 : Local File =OUVTAB [PIH] : Endif
OUVTAB = GDOSSIER+".PINVOICEV" : If clalev([F:PIV])=0 : Local File =OUVTAB [PIV] : Endif
OUVTAB = GDOSSIER+".FACILITY" : If clalev([F:FCY])=0 : Local File =OUVTAB [FCY] : Endif
OUVTAB = GDOSSIER+".BPSUPPLIER" : If clalev([F:BPS])=0 : Local File =OUVTAB [BPS] : Endif
OUVTAB = GDOSSIER+".CPTANALIN" : If clalev([F:CAL])=0 : Local File =OUVTAB [CAL] : Endif
OUVTAB = GDOSSIER+".ITMMASTER" : If clalev([F:ITM])=0 : Local File =OUVTAB [ITM] : Endif
OUVTAB = "Link [PID]"
Link [PID] With
& [PIH]PIH0 = [F:PID]NUM,
& [PIV]PIV0 = [F:PID]NUM,
& [FCY]FCY0 = [F:PID]FCY,
& [BPS]BPS0 = [F:PID]BPSNUM,
& [CAL]CAL0 = "PID";0;[F:PID]NUM;[F:PID]PIDLIN;0;"";1,
& [ITM]ITM0 = [F:PID]ITMREF
& As [LNK_]
& Where [F:PIH]STA=3
FILTRE = ""
Return

$FERME
If clalev([F:PID]) : Close local File [PID] : Endif
If clalev([F:PIH]) : Close local File [PIH] : Endif
If clalev([F:PIV]) : Close local File [PIV] : Endif
If clalev([F:FCY]) : Close local File [FCY] : Endif
If clalev([F:BPS]) : Close local File [BPS] : Endif
If clalev([F:CAL]) : Close local File [CAL] : Endif
If clalev([F:ITM]) : Close local File [ITM] : Endif
Return

$LIEN
Return

$MAJFLD
### DOC
[L]FLD="DOC"
[L]FORMULE='6'
If dim([F:AAA_]DOC)>0
 [F:AAA_]DOC = 6
Endif

### LINDOC
[L]FLD="LINDOC"
[L]FORMULE='1'
If dim([F:AAA_]LINDOC)>0
 [F:AAA_]LINDOC = 1
Endif

### DOSSIER
[L]FLD="DOSSIER"
[L]FORMULE='GDOSSIER'
If dim([F:AAA_]DOSSIER)>0
 [F:AAA_]DOSSIER = GDOSSIER
Endif

### DAT
[L]FLD="DAT"
[L]FORMULE='[F:PIH]ACCDAT'
If dim([F:AAA_]DAT)>0
 [F:AAA_]DAT = [F:PIH]ACCDAT
Endif

### CPY
[L]FLD="CPY"
[L]FORMULE='[F:PIH]CPY'
If dim([F:AAA_]CPY)>0
 [F:AAA_]CPY = [F:PIH]CPY
Endif

### FCY
[L]FLD="FCY"
[L]FORMULE='[F:PIH]FCY'
If dim([F:AAA_]FCY)>0
 [F:AAA_]FCY = [F:PIH]FCY
Endif

### PURFCY
[L]FLD="PURFCY"
[L]FORMULE='func TRTACHBI.GETPIHFCY([F:PIH]NUM,[F:PID]PIDLIN,1)'
If dim([F:AAA_]PURFCY)>0
 [F:AAA_]PURFCY = func TRTACHBI.GETPIHFCY([F:PIH]NUM,[F:PID]PIDLIN,1)
Endif

### STOFCY
[L]FLD="STOFCY"
[L]FORMULE='func TRTACHBI.GETPIHFCY([F:PIH]NUM,[F:PID]PIDLIN,2)'
If dim([F:AAA_]STOFCY)>0
 [F:AAA_]STOFCY = func TRTACHBI.GETPIHFCY([F:PIH]NUM,[F:PID]PIDLIN,2)
Endif

### BPSORD
[L]FLD="BPSORD"
[L]FORMULE='[F:PID]BPSNUM'
If dim([F:AAA_]BPSORD)>0
 [F:AAA_]BPSORD = [F:PID]BPSNUM
Endif

### BPSINV
[L]FLD="BPSINV"
[L]FORMULE='[F:PIH]BPR'
If dim([F:AAA_]BPSINV)>0
 [F:AAA_]BPSINV = [F:PIH]BPR
Endif

### BPSPAY
[L]FLD="BPSPAY"
[L]FORMULE='[F:PIH]BPRPAY'
If dim([F:AAA_]BPSPAY)>0
 [F:AAA_]BPSPAY = [F:PIH]BPRPAY
Endif

### BPSGRU
[L]FLD="BPSGRU"
[L]FORMULE='[F:BPS]BPSGRU'
If dim([F:AAA_]BPSGRU)>0
 [F:AAA_]BPSGRU = [F:BPS]BPSGRU
Endif

### BPSRSK
[L]FLD="BPSRSK"
[L]FORMULE='[F:BPS]BPSRSK'
If dim([F:AAA_]BPSRSK)>0
 [F:AAA_]BPSRSK = [F:BPS]BPSRSK
Endif

### PJT
[L]FLD="PJT"
[L]FORMULE='func PIMPL_CSTD_PROGS.PJM_KEY_SPLIT_OPPNUM(GACTX, [F:PID]PJT)'
If dim([F:AAA_]PJT)>0
 [F:AAA_]PJT = func PIMPL_CSTD_PROGS.PJM_KEY_SPLIT_OPPNUM(GACTX, [F:PID]PJT)
Endif

### CUR
[L]FLD="CUR"
[L]FORMULE='[F:PIH]CUR'
If dim([F:AAA_]CUR)>0
 [F:AAA_]CUR = [F:PIH]CUR
Endif

### CURLOC
[L]FLD="CURLOC"
[L]FORMULE='func TRTX3BI.GETCUR([F:AAA_]FCY)'
If dim([F:AAA_]CURLOC)>0
 [F:AAA_]CURLOC = func TRTX3BI.GETCUR([F:AAA_]FCY)
Endif

### CURFOLD
[L]FLD="CURFOLD"
[L]FORMULE='GBICURFOLD'
If dim([F:AAA_]CURFOLD)>0
 [F:AAA_]CURFOLD = GBICURFOLD
Endif

### ITMREF
[L]FLD="ITMREF"
[L]FORMULE='[F:PID]ITMREF'
If dim([F:AAA_]ITMREF)>0
 [F:AAA_]ITMREF = [F:PID]ITMREF
Endif

### AMTSIG
[L]FLD="AMTSIG"
[L]FORMULE='((find([F:PIH]INVTYP,1,3) <> 0) - !(find([F:PIH]INVTYP,1,3) <> 0))'
If dim([F:AAA_]AMTSIG)>0
 [F:AAA_]AMTSIG = ((find([F:PIH]INVTYP,1,3) <> 0) - !(find([F:PIH]INVTYP,1,3) <> 0))
Endif

### LINPURTYP
[L]FLD="LINPURTYP"
[L]FORMULE='[F:PID]LINPURTYP'
If dim([F:AAA_]LINPURTYP)>0
 [F:AAA_]LINPURTYP = [F:PID]LINPURTYP
Endif

### PSHNUM
[L]FLD="PSHNUM"
[L]FORMULE='""'
If dim([F:AAA_]PSHNUM)>0
FORMULE = ''
 [F:AAA_]PSHNUM = ''
Endif

### PSDLIN
[L]FLD="PSDLIN"
[L]FORMULE='0'
If dim([F:AAA_]PSDLIN)>0
 [F:AAA_]PSDLIN = 0
Endif

### PSHPOH
[L]FLD="PSHPOH"
[L]FORMULE='""'
If dim([F:AAA_]PSHPOH)>0
FORMULE = ''
 [F:AAA_]PSHPOH = ''
Endif

### POHNUM
[L]FLD="POHNUM"
[L]FORMULE='[F:PID]POHNUM'
If dim([F:AAA_]POHNUM)>0
 [F:AAA_]POHNUM = [F:PID]POHNUM
Endif

### POPLIN
[L]FLD="POPLIN"
[L]FORMULE='[F:PID]POPLIN'
If dim([F:AAA_]POPLIN)>0
 [F:AAA_]POPLIN = [F:PID]POPLIN
Endif

### POQSEQ
[L]FLD="POQSEQ"
[L]FORMULE='[F:PID]POQSEQ'
If dim([F:AAA_]POQSEQ)>0
 [F:AAA_]POQSEQ = [F:PID]POQSEQ
Endif

### PTHNUM
[L]FLD="PTHNUM"
[L]FORMULE='[F:PID]PTHNUM'
If dim([F:AAA_]PTHNUM)>0
 [F:AAA_]PTHNUM = [F:PID]PTHNUM
Endif

### PTDLIN
[L]FLD="PTDLIN"
[L]FORMULE='[F:PID]PTDLIN'
If dim([F:AAA_]PTDLIN)>0
 [F:AAA_]PTDLIN = [F:PID]PTDLIN
Endif

### PIHNUM
[L]FLD="PIHNUM"
[L]FORMULE='[F:PIH]NUM'
If dim([F:AAA_]PIHNUM)>0
 [F:AAA_]PIHNUM = [F:PIH]NUM
Endif

### PIDLIN
[L]FLD="PIDLIN"
[L]FORMULE='[F:PID]PIDLIN'
If dim([F:AAA_]PIDLIN)>0
 [F:AAA_]PIDLIN = [F:PID]PIDLIN
Endif

### PNHNUM
[L]FLD="PNHNUM"
[L]FORMULE='[F:PID]PNHNUM'
If dim([F:AAA_]PNHNUM)>0
 [F:AAA_]PNHNUM = [F:PID]PNHNUM
Endif

### PNDLIN
[L]FLD="PNDLIN"
[L]FORMULE='[F:PID]PNDLIN'
If dim([F:AAA_]PNDLIN)>0
 [F:AAA_]PNDLIN = [F:PID]PNDLIN
Endif

### DIE1
[L]FLD="DIE1"
[L]FORMULE='func BICPT.SETDIE(1,"CAL")'
If dim([F:AAA_]DIE1)>0
 [F:AAA_]DIE1 = func BICPT.SETDIE(1,"CAL")
Endif

### DIE2
[L]FLD="DIE2"
[L]FORMULE='func BICPT.SETDIE(2,"CAL")'
If dim([F:AAA_]DIE2)>0
 [F:AAA_]DIE2 = func BICPT.SETDIE(2,"CAL")
Endif

### DIE3
[L]FLD="DIE3"
[L]FORMULE='func BICPT.SETDIE(3,"CAL")'
If dim([F:AAA_]DIE3)>0
 [F:AAA_]DIE3 = func BICPT.SETDIE(3,"CAL")
Endif

### DIE4
[L]FLD="DIE4"
[L]FORMULE='func BICPT.SETDIE(4,"CAL")'
If dim([F:AAA_]DIE4)>0
 [F:AAA_]DIE4 = func BICPT.SETDIE(4,"CAL")
Endif

### DIE5
[L]FLD="DIE5"
[L]FORMULE='func BICPT.SETDIE(5,"CAL")'
If dim([F:AAA_]DIE5)>0
 [F:AAA_]DIE5 = func BICPT.SETDIE(5,"CAL")
Endif

### DIE6
[L]FLD="DIE6"
[L]FORMULE='func BICPT.SETDIE(6,"CAL")'
If dim([F:AAA_]DIE6)>0
 [F:AAA_]DIE6 = func BICPT.SETDIE(6,"CAL")
Endif

### DIE7
[L]FLD="DIE7"
[L]FORMULE='func BICPT.SETDIE(7,"CAL")'
If dim([F:AAA_]DIE7)>0
 [F:AAA_]DIE7 = func BICPT.SETDIE(7,"CAL")
Endif

### DIE8
[L]FLD="DIE8"
[L]FORMULE='func BICPT.SETDIE(8,"CAL")'
If dim([F:AAA_]DIE8)>0
 [F:AAA_]DIE8 = func BICPT.SETDIE(8,"CAL")
Endif

### DIE9
[L]FLD="DIE9"
[L]FORMULE='func BICPT.SETDIE(9,"CAL")'
If dim([F:AAA_]DIE9)>0
 [F:AAA_]DIE9 = func BICPT.SETDIE(9,"CAL")
Endif

### DIE10
[L]FLD="DIE10"
[L]FORMULE='func BICPT.SETDIE(10,"CAL")'
If dim([F:AAA_]DIE10)>0
 [F:AAA_]DIE10 = func BICPT.SETDIE(10,"CAL")
Endif

### CCE1
[L]FLD="CCE1"
[L]FORMULE='func BICPT.SETCCE(1,"CAL")'
If dim([F:AAA_]CCE1)>0
 [F:AAA_]CCE1 = func BICPT.SETCCE(1,"CAL")
Endif

### CCE2
[L]FLD="CCE2"
[L]FORMULE='func BICPT.SETCCE(2,"CAL")'
If dim([F:AAA_]CCE2)>0
 [F:AAA_]CCE2 = func BICPT.SETCCE(2,"CAL")
Endif

### CCE3
[L]FLD="CCE3"
[L]FORMULE='func BICPT.SETCCE(3,"CAL")'
If dim([F:AAA_]CCE3)>0
 [F:AAA_]CCE3 = func BICPT.SETCCE(3,"CAL")
Endif

### CCE4
[L]FLD="CCE4"
[L]FORMULE='func BICPT.SETCCE(4,"CAL")'
If dim([F:AAA_]CCE4)>0
 [F:AAA_]CCE4 = func BICPT.SETCCE(4,"CAL")
Endif

### CCE5
[L]FLD="CCE5"
[L]FORMULE='func BICPT.SETCCE(5,"CAL")'
If dim([F:AAA_]CCE5)>0
 [F:AAA_]CCE5 = func BICPT.SETCCE(5,"CAL")
Endif

### CCE6
[L]FLD="CCE6"
[L]FORMULE='func BICPT.SETCCE(6,"CAL")'
If dim([F:AAA_]CCE6)>0
 [F:AAA_]CCE6 = func BICPT.SETCCE(6,"CAL")
Endif

### CCE7
[L]FLD="CCE7"
[L]FORMULE='func BICPT.SETCCE(7,"CAL")'
If dim([F:AAA_]CCE7)>0
 [F:AAA_]CCE7 = func BICPT.SETCCE(7,"CAL")
Endif

### CCE8
[L]FLD="CCE8"
[L]FORMULE='func BICPT.SETCCE(8,"CAL")'
If dim([F:AAA_]CCE8)>0
 [F:AAA_]CCE8 = func BICPT.SETCCE(8,"CAL")
Endif

### CCE9
[L]FLD="CCE9"
[L]FORMULE='func BICPT.SETCCE(9,"CAL")'
If dim([F:AAA_]CCE9)>0
 [F:AAA_]CCE9 = func BICPT.SETCCE(9,"CAL")
Endif

### CCE10
[L]FLD="CCE10"
[L]FORMULE='func BICPT.SETCCE(10,"CAL")'
If dim([F:AAA_]CCE10)>0
 [F:AAA_]CCE10 = func BICPT.SETCCE(10,"CAL")
Endif

### COA1
[L]FLD="COA1"
[L]FORMULE='func TRTX3BI.SETCOA(1,[F:PIH]CPY)'
If dim([F:AAA_]COA1)>0
 [F:AAA_]COA1 = func TRTX3BI.SETCOA(1,[F:PIH]CPY)
Endif

### COA2
[L]FLD="COA2"
[L]FORMULE='func TRTX3BI.SETCOA(2,[F:PIH]CPY)'
If dim([F:AAA_]COA2)>0
 [F:AAA_]COA2 = func TRTX3BI.SETCOA(2,[F:PIH]CPY)
Endif

### COA3
[L]FLD="COA3"
[L]FORMULE='func TRTX3BI.SETCOA(3,[F:PIH]CPY)'
If dim([F:AAA_]COA3)>0
 [F:AAA_]COA3 = func TRTX3BI.SETCOA(3,[F:PIH]CPY)
Endif

### ACC1
[L]FLD="ACC1"
[L]FORMULE='func TRTX3BI.SETACC(1,[F:PIH]CPY)'
If dim([F:AAA_]ACC1)>0
 [F:AAA_]ACC1 = func TRTX3BI.SETACC(1,[F:PIH]CPY)
Endif

### ACC2
[L]FLD="ACC2"
[L]FORMULE='func TRTX3BI.SETACC(2,[F:PIH]CPY)'
If dim([F:AAA_]ACC2)>0
 [F:AAA_]ACC2 = func TRTX3BI.SETACC(2,[F:PIH]CPY)
Endif

### ACC3
[L]FLD="ACC3"
[L]FORMULE='func TRTX3BI.SETACC(3,[F:PIH]CPY)'
If dim([F:AAA_]ACC3)>0
 [F:AAA_]ACC3 = func TRTX3BI.SETACC(3,[F:PIH]CPY)
Endif

### FLOW
[L]FLD="FLOW"
[L]FORMULE='[F:PIV]BETCPY'
If dim([F:AAA_]FLOW)>0
 [F:AAA_]FLOW = [F:PIV]BETCPY
Endif

### QTYPSH_US
[L]FLD="QTYPSH_US"
[L]FORMULE='0'
If dim([F:AAA_]QTYPSH_US)>0
 [F:AAA_]QTYPSH_US = 0
Endif

### QTYPSH_ST
[L]FLD="QTYPSH_ST"
[L]FORMULE='0'
If dim([F:AAA_]QTYPSH_ST)>0
 [F:AAA_]QTYPSH_ST = 0
Endif

### QTYPOH_US
[L]FLD="QTYPOH_US"
[L]FORMULE='0'
If dim([F:AAA_]QTYPOH_US)>0
 [F:AAA_]QTYPOH_US = 0
Endif

### QTYPOH_ST
[L]FLD="QTYPOH_ST"
[L]FORMULE='0'
If dim([F:AAA_]QTYPOH_ST)>0
 [F:AAA_]QTYPOH_ST = 0
Endif

### QTYPOD_US
[L]FLD="QTYPOD_US"
[L]FORMULE='0'
If dim([F:AAA_]QTYPOD_US)>0
 [F:AAA_]QTYPOD_US = 0
Endif

### QTYPOD_ST
[L]FLD="QTYPOD_ST"
[L]FORMULE='0'
If dim([F:AAA_]QTYPOD_ST)>0
 [F:AAA_]QTYPOD_ST = 0
Endif

### QTYPTH_US
[L]FLD="QTYPTH_US"
[L]FORMULE='0'
If dim([F:AAA_]QTYPTH_US)>0
 [F:AAA_]QTYPTH_US = 0
Endif

### QTYPTH_ST
[L]FLD="QTYPTH_ST"
[L]FORMULE='0'
If dim([F:AAA_]QTYPTH_ST)>0
 [F:AAA_]QTYPTH_ST = 0
Endif

### QTYPIH_US
[L]FLD="QTYPIH_US"
[L]FORMULE='[F:PID]QTYSTU*[F:AAA_]AMTSIG'
If dim([F:AAA_]QTYPIH_US)>0
 [F:AAA_]QTYPIH_US = [F:PID]QTYSTU*[F:AAA_]AMTSIG
Endif

### QTYPIH_ST
[L]FLD="QTYPIH_ST"
[L]FORMULE='func TRTX3BI.CNVQTY([F:PID]QTYSTU, [F:ITM]STU, [F:ITM]SSU, [F:PID]ITMREF, "PID", [F:PID]NUM, [F:PID]PIDLIN, 0, 1, 0)*[F:AAA_]AMTSIG'
If dim([F:AAA_]QTYPIH_ST)>0
 [F:AAA_]QTYPIH_ST = func TRTX3BI.CNVQTY([F:PID]QTYSTU, [F:ITM]STU, [F:ITM]SSU, [F:PID]ITMREF, "PID", [F:PID]NUM, [F:PID]PIDLIN, 0, 1, 0)*[F:AAA_]AMTSIG
Endif

### QTYPNH_US
[L]FLD="QTYPNH_US"
[L]FORMULE='0'
If dim([F:AAA_]QTYPNH_US)>0
 [F:AAA_]QTYPNH_US = 0
Endif

### QTYPNH_ST
[L]FLD="QTYPNH_ST"
[L]FORMULE='0'
If dim([F:AAA_]QTYPNH_ST)>0
 [F:AAA_]QTYPNH_ST = 0
Endif

### AMTNOT_PSH
[L]FLD="AMTNOT_PSH"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PSH)>0
 [F:AAA_]AMTNOT_PSH = 0
Endif

### AMTNOT_PSH_C
[L]FLD="AMTNOT_PSH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PSH_C)>0
 [F:AAA_]AMTNOT_PSH_C = 0
Endif

### AMTNOT_PSH_F
[L]FLD="AMTNOT_PSH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PSH_F)>0
 [F:AAA_]AMTNOT_PSH_F = 0
Endif

### AMTNOT_POH
[L]FLD="AMTNOT_POH"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_POH)>0
 [F:AAA_]AMTNOT_POH = 0
Endif

### AMTNOT_POH_C
[L]FLD="AMTNOT_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_POH_C)>0
 [F:AAA_]AMTNOT_POH_C = 0
Endif

### AMTNOT_POH_F
[L]FLD="AMTNOT_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_POH_F)>0
 [F:AAA_]AMTNOT_POH_F = 0
Endif

### AMTNOT_PTH
[L]FLD="AMTNOT_PTH"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PTH)>0
 [F:AAA_]AMTNOT_PTH = 0
Endif

### AMTNOT_PTH_C
[L]FLD="AMTNOT_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PTH_C)>0
 [F:AAA_]AMTNOT_PTH_C = 0
Endif

### AMTNOT_PTH_F
[L]FLD="AMTNOT_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PTH_F)>0
 [F:AAA_]AMTNOT_PTH_F = 0
Endif

### AMTNOT_PIH
[L]FLD="AMTNOT_PIH"
[L]FORMULE='[F:PID]AMTNOTLIN*[F:AAA_]AMTSIG'
If dim([F:AAA_]AMTNOT_PIH)>0
 [F:AAA_]AMTNOT_PIH = [F:PID]AMTNOTLIN*[F:AAA_]AMTSIG
Endif

### AMTNOT_PIH_C
[L]FLD="AMTNOT_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTNOT_PIH)'
If dim([F:AAA_]AMTNOT_PIH_C)>0
 [F:AAA_]AMTNOT_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTNOT_PIH)
Endif

### AMTNOT_PIH_F
[L]FLD="AMTNOT_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTNOT_PIH)'
If dim([F:AAA_]AMTNOT_PIH_F)>0
 [F:AAA_]AMTNOT_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTNOT_PIH)
Endif

### AMTNOT_PNH
[L]FLD="AMTNOT_PNH"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PNH)>0
 [F:AAA_]AMTNOT_PNH = 0
Endif

### AMTNOT_PNH_C
[L]FLD="AMTNOT_PNH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PNH_C)>0
 [F:AAA_]AMTNOT_PNH_C = 0
Endif

### AMTNOT_PNH_F
[L]FLD="AMTNOT_PNH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTNOT_PNH_F)>0
 [F:AAA_]AMTNOT_PNH_F = 0
Endif

### AMTATI_PSH
[L]FLD="AMTATI_PSH"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PSH)>0
 [F:AAA_]AMTATI_PSH = 0
Endif

### AMTATI_PSH_C
[L]FLD="AMTATI_PSH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PSH_C)>0
 [F:AAA_]AMTATI_PSH_C = 0
Endif

### AMTATI_PSH_F
[L]FLD="AMTATI_PSH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PSH_F)>0
 [F:AAA_]AMTATI_PSH_F = 0
Endif

### AMTATI_POH
[L]FLD="AMTATI_POH"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_POH)>0
 [F:AAA_]AMTATI_POH = 0
Endif

### AMTATI_POH_C
[L]FLD="AMTATI_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_POH_C)>0
 [F:AAA_]AMTATI_POH_C = 0
Endif

### AMTATI_POH_F
[L]FLD="AMTATI_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_POH_F)>0
 [F:AAA_]AMTATI_POH_F = 0
Endif

### AMTATI_PTH
[L]FLD="AMTATI_PTH"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PTH)>0
 [F:AAA_]AMTATI_PTH = 0
Endif

### AMTATI_PTH_C
[L]FLD="AMTATI_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PTH_C)>0
 [F:AAA_]AMTATI_PTH_C = 0
Endif

### AMTATI_PTH_F
[L]FLD="AMTATI_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PTH_F)>0
 [F:AAA_]AMTATI_PTH_F = 0
Endif

### AMTATI_PIH
[L]FLD="AMTATI_PIH"
[L]FORMULE='[F:PID]AMTATILIN*[F:AAA_]AMTSIG'
If dim([F:AAA_]AMTATI_PIH)>0
 [F:AAA_]AMTATI_PIH = [F:PID]AMTATILIN*[F:AAA_]AMTSIG
Endif

### AMTATI_PIH_C
[L]FLD="AMTATI_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTATI_PIH)'
If dim([F:AAA_]AMTATI_PIH_C)>0
 [F:AAA_]AMTATI_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTATI_PIH)
Endif

### AMTATI_PIH_F
[L]FLD="AMTATI_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0),([F:AAA_]CURFOLD=[F:AAA_]CURLOC)* [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTATI_PIH)'
If dim([F:AAA_]AMTATI_PIH_F)>0
 [F:AAA_]AMTATI_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0),([F:AAA_]CURFOLD=[F:AAA_]CURLOC)* [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTATI_PIH)
Endif

### AMTATI_PNH
[L]FLD="AMTATI_PNH"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PNH)>0
 [F:AAA_]AMTATI_PNH = 0
Endif

### AMTATI_PNH_C
[L]FLD="AMTATI_PNH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PNH_C)>0
 [F:AAA_]AMTATI_PNH_C = 0
Endif

### AMTATI_PNH_F
[L]FLD="AMTATI_PNH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTATI_PNH_F)>0
 [F:AAA_]AMTATI_PNH_F = 0
Endif

### AMTDED_PSH
[L]FLD="AMTDED_PSH"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PSH)>0
 [F:AAA_]AMTDED_PSH = 0
Endif

### AMTDED_PSH_C
[L]FLD="AMTDED_PSH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PSH_C)>0
 [F:AAA_]AMTDED_PSH_C = 0
Endif

### AMTDED_PSH_F
[L]FLD="AMTDED_PSH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PSH_F)>0
 [F:AAA_]AMTDED_PSH_F = 0
Endif

### AMTDED_POH
[L]FLD="AMTDED_POH"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_POH)>0
 [F:AAA_]AMTDED_POH = 0
Endif

### AMTDED_POH_C
[L]FLD="AMTDED_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_POH_C)>0
 [F:AAA_]AMTDED_POH_C = 0
Endif

### AMTDED_POH_F
[L]FLD="AMTDED_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_POH_F)>0
 [F:AAA_]AMTDED_POH_F = 0
Endif

### AMTDED_PTH
[L]FLD="AMTDED_PTH"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PTH)>0
 [F:AAA_]AMTDED_PTH = 0
Endif

### AMTDED_PTH_C
[L]FLD="AMTDED_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PTH_C)>0
 [F:AAA_]AMTDED_PTH_C = 0
Endif

### AMTDED_PTH_F
[L]FLD="AMTDED_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PTH_F)>0
 [F:AAA_]AMTDED_PTH_F = 0
Endif

### AMTDED_PIH
[L]FLD="AMTDED_PIH"
[L]FORMULE='([F:PID]DEDTAXLIN1+[F:PID]DEDTAXLIN2+[F:PID]DEDTAXLIN3+[F:PID]DEDTAXRCP+[F:PID]DEDTAXISS+[F:PID]DEDTAXOTH1+[F:PID]DEDTAXOTH2)*[F:AAA_]AMTSIG'
If dim([F:AAA_]AMTDED_PIH)>0
 [F:AAA_]AMTDED_PIH = ([F:PID]DEDTAXLIN1+[F:PID]DEDTAXLIN2+[F:PID]DEDTAXLIN3+[F:PID]DEDTAXRCP+[F:PID]DEDTAXISS+[F:PID]DEDTAXOTH1+[F:PID]DEDTAXOTH2)*[F:AAA_]AMTSIG
Endif

### AMTDED_PIH_C
[L]FLD="AMTDED_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTDED_PIH)'
If dim([F:AAA_]AMTDED_PIH_C)>0
 [F:AAA_]AMTDED_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTDED_PIH)
Endif

### AMTDED_PIH_F
[L]FLD="AMTDED_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0),([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTDED_PIH)'
If dim([F:AAA_]AMTDED_PIH_F)>0
 [F:AAA_]AMTDED_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0),([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]AMTDED_PIH)
Endif

### AMTDED_PNH
[L]FLD="AMTDED_PNH"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PNH)>0
 [F:AAA_]AMTDED_PNH = 0
Endif

### AMTDED_PNH_C
[L]FLD="AMTDED_PNH_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PNH_C)>0
 [F:AAA_]AMTDED_PNH_C = 0
Endif

### AMTDED_PNH_F
[L]FLD="AMTDED_PNH_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTDED_PNH_F)>0
 [F:AAA_]AMTDED_PNH_F = 0
Endif

### CPR_POH
[L]FLD="CPR_POH"
[L]FORMULE='0'
If dim([F:AAA_]CPR_POH)>0
 [F:AAA_]CPR_POH = 0
Endif

### CPR_POH_C
[L]FLD="CPR_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]CPR_POH_C)>0
 [F:AAA_]CPR_POH_C = 0
Endif

### CPR_POH_F
[L]FLD="CPR_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]CPR_POH_F)>0
 [F:AAA_]CPR_POH_F = 0
Endif

### CPR_PTH
[L]FLD="CPR_PTH"
[L]FORMULE='0'
If dim([F:AAA_]CPR_PTH)>0
 [F:AAA_]CPR_PTH = 0
Endif

### CPR_PTH_C
[L]FLD="CPR_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]CPR_PTH_C)>0
 [F:AAA_]CPR_PTH_C = 0
Endif

### CPR_PTH_F
[L]FLD="CPR_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]CPR_PTH_F)>0
 [F:AAA_]CPR_PTH_F = 0
Endif

### CPR_PIH
[L]FLD="CPR_PIH"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CUR, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, ([F:PID]CPR * [F:PID]QTYSTU))*[F:AAA_]AMTSIG'
If dim([F:AAA_]CPR_PIH)>0
 [F:AAA_]CPR_PIH = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CUR, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, ([F:PID]CPR * [F:PID]QTYSTU))*[F:AAA_]AMTSIG
Endif

### CPR_PIH_C
[L]FLD="CPR_PIH_C"
[L]FORMULE='[F:PID]CPR*[F:PID]QTYSTU*[F:AAA_]AMTSIG'
If dim([F:AAA_]CPR_PIH_C)>0
 [F:AAA_]CPR_PIH_C = [F:PID]CPR*[F:PID]QTYSTU*[F:AAA_]AMTSIG
Endif

### CPR_PIH_F
[L]FLD="CPR_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0),([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]CPR_PIH)'
If dim([F:AAA_]CPR_PIH_F)>0
 [F:AAA_]CPR_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0),([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]CPR_PIH)
Endif

### CPR_PNH
[L]FLD="CPR_PNH"
[L]FORMULE='0'
If dim([F:AAA_]CPR_PNH)>0
 [F:AAA_]CPR_PNH = 0
Endif

### CPR_PNH_C
[L]FLD="CPR_PNH_C"
[L]FORMULE='0'
If dim([F:AAA_]CPR_PNH_C)>0
 [F:AAA_]CPR_PNH_C = 0
Endif

### CPR_PNH_F
[L]FLD="CPR_PNH_F"
[L]FORMULE='0'
If dim([F:AAA_]CPR_PNH_F)>0
 [F:AAA_]CPR_PNH_F = 0
Endif

### DISAMT_PSH
[L]FLD="DISAMT_PSH"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PSH)>0
 [F:AAA_]DISAMT_PSH = 0
Endif

### DISAMT_PSH_C
[L]FLD="DISAMT_PSH_C"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PSH_C)>0
 [F:AAA_]DISAMT_PSH_C = 0
Endif

### DISAMT_PSH_F
[L]FLD="DISAMT_PSH_F"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PSH_F)>0
 [F:AAA_]DISAMT_PSH_F = 0
Endif

### DISAMT_POH
[L]FLD="DISAMT_POH"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_POH)>0
 [F:AAA_]DISAMT_POH = 0
Endif

### DISAMT_POH_C
[L]FLD="DISAMT_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_POH_C)>0
 [F:AAA_]DISAMT_POH_C = 0
Endif

### DISAMT_POH_F
[L]FLD="DISAMT_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_POH_F)>0
 [F:AAA_]DISAMT_POH_F = 0
Endif

### DISAMT_PTH
[L]FLD="DISAMT_PTH"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PTH)>0
 [F:AAA_]DISAMT_PTH = 0
Endif

### DISAMT_PTH_C
[L]FLD="DISAMT_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PTH_C)>0
 [F:AAA_]DISAMT_PTH_C = 0
Endif

### DISAMT_PTH_F
[L]FLD="DISAMT_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PTH_F)>0
 [F:AAA_]DISAMT_PTH_F = 0
Endif

### DISAMT_PIH
[L]FLD="DISAMT_PIH"
[L]FORMULE='func TRTACHBI.GETPURDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,2)*[F:AAA_]AMTSIG'
If dim([F:AAA_]DISAMT_PIH)>0
 [F:AAA_]DISAMT_PIH = func TRTACHBI.GETPURDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,2)*[F:AAA_]AMTSIG
Endif

### DISAMT_PIH_C
[L]FLD="DISAMT_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISAMT_PIH)'
If dim([F:AAA_]DISAMT_PIH_C)>0
 [F:AAA_]DISAMT_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISAMT_PIH)
Endif

### DISAMT_PIH_F
[L]FLD="DISAMT_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISAMT_PIH)'
If dim([F:AAA_]DISAMT_PIH_F)>0
 [F:AAA_]DISAMT_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISAMT_PIH)
Endif

### DISAMT_PNH
[L]FLD="DISAMT_PNH"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PNH)>0
 [F:AAA_]DISAMT_PNH = 0
Endif

### DISAMT_PNH_C
[L]FLD="DISAMT_PNH_C"
[L]FORMULE='0'
If dim([F:AAA_]DISAMT_PNH_C)>0
 [F:AAA_]DISAMT_PNH_C = 0
Endif

### DISMAT_PNH_F
[L]FLD="DISMAT_PNH_F"
[L]FORMULE='0'
If dim([F:AAA_]DISMAT_PNH_F)>0
 [F:AAA_]DISMAT_PNH_F = 0
Endif

### EXPAMT_PSH
[L]FLD="EXPAMT_PSH"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PSH)>0
 [F:AAA_]EXPAMT_PSH = 0
Endif

### EXPAMT_PSH_C
[L]FLD="EXPAMT_PSH_C"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PSH_C)>0
 [F:AAA_]EXPAMT_PSH_C = 0
Endif

### EXPAMT_PSH_F
[L]FLD="EXPAMT_PSH_F"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PSH_F)>0
 [F:AAA_]EXPAMT_PSH_F = 0
Endif

### EXPAMT_POH
[L]FLD="EXPAMT_POH"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_POH)>0
 [F:AAA_]EXPAMT_POH = 0
Endif

### EXPAMT_POH_C
[L]FLD="EXPAMT_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_POH_C)>0
 [F:AAA_]EXPAMT_POH_C = 0
Endif

### EXPAMT_POH_F
[L]FLD="EXPAMT_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_POH_F)>0
 [F:AAA_]EXPAMT_POH_F = 0
Endif

### EXPAMT_PTH
[L]FLD="EXPAMT_PTH"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PTH)>0
 [F:AAA_]EXPAMT_PTH = 0
Endif

### EXPAMT_PTH_C
[L]FLD="EXPAMT_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PTH_C)>0
 [F:AAA_]EXPAMT_PTH_C = 0
Endif

### EXPAMT_PTH_F
[L]FLD="EXPAMT_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PTH_F)>0
 [F:AAA_]EXPAMT_PTH_F = 0
Endif

### EXPAMT_PIH
[L]FLD="EXPAMT_PIH"
[L]FORMULE='func TRTACHBI.GETPURDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,1)*[F:AAA_]AMTSIG'
If dim([F:AAA_]EXPAMT_PIH)>0
 [F:AAA_]EXPAMT_PIH = func TRTACHBI.GETPURDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,1)*[F:AAA_]AMTSIG
Endif

### EXPAMT_PIH_C
[L]FLD="EXPAMT_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPAMT_PIH)'
If dim([F:AAA_]EXPAMT_PIH_C)>0
 [F:AAA_]EXPAMT_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPAMT_PIH)
Endif

### EXPAMT_PIH_F
[L]FLD="EXPAMT_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPAMT_PIH)'
If dim([F:AAA_]EXPAMT_PIH_F)>0
 [F:AAA_]EXPAMT_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPAMT_PIH)
Endif

### EXPAMT_PNH
[L]FLD="EXPAMT_PNH"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PNH)>0
 [F:AAA_]EXPAMT_PNH = 0
Endif

### EXPAMT_PNH_C
[L]FLD="EXPAMT_PNH_C"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PNH_C)>0
 [F:AAA_]EXPAMT_PNH_C = 0
Endif

### EXPAMT_PNH_F
[L]FLD="EXPAMT_PNH_F"
[L]FORMULE='0'
If dim([F:AAA_]EXPAMT_PNH_F)>0
 [F:AAA_]EXPAMT_PNH_F = 0
Endif

### DISDTA_POH
[L]FLD="DISDTA_POH"
[L]FORMULE='0'
If dim([F:AAA_]DISDTA_POH)>0
 [F:AAA_]DISDTA_POH = 0
Endif

### DISDTA_POH_C
[L]FLD="DISDTA_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]DISDTA_POH_C)>0
 [F:AAA_]DISDTA_POH_C = 0
Endif

### DISDTA_POH_F
[L]FLD="DISDTA_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]DISDTA_POH_F)>0
 [F:AAA_]DISDTA_POH_F = 0
Endif

### DISDTA_PTH
[L]FLD="DISDTA_PTH"
[L]FORMULE='0'
If dim([F:AAA_]DISDTA_PTH)>0
 [F:AAA_]DISDTA_PTH = 0
Endif

### DISDTA_PTH_C
[L]FLD="DISDTA_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]DISDTA_PTH_C)>0
 [F:AAA_]DISDTA_PTH_C = 0
Endif

### DISDTA_PTH_F
[L]FLD="DISDTA_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]DISDTA_PTH_F)>0
 [F:AAA_]DISDTA_PTH_F = 0
Endif

### DISDTA_PIH
[L]FLD="DISDTA_PIH"
[L]FORMULE='func TRTACHBI.GETPFIDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,2)*[F:AAA_]AMTSIG'
If dim([F:AAA_]DISDTA_PIH)>0
 [F:AAA_]DISDTA_PIH = func TRTACHBI.GETPFIDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,2)*[F:AAA_]AMTSIG
Endif

### DISDTA_PIH_C
[L]FLD="DISDTA_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISDTA_PIH)'
If dim([F:AAA_]DISDTA_PIH_C)>0
 [F:AAA_]DISDTA_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISDTA_PIH)
Endif

### DISDTA_PIH_F
[L]FLD="DISDTA_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISDTA_PIH)'
If dim([F:AAA_]DISDTA_PIH_F)>0
 [F:AAA_]DISDTA_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]DISDTA_PIH)
Endif

### EXPDTA_POH
[L]FLD="EXPDTA_POH"
[L]FORMULE='0'
If dim([F:AAA_]EXPDTA_POH)>0
 [F:AAA_]EXPDTA_POH = 0
Endif

### EXPDTA_POH_C
[L]FLD="EXPDTA_POH_C"
[L]FORMULE='0'
If dim([F:AAA_]EXPDTA_POH_C)>0
 [F:AAA_]EXPDTA_POH_C = 0
Endif

### EXPDTA_POH_F
[L]FLD="EXPDTA_POH_F"
[L]FORMULE='0'
If dim([F:AAA_]EXPDTA_POH_F)>0
 [F:AAA_]EXPDTA_POH_F = 0
Endif

### EXPDTA_PTH
[L]FLD="EXPDTA_PTH"
[L]FORMULE='0'
If dim([F:AAA_]EXPDTA_PTH)>0
 [F:AAA_]EXPDTA_PTH = 0
Endif

### EXPDTA_PTH_C
[L]FLD="EXPDTA_PTH_C"
[L]FORMULE='0'
If dim([F:AAA_]EXPDTA_PTH_C)>0
 [F:AAA_]EXPDTA_PTH_C = 0
Endif

### EXPDTA_PTH_F
[L]FLD="EXPDTA_PTH_F"
[L]FORMULE='0'
If dim([F:AAA_]EXPDTA_PTH_F)>0
 [F:AAA_]EXPDTA_PTH_F = 0
Endif

### EXPDTA_PIH
[L]FLD="EXPDTA_PIH"
[L]FORMULE='func TRTACHBI.GETPFIDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,1)*[F:AAA_]AMTSIG'
If dim([F:AAA_]EXPDTA_PIH)>0
 [F:AAA_]EXPDTA_PIH = func TRTACHBI.GETPFIDCA(4,[F:PIH]NUM,[F:PID]PIDLIN,0, [F:AAA_]CUR,1)*[F:AAA_]AMTSIG
Endif

### EXPDTA_PIH_C
[L]FLD="EXPDTA_PIH_C"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPDTA_PIH)'
If dim([F:AAA_]EXPDTA_PIH_C)>0
 [F:AAA_]EXPDTA_PIH_C = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURLOC, [F:AAA_]CURLOC, [F:PIH]RATMLT(0), [F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPDTA_PIH)
Endif

### EXPDTA_PIH_F
[L]FLD="EXPDTA_PIH_F"
[L]FORMULE='func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPDTA_PIH)'
If dim([F:AAA_]EXPDTA_PIH_F)>0
 [F:AAA_]EXPDTA_PIH_F = func TRTX3BI.CNVAMT([F:AAA_]CUR, [F:AAA_]CURFOLD, [F:AAA_]CURLOC, ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATMLT(0), ([F:AAA_]CURFOLD=[F:AAA_]CURLOC)*[F:PIH]RATDIV(0), [F:PIH]CURTYP, [F:PIH]ACCDAT, [F:AAA_]EXPDTA_PIH)
Endif

### AMTPAY
[L]FLD="AMTPAY"
[L]FORMULE='0'
If dim([F:AAA_]AMTPAY)>0
 [F:AAA_]AMTPAY = 0
Endif

### AMTPAY_C
[L]FLD="AMTPAY_C"
[L]FORMULE='0'
If dim([F:AAA_]AMTPAY_C)>0
 [F:AAA_]AMTPAY_C = 0
Endif

### AMTPAY_F
[L]FLD="AMTPAY_F"
[L]FORMULE='0'
If dim([F:AAA_]AMTPAY_F)>0
 [F:AAA_]AMTPAY_F = 0
Endif

### TMPPAY
[L]FLD="TMPPAY"
[L]FORMULE='0'
If dim([F:AAA_]TMPPAY)>0
 [F:AAA_]TMPPAY = 0
Endif

### TMPPAY_C
[L]FLD="TMPPAY_C"
[L]FORMULE='0'
If dim([F:AAA_]TMPPAY_C)>0
 [F:AAA_]TMPPAY_C = 0
Endif

### TMPPAY_F
[L]FLD="TMPPAY_F"
[L]FORMULE='0'
If dim([F:AAA_]TMPPAY_F)>0
 [F:AAA_]TMPPAY_F = 0
Endif

K = instr(1,GDOSSIER,'@')
If K
 [F:AAA_]ADOS = right$(GDOSSIER,K+1)
Else
 [F:AAA_]ADOS = GDOSSIER
Endif
[F:AAA_]AREG = 'PINVOICE'
[F:AAA_]AIND = indice
[L]FLD="ACLE"
[L]FORMULE="ACLE"
[F:AAA_]ACLE = num$([F:PID]NUM)+'~'+num$([F:PID]PIDLIN)
Return

