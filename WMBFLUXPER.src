#<AdxTL>@(#)0.0.0.0 $Revision$
# Sage X3 supervisor
## BI-REGLE ## Synchronization rule FLUXPER

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".FXDLIFL" : If clalev([F:FLU])=0 : Local File =OUVTAB [FLU] : Endif
OUVTAB = GDOSSIER+".CONTEXT" : If clalev([F:CNX])=0 : Local File =OUVTAB [CNX] : Endif
OUVTAB = "Link [FLU]"
Link [FLU] With
& [CNX]CNX0 = [F:FLU]CPY;[F:FLU]CNX
& As [LNK_]
& Where [F:FLU]PERSTRDAT<>  [0/0/0]
FILTRE = ""
Return

$FERME
If clalev([F:FLU]) : Close local File [FLU] : Endif
If clalev([F:CNX]) : Close local File [CNX] : Endif
Return

$LIEN
Return

$MAJFLD
### DOSSIER
[L]FLD="DOSSIER"
[L]FORMULE='GDOSSIER'
If dim([F:AAA_]DOSSIER)>0
 [F:AAA_]DOSSIER = GDOSSIER
Endif

### FLUXCPY
[L]FLD="FLUXCPY"
[L]FORMULE='[F:FLU]CPY'
If dim([F:AAA_]FLUXCPY)>0
 [F:AAA_]FLUXCPY = [F:FLU]CPY
Endif

### FLUXFCY
[L]FLD="FLUXFCY"
[L]FORMULE='[F:FLU]FCY'
If dim([F:AAA_]FLUXFCY)>0
 [F:AAA_]FLUXFCY = [F:FLU]FCY
Endif

### AASREF
[L]FLD="AASREF"
[L]FORMULE='[F:FLU]AASREF'
If dim([F:AAA_]AASREF)>0
 [F:AAA_]AASREF = [F:FLU]AASREF
Endif

### COA
[L]FLD="COA"
[L]FORMULE=''
If dim([F:AAA_]COA)>0
FORMULE = ''
 [F:AAA_]COA = ''
Endif

### COADES
[L]FLD="COADES"
[L]FORMULE=''
If dim([F:AAA_]COADES)>0
FORMULE = ''
 [F:AAA_]COADES = ''
Endif

### LEG
[L]FLD="LEG"
[L]FORMULE=''
If dim([F:AAA_]LEG)>0
FORMULE = ''
 [F:AAA_]LEG = ''
Endif

### ACCCOD
[L]FLD="ACCCOD"
[L]FORMULE='[F:FLU]ACCCOD'
If dim([F:AAA_]ACCCOD)>0
 [F:AAA_]ACCCOD = [F:FLU]ACCCOD
Endif

### GAC
[L]FLD="GAC"
[L]FORMULE='[F:FLU]GAC'
If dim([F:AAA_]GAC)>0
 [F:AAA_]GAC = [F:FLU]GAC
Endif

### FLUXFCYORI
[L]FLD="FLUXFCYORI"
[L]FORMULE='[F:FLU]FCYORI'
If dim([F:AAA_]FLUXFCYORI)>0
 [F:AAA_]FLUXFCYORI = [F:FLU]FCYORI
Endif

### TXSCLA
[L]FLD="TXSCLA"
[L]FORMULE='[F:FLU]TXSCLA'
If dim([F:AAA_]TXSCLA)>0
 [F:AAA_]TXSCLA = [F:FLU]TXSCLA
Endif

### TXSCAT
[L]FLD="TXSCAT"
[L]FORMULE='[F:FLU]TXSCAT'
If dim([F:AAA_]TXSCAT)>0
 [F:AAA_]TXSCAT = [F:FLU]TXSCAT
Endif

### TXSCATORI
[L]FLD="TXSCATORI"
[L]FORMULE='[F:FLU]TXSCATORI'
If dim([F:AAA_]TXSCATORI)>0
 [F:AAA_]TXSCATORI = [F:FLU]TXSCATORI
Endif

### GACTXSCAT
[L]FLD="GACTXSCAT"
[L]FORMULE=''
If dim([F:AAA_]GACTXSCAT)>0
FORMULE = ''
 [F:AAA_]GACTXSCAT = ''
Endif

### GACTXSCATORI
[L]FLD="GACTXSCATORI"
[L]FORMULE=''
If dim([F:AAA_]GACTXSCATORI)>0
FORMULE = ''
 [F:AAA_]GACTXSCATORI = ''
Endif

### CODTXS
[L]FLD="CODTXS"
[L]FORMULE='[F:FLU]CODTXS'
If dim([F:AAA_]CODTXS)>0
 [F:AAA_]CODTXS = [F:FLU]CODTXS
Endif

### CNX
[L]FLD="CNX"
[L]FORMULE='num$([F:FLU]CNX)-"-"-mess([F:FLU]CNX,3100,1)'
If dim([F:AAA_]CNX)>0
 [F:AAA_]CNX = num$([F:FLU]CNX)-"-"-mess([F:FLU]CNX,3100,1)
Endif

### DPRPLN
[L]FLD="DPRPLN"
[L]FORMULE='[F:FLU]DPRPLN'
If dim([F:AAA_]DPRPLN)>0
 [F:AAA_]DPRPLN = [F:FLU]DPRPLN
Endif

### FIYSTRDAT
[L]FLD="FIYSTRDAT"
[L]FORMULE='[F:FLU]FIYSTRDAT'
If dim([F:AAA_]FIYSTRDAT)>0
 [F:AAA_]FIYSTRDAT = [F:FLU]FIYSTRDAT
Endif

### FIYENDDAT
[L]FLD="FIYENDDAT"
[L]FORMULE='[F:FLU]FIYENDDAT'
If dim([F:AAA_]FIYENDDAT)>0
 [F:AAA_]FIYENDDAT = [F:FLU]FIYENDDAT
Endif

### PERSTRDAT
[L]FLD="PERSTRDAT"
[L]FORMULE='[F:FLU]PERSTRDAT'
If dim([F:AAA_]PERSTRDAT)>0
 [F:AAA_]PERSTRDAT = [F:FLU]PERSTRDAT
Endif

### PERENDDAT
[L]FLD="PERENDDAT"
[L]FORMULE='[F:FLU]PERENDDAT'
If dim([F:AAA_]PERENDDAT)>0
 [F:AAA_]PERENDDAT = [F:FLU]PERENDDAT
Endif

### STRDPRDAT
[L]FLD="STRDPRDAT"
[L]FORMULE='[F:FLU]STRDPRDAT'
If dim([F:AAA_]STRDPRDAT)>0
 [F:AAA_]STRDPRDAT = [F:FLU]STRDPRDAT
Endif

### BSEVALSTR
[L]FLD="BSEVALSTR"
[L]FORMULE='[F:FLU]BSEVALSTR'
If dim([F:AAA_]BSEVALSTR)>0
 [F:AAA_]BSEVALSTR = [F:FLU]BSEVALSTR
Endif

### BSEVALEND
[L]FLD="BSEVALEND"
[L]FORMULE='[F:FLU]BSEVALEND'
If dim([F:AAA_]BSEVALEND)>0
 [F:AAA_]BSEVALEND = [F:FLU]BSEVALEND
Endif

### DPRBASSTR
[L]FLD="DPRBASSTR"
[L]FORMULE='[F:FLU]DPRBASSTR'
If dim([F:AAA_]DPRBASSTR)>0
 [F:AAA_]DPRBASSTR = [F:FLU]DPRBASSTR
Endif

### DPRBASEND
[L]FLD="DPRBASEND"
[L]FORMULE='[F:FLU]DPRBASEND'
If dim([F:AAA_]DPRBASEND)>0
 [F:AAA_]DPRBASEND = [F:FLU]DPRBASEND
Endif

### RVAAMT
[L]FLD="RVAAMT"
[L]FORMULE='[F:FLU]RVAAMT'
If dim([F:AAA_]RVAAMT)>0
 [F:AAA_]RVAAMT = [F:FLU]RVAAMT
Endif

### INCBUY
[L]FLD="INCBUY"
[L]FORMULE='[F:FLU]INCBUY'
If dim([F:AAA_]INCBUY)>0
 [F:AAA_]INCBUY = [F:FLU]INCBUY
Endif

### INCTRF
[L]FLD="INCTRF"
[L]FORMULE='[F:FLU]INCTRF'
If dim([F:AAA_]INCTRF)>0
 [F:AAA_]INCTRF = [F:FLU]INCTRF
Endif

### INCFCY
[L]FLD="INCFCY"
[L]FORMULE=''
If dim([F:AAA_]INCFCY)>0
FORMULE = ''
 [F:AAA_]INCFCY = 0
Endif

### DCRTRF
[L]FLD="DCRTRF"
[L]FORMULE='[F:FLU]DCRTRF'
If dim([F:AAA_]DCRTRF)>0
 [F:AAA_]DCRTRF = [F:FLU]DCRTRF
Endif

### DCRFCY
[L]FLD="DCRFCY"
[L]FORMULE=''
If dim([F:AAA_]DCRFCY)>0
FORMULE = ''
 [F:AAA_]DCRFCY = 0
Endif

### DCRSAL
[L]FLD="DCRSAL"
[L]FORMULE='[F:FLU]DCRSAL'
If dim([F:AAA_]DCRSAL)>0
 [F:AAA_]DCRSAL = [F:FLU]DCRSAL
Endif

### DPRCUMSTR
[L]FLD="DPRCUMSTR"
[L]FORMULE='[F:FLU]DPRCUMSTR'
If dim([F:AAA_]DPRCUMSTR)>0
 [F:AAA_]DPRCUMSTR = [F:FLU]DPRCUMSTR
Endif

### DPE
[L]FLD="DPE"
[L]FORMULE='[F:FLU]DPE'
If dim([F:AAA_]DPE)>0
 [F:AAA_]DPE = [F:FLU]DPE
Endif

### DCRDPEOUT
[L]FLD="DCRDPEOUT"
[L]FORMULE='[F:FLU]DCRDPEOUT'
If dim([F:AAA_]DCRDPEOUT)>0
 [F:AAA_]DCRDPEOUT = [F:FLU]DCRDPEOUT
Endif

### DPRCUMEND
[L]FLD="DPRCUMEND"
[L]FORMULE='[F:FLU]DPRCUMEND'
If dim([F:AAA_]DPRCUMEND)>0
 [F:AAA_]DPRCUMEND = [F:FLU]DPRCUMEND
Endif

### DPRLIN
[L]FLD="DPRLIN"
[L]FORMULE='[F:FLU]DPRLIN'
If dim([F:AAA_]DPRLIN)>0
 [F:AAA_]DPRLIN = [F:FLU]DPRLIN
Endif

### DPRDEG
[L]FLD="DPRDEG"
[L]FORMULE='[F:FLU]DPRDEG'
If dim([F:AAA_]DPRDEG)>0
 [F:AAA_]DPRDEG = [F:FLU]DPRDEG
Endif

### DPROTH
[L]FLD="DPROTH"
[L]FORMULE='[F:FLU]DPROTH'
If dim([F:AAA_]DPROTH)>0
 [F:AAA_]DPROTH = [F:FLU]DPROTH
Endif

### EXCDPR
[L]FLD="EXCDPR"
[L]FORMULE='[F:FLU]EXCDPR'
If dim([F:AAA_]EXCDPR)>0
 [F:AAA_]EXCDPR = [F:FLU]EXCDPR
Endif

### DERDPR
[L]FLD="DERDPR"
[L]FORMULE='[F:FLU]DERDPR'
If dim([F:AAA_]DERDPR)>0
 [F:AAA_]DERDPR = [F:FLU]DERDPR
Endif

### DERRVE
[L]FLD="DERRVE"
[L]FORMULE='[F:FLU]DERRVE'
If dim([F:AAA_]DERRVE)>0
 [F:AAA_]DERRVE = [F:FLU]DERRVE
Endif

### DERISS
[L]FLD="DERISS"
[L]FORMULE='[F:FLU]DERISS'
If dim([F:AAA_]DERISS)>0
 [F:AAA_]DERISS = [F:FLU]DERISS
Endif

### INCDPRTRF
[L]FLD="INCDPRTRF"
[L]FORMULE='[F:FLU]INCDPRTRF'
If dim([F:AAA_]INCDPRTRF)>0
 [F:AAA_]INCDPRTRF = [F:FLU]INCDPRTRF
Endif

### INCDPRFCY
[L]FLD="INCDPRFCY"
[L]FORMULE=''
If dim([F:AAA_]INCDPRFCY)>0
FORMULE = ''
 [F:AAA_]INCDPRFCY = 0
Endif

### DCRDPRFCY
[L]FLD="DCRDPRFCY"
[L]FORMULE=''
If dim([F:AAA_]DCRDPRFCY)>0
FORMULE = ''
 [F:AAA_]DCRDPRFCY = 0
Endif

### DCRDPRTRF
[L]FLD="DCRDPRTRF"
[L]FORMULE='[F:FLU]DCRDPRTRF'
If dim([F:AAA_]DCRDPRTRF)>0
 [F:AAA_]DCRDPRTRF = [F:FLU]DCRDPRTRF
Endif

### ISSAMT
[L]FLD="ISSAMT"
[L]FORMULE='[F:FLU]ISSAMT'
If dim([F:AAA_]ISSAMT)>0
 [F:AAA_]ISSAMT = [F:FLU]ISSAMT
Endif

### GAL
[L]FLD="GAL"
[L]FORMULE='[F:FLU]GAL'
If dim([F:AAA_]GAL)>0
 [F:AAA_]GAL = [F:FLU]GAL
Endif

### TYP
[L]FLD="TYP"
[L]FORMULE='num$([F:FLU]TYP)-"-"-mess([F:FLU]TYP,3127,1)'
If dim([F:AAA_]TYP)>0
 [F:AAA_]TYP = num$([F:FLU]TYP)-"-"-mess([F:FLU]TYP,3127,1)
Endif

### FLGSTATXS
[L]FLD="FLGSTATXS"
[L]FORMULE='num$([F:FLU]FLGSTATXS)-"-"-mess([F:FLU]FLGSTATXS,3266,1)'
If dim([F:AAA_]FLGSTATXS)>0
 [F:AAA_]FLGSTATXS = num$([F:FLU]FLGSTATXS)-"-"-mess([F:FLU]FLGSTATXS,3266,1)
Endif

### DERFLGDF
[L]FLD="DERFLGDF"
[L]FORMULE=''
If dim([F:AAA_]DERFLGDF)>0
FORMULE = ''
 [F:AAA_]DERFLGDF = ''
Endif

### DERFLGEXC
[L]FLD="DERFLGEXC"
[L]FORMULE=''
If dim([F:AAA_]DERFLGEXC)>0
FORMULE = ''
 [F:AAA_]DERFLGEXC = ''
Endif

### CREDAT
[L]FLD="CREDAT"
[L]FORMULE=''
If dim([F:AAA_]CREDAT)>0
FORMULE = ''
 [F:AAA_]CREDAT = [0/0/0]
Endif

### UPDDAT
[L]FLD="UPDDAT"
[L]FORMULE=''
If dim([F:AAA_]UPDDAT)>0
FORMULE = ''
 [F:AAA_]UPDDAT = [0/0/0]
Endif

K = instr(1,GDOSSIER,'@')
If K
 [F:AAA_]ADOS = right$(GDOSSIER,K+1)
Else
 [F:AAA_]ADOS = GDOSSIER
Endif
[F:AAA_]AREG = 'FLUXPER'
[F:AAA_]AIND = indice
[L]FLD="ACLE"
[L]FORMULE="ACLE"
[F:AAA_]ACLE = num$([F:FLU]AASREF)+'~'+num$([F:FLU]DPRPLN)+'~'+num$([F:FLU]TYP)+'~'+num$([F:FLU]FIYSTRDAT)+'~'+num$([F:FLU]PERSTRDAT)+'~'+num$([F:FLU]TXSCAT)+'~'+num$([F:FLU]FCY)
Return

