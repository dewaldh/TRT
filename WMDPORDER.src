#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
## BI-DIMENSION ## Synchronization rule PORDER

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".PORDERQ" : If clalev([F:POQ])=0 : Local File =OUVTAB [POQ] : Endif
OUVTAB = GDOSSIER+".PORDER" : If clalev([F:POH])=0 : Local File =OUVTAB [POH] : Endif
OUVTAB = GDOSSIER+".PORDERP" : If clalev([F:POP])=0 : Local File =OUVTAB [POP] : Endif
OUVTAB = GDOSSIER+".COMPANY" : If clalev([F:CPY])=0 : Local File =OUVTAB [CPY] : Endif
OUVTAB = "Link [POQ]"
Link [POQ] With
& [POH]POH0 = [F:POQ]POHNUM,
& [POP]POP0 = [F:POQ]POHNUM;[F:POQ]POPLIN;[F:POQ]POQSEQ,
& [CPY]CPY0 = [F:POH]CPY
& As [LNK_]
& Where [F:POQ]POHTYP=1
& Order By Key CLE = [POQ]POHNUM;[POQ]POPLIN;[POQ]POQSEQ
FILTRE = ""
Return

$FERME
If clalev([F:POQ]) : Close local File [POQ] : Endif
If clalev([F:POH]) : Close local File [POH] : Endif
If clalev([F:POP]) : Close local File [POP] : Endif
If clalev([F:CPY]) : Close local File [CPY] : Endif
Return

$DCLE
Local Char    DCLE(GLONAVA)(1..3)
Local Integer DTYP(1..3)
Local Integer NBDCLE
NBDCLE = 3
DCLE(1) = "POHNUM"
DTYP(1) =  7
DCLE(2) = "POPLIN"
DTYP(2) =  3
DCLE(3) = "POQSEQ"
DTYP(3) =  3
Return

$CHARGE_CLE
If dim([F:AAA_]POHNUM)>0
 [F:AAA_]POHNUM = [F:POQ]POHNUM
Endif
If dim([F:AAA_]POPLIN)>0
 [F:AAA_]POPLIN = [F:POQ]POPLIN
Endif
If dim([F:AAA_]POQSEQ)>0
 [F:AAA_]POQSEQ = [F:POQ]POQSEQ
Endif
Return

########################################################################
# Return the filter necessary for incremental delete in synchroonization
Subprog GET_FLTDELINC(PFLT)
Variable Clbfile PFLT
PFLT = "1=1"
Append PFLT, " & [F:AAA_]POHNUM=[F:POQ]POHNUM"
Append PFLT, " & [F:AAA_]POPLIN=[F:POQ]POPLIN"
Append PFLT, " & [F:AAA_]POQSEQ=[F:POQ]POQSEQ"

End

$MAJFLD
### POHNUM
[L]FLD="POHNUM"
[L]FORMULE='[F:POQ]POHNUM'
If dim([F:AAA_]POHNUM)>0
 [F:AAA_]POHNUM = [F:POQ]POHNUM
Endif

### POPLIN
[L]FLD="POPLIN"
[L]FORMULE='[F:POQ]POPLIN'
If dim([F:AAA_]POPLIN)>0
 [F:AAA_]POPLIN = [F:POQ]POPLIN
Endif

### POQSEQ
[L]FLD="POQSEQ"
[L]FORMULE='[F:POQ]POQSEQ'
If dim([F:AAA_]POQSEQ)>0
 [F:AAA_]POQSEQ = [F:POQ]POQSEQ
Endif

### POHTYP
[L]FLD="POHTYP"
[L]FORMULE='[F:POH]POHTYP'
If dim([F:AAA_]POHTYP)>0
 [F:AAA_]POHTYP = [F:POH]POHTYP
Endif

### ORDDAT
[L]FLD="ORDDAT"
[L]FORMULE='[F:POH]ORDDAT'
If dim([F:AAA_]ORDDAT)>0
 [F:AAA_]ORDDAT = [F:POH]ORDDAT
Endif

### REVNUM
[L]FLD="REVNUM"
[L]FORMULE='[F:POH]REVNUM'
If dim([F:AAA_]REVNUM)>0
 [F:AAA_]REVNUM = [F:POH]REVNUM
Endif

### LINCLEFLG
[L]FLD="LINCLEFLG"
[L]FORMULE='[F:POQ]LINCLEFLG'
If dim([F:AAA_]LINCLEFLG)>0
 [F:AAA_]LINCLEFLG = [F:POQ]LINCLEFLG
Endif

### LININVFLG
[L]FLD="LININVFLG"
[L]FORMULE='[F:POQ]LININVFLG'
If dim([F:AAA_]LININVFLG)>0
 [F:AAA_]LININVFLG = [F:POQ]LININVFLG
Endif

### RCPCLEFLG
[L]FLD="RCPCLEFLG"
[L]FORMULE='[F:POQ]RCPCLEFLG'
If dim([F:AAA_]RCPCLEFLG)>0
 [F:AAA_]RCPCLEFLG = [F:POQ]RCPCLEFLG
Endif

### APPFLG
[L]FLD="APPFLG"
[L]FORMULE='[F:POH]APPFLG'
If dim([F:AAA_]APPFLG)>0
 [F:AAA_]APPFLG = [F:POH]APPFLG
Endif

### FBUFLG
[L]FLD="FBUFLG"
[L]FORMULE='[F:POQ]FBUFLG'
If dim([F:AAA_]FBUFLG)>0
 [F:AAA_]FBUFLG = [F:POQ]FBUFLG
Endif

### LINOCNDAT
[L]FLD="LINOCNDAT"
[L]FORMULE='[F:POQ]LINOCNDAT'
If dim([F:AAA_]LINOCNDAT)>0
 [F:AAA_]LINOCNDAT = [F:POQ]LINOCNDAT
Endif

### EXTRCPDAT
[L]FLD="EXTRCPDAT"
[L]FORMULE='[F:POQ]EXTRCPDAT'
If dim([F:AAA_]EXTRCPDAT)>0
 [F:AAA_]EXTRCPDAT = [F:POQ]EXTRCPDAT
Endif

### RETRCPDAT
[L]FLD="RETRCPDAT"
[L]FORMULE='[F:POQ]RETRCPDAT'
If dim([F:AAA_]RETRCPDAT)>0
 [F:AAA_]RETRCPDAT = [F:POQ]RETRCPDAT
Endif

### DEMRCPDAT
[L]FLD="DEMRCPDAT"
[L]FORMULE='[F:POQ]DEMRCPDAT'
If dim([F:AAA_]DEMRCPDAT)>0
 [F:AAA_]DEMRCPDAT = [F:POQ]DEMRCPDAT
Endif

### OFS
[L]FLD="OFS"
[L]FORMULE='[F:POQ]OFS'
If dim([F:AAA_]OFS)>0
 [F:AAA_]OFS = [F:POQ]OFS
Endif

### MDL
[L]FLD="MDL"
[L]FORMULE='[F:POH]MDL'
If dim([F:AAA_]MDL)>0
 [F:AAA_]MDL = [F:POH]MDL
Endif

### EECICT
[L]FLD="EECICT"
[L]FORMULE='[F:POH]EECICT'
If dim([F:AAA_]EECICT)>0
 [F:AAA_]EECICT = [F:POH]EECICT
Endif

### BPTNUM
[L]FLD="BPTNUM"
[L]FORMULE='[F:POH]BPTNUM'
If dim([F:AAA_]BPTNUM)>0
 [F:AAA_]BPTNUM = [F:POH]BPTNUM
Endif

### FFWNUM
[L]FLD="FFWNUM"
[L]FORMULE='[F:POH]FFWNUM'
If dim([F:AAA_]FFWNUM)>0
 [F:AAA_]FFWNUM = [F:POH]FFWNUM
Endif

### VACBPR
[L]FLD="VACBPR"
[L]FORMULE='[F:POH]VACBPR'
If dim([F:AAA_]VACBPR)>0
 [F:AAA_]VACBPR = [F:POH]VACBPR
Endif

### VACBPR_LEG
[L]FLD="VACBPR_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_VACBPR([F:AAA_]VACBPR,[F:CPY]LEG)'
If dim([F:AAA_]VACBPR_LEG)>0
 [F:AAA_]VACBPR_LEG = func TRTX3BITC.GETLEG_VACBPR([F:AAA_]VACBPR,[F:CPY]LEG)
Endif

### VAT
[L]FLD="VAT"
[L]FORMULE='[F:POP]VAT(0)'
If dim([F:AAA_]VAT)>0
 [F:AAA_]VAT = [F:POP]VAT(0)
Endif

### VAT_LEG
[L]FLD="VAT_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_VAT([F:AAA_]VAT,[F:CPY]LEG)'
If dim([F:AAA_]VAT_LEG)>0
 [F:AAA_]VAT_LEG = func TRTX3BITC.GETLEG_VAT([F:AAA_]VAT,[F:CPY]LEG)
Endif

### PTE
[L]FLD="PTE"
[L]FORMULE='[F:POH]PTE'
If dim([F:AAA_]PTE)>0
 [F:AAA_]PTE = [F:POH]PTE
Endif

### PTE_LEG
[L]FLD="PTE_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_PTE([F:AAA_]PTE,[F:CPY]LEG)'
If dim([F:AAA_]PTE_LEG)>0
 [F:AAA_]PTE_LEG = func TRTX3BITC.GETLEG_PTE([F:AAA_]PTE,[F:CPY]LEG)
Endif

### ITMDES1
[L]FLD="ITMDES1"
[L]FORMULE='[F:POP]ITMDES1'
If dim([F:AAA_]ITMDES1)>0
 [F:AAA_]ITMDES1 = [F:POP]ITMDES1
Endif

### LINTYP
[L]FLD="LINTYP"
[L]FORMULE='[F:POQ]LINTYP'
If dim([F:AAA_]LINTYP)>0
 [F:AAA_]LINTYP = [F:POQ]LINTYP
Endif

### GROPRI
[L]FLD="GROPRI"
[L]FORMULE='[F:POP]GROPRI'
If dim([F:AAA_]GROPRI)>0
 [F:AAA_]GROPRI = [F:POP]GROPRI
Endif

### NETPRI
[L]FLD="NETPRI"
[L]FORMULE='[F:POP]NETPRI'
If dim([F:AAA_]NETPRI)>0
 [F:AAA_]NETPRI = [F:POP]NETPRI
Endif

### PUU
[L]FLD="PUU"
[L]FORMULE='[F:POQ]PUU'
If dim([F:AAA_]PUU)>0
 [F:AAA_]PUU = [F:POQ]PUU
Endif

### UOM
[L]FLD="UOM"
[L]FORMULE='[F:POQ]UOM'
If dim([F:AAA_]UOM)>0
 [F:AAA_]UOM = [F:POQ]UOM
Endif

### UOMPUUCOE
[L]FLD="UOMPUUCOE"
[L]FORMULE='[F:POQ]UOMPUUCOE'
If dim([F:AAA_]UOMPUUCOE)>0
 [F:AAA_]UOMPUUCOE = [F:POQ]UOMPUUCOE
Endif

### LINBUY
[L]FLD="LINBUY"
[L]FORMULE="string$([F:POP]LINBUY<>'',[F:POP]LINBUY)+string$([F:POP]LINBUY='',[F:POH]BUY)"
If dim([F:AAA_]LINBUY)>0
 [F:AAA_]LINBUY = string$([F:POP]LINBUY<>'',[F:POP]LINBUY)+string$([F:POP]LINBUY='',[F:POH]BUY)
Endif

### ORICRY
[L]FLD="ORICRY"
[L]FORMULE='[F:POP]ORICRY'
If dim([F:AAA_]ORICRY)>0
 [F:AAA_]ORICRY = [F:POP]ORICRY
Endif

### QUAFLG
[L]FLD="QUAFLG"
[L]FORMULE='[F:POP]QUAFLG'
If dim([F:AAA_]QUAFLG)>0
 [F:AAA_]QUAFLG = [F:POP]QUAFLG
Endif

### ORI
[L]FLD="ORI"
[L]FORMULE='[F:POQ]ORI'
If dim([F:AAA_]ORI)>0
 [F:AAA_]ORI = [F:POQ]ORI
Endif

### BPRNAM
[L]FLD="BPRNAM"
[L]FORMULE='[F:POH]BPRNAM'
If dim([F:AAA_]BPRNAM)>0
 [F:AAA_]BPRNAM = [F:POH]BPRNAM
Endif

### POSCOD
[L]FLD="POSCOD"
[L]FORMULE='vireblc([F:POH]POSCOD,1)'
If dim([F:AAA_]POSCOD)>0
 [F:AAA_]POSCOD = vireblc([F:POH]POSCOD,1)
Endif

### CTY
[L]FLD="CTY"
[L]FORMULE='[F:POH]CTY'
If dim([F:AAA_]CTY)>0
 [F:AAA_]CTY = [F:POH]CTY
Endif

### CRY
[L]FLD="CRY"
[L]FORMULE='[F:POH]CRY'
If dim([F:AAA_]CRY)>0
 [F:AAA_]CRY = [F:POH]CRY
Endif

### BPONAM
[L]FLD="BPONAM"
[L]FORMULE='[F:POH]BPONAM'
If dim([F:AAA_]BPONAM)>0
 [F:AAA_]BPONAM = [F:POH]BPONAM
Endif

### BPOPOSCOD
[L]FLD="BPOPOSCOD"
[L]FORMULE='vireblc([F:POH]BPOPOSCOD,1)'
If dim([F:AAA_]BPOPOSCOD)>0
 [F:AAA_]BPOPOSCOD = vireblc([F:POH]BPOPOSCOD,1)
Endif

### BPOCTY
[L]FLD="BPOCTY"
[L]FORMULE='[F:POH]BPOCTY'
If dim([F:AAA_]BPOCTY)>0
 [F:AAA_]BPOCTY = [F:POH]BPOCTY
Endif

### BPOCRY
[L]FLD="BPOCRY"
[L]FORMULE='[F:POH]BPOCRY'
If dim([F:AAA_]BPOCRY)>0
 [F:AAA_]BPOCRY = [F:POH]BPOCRY
Endif

### CMMNUM
[L]FLD="CMMNUM"
[L]FORMULE='[F:POQ]CMMNUM'
If dim([F:AAA_]CMMNUM)>0
 [F:AAA_]CMMNUM = [F:POQ]CMMNUM
Endif

### PQHNUM
[L]FLD="PQHNUM"
[L]FORMULE='[F:POQ]PQHNUM'
If dim([F:AAA_]PQHNUM)>0
 [F:AAA_]PQHNUM = [F:POQ]PQHNUM
Endif

### PPDLIN
[L]FLD="PPDLIN"
[L]FORMULE='[F:POQ]PPDLIN'
If dim([F:AAA_]PPDLIN)>0
 [F:AAA_]PPDLIN = [F:POQ]PPDLIN
Endif


Return

