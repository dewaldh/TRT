#<AdxTL>@(#)0.0.0.0 $Revision$Class Purchase invoicing elements
# Supervisor
## ACLA-CLASSE ## PFOOTINV
# 2018-08-27 12:38:10 227


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : PFINUM Invoicing element ( Field PFI 0)
####################################################################

$SET_PFINUM
If [L]_AOLDVAL<>this.PFINUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PFINUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PFINUM
 Gosub PROPAGATE_PFINUM
Endif
Return

$INIT_PFINUM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PFINUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PFINUM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PFINUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PFINUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PFINUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PFINUM
[L]CURPRO = "PFINUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PFINUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PFINUM
[L]CURPRO = "PFINUM"
Return

$_AOTHERS_PFINUM
[L]CURPRO = "PFINUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PFINUM
[L]CURPRO = "PFINUM"
Return

$PROPAGATE_PFINUM
this.isReadonly = 0
[L]CURPRO = "PFINUM"
Gosub _LNKPRO_PFINUM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PFINUM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PFINUM"
$_LNKPRO_PFINUM
If this.PFINUM<>0
 # Link PFOOTINV
 Local File PFOOTINV [WPFI]
 Read [F:WPFI]PFI0 = this.PFINUM
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="PFOOTINV" & ZONE="SHOAXX" & IDENT1=num$([F:WPFI]PFINUM) & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PFINUM","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="PFOOTINV" & ZONE="DESAXX" & IDENT1=num$([F:WPFI]PFINUM) & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PFINUM","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WPFI]
Endif
Return

$_ALOADATTRIBUTE_PFINUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("PFINUM","$isMandatory","true")
Return


####################################################################
# 2 : PFINUMCAR Alpha no. ( Field A 3)
####################################################################

$SET_PFINUMCAR
If [L]_AOLDVAL<>this.PFINUMCAR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PFINUMCAR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PFINUMCAR
 Gosub PROPAGATE_PFINUMCAR
Endif
Return

$INIT_PFINUMCAR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PFINUMCAR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PFINUMCAR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PFINUMCAR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PFINUMCAR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PFINUMCAR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PFINUMCAR
[L]CURPRO = "PFINUMCAR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PFINUMCAR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PFINUMCAR
[L]CURPRO = "PFINUMCAR"
Return

$_AOTHERS_PFINUMCAR
[L]CURPRO = "PFINUMCAR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PFINUMCAR
[L]CURPRO = "PFINUMCAR"
Return

$PROPAGATE_PFINUMCAR
this.isReadonly = 0
[L]CURPRO = "PFINUMCAR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PFINUMCAR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PFINUMCAR"
$_LNKPRO_PFINUMCAR
Return


####################################################################
# 3 : DESAXX Description ( Field AX2)
####################################################################

$GET_DESAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DESAXX"
this.DESAXX = fmet this.AGETTEXTRA(CURPRO)
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_DESAXX
If [L]_AOLDVAL<>this.DESAXX
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DESAXX
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DESAXX
 Gosub PROPAGATE_DESAXX
Endif
Return

$INIT_DESAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DESAXX"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DESAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DESAXX"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DESAXX                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DESAXX                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DESAXX
[L]CURPRO = "DESAXX"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DESAXX,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DESAXX
[L]CURPRO = "DESAXX"
If vireblc(fmet this.AGETTEXTRA("DESAXX"),2)<>vireblc(format$("K:20X",fmet this.AGETTEXTRA("DESAXX")),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DESAXX
[L]CURPRO = "DESAXX"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DESAXX
[L]CURPRO = "DESAXX"
Return

$PROPAGATE_DESAXX
this.isReadonly = 0
[L]CURPRO = "DESAXX"
[L]ASTATUS = fmet this.ASETTEXTRA(CURPRO,this.DESAXX)
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DESAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DESAXX"
$_LNKPRO_DESAXX
Return


####################################################################
# 4 : SHOAXX Short description ( Field AX1)
####################################################################

$GET_SHOAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "SHOAXX"
this.SHOAXX = fmet this.AGETTEXTRA(CURPRO)
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_SHOAXX
If [L]_AOLDVAL<>this.SHOAXX
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SHOAXX
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SHOAXX
 Gosub PROPAGATE_SHOAXX
Endif
Return

$INIT_SHOAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "SHOAXX"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SHOAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "SHOAXX"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SHOAXX                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SHOAXX                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SHOAXX
[L]CURPRO = "SHOAXX"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SHOAXX,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SHOAXX
[L]CURPRO = "SHOAXX"
If vireblc(fmet this.AGETTEXTRA("SHOAXX"),2)<>vireblc(format$("K:12X",fmet this.AGETTEXTRA("SHOAXX")),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SHOAXX
[L]CURPRO = "SHOAXX"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SHOAXX
[L]CURPRO = "SHOAXX"
Return

$PROPAGATE_SHOAXX
this.isReadonly = 0
[L]CURPRO = "SHOAXX"
[L]ASTATUS = fmet this.ASETTEXTRA(CURPRO,this.SHOAXX)
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SHOAXX
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "SHOAXX"
$_LNKPRO_SHOAXX
Return


####################################################################
# 5 : LANDESSHO Descriptions ( Field A 50)
####################################################################

$SET_LANDESSHO
If [L]_AOLDVAL<>this.LANDESSHO
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LANDESSHO
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LANDESSHO
 Gosub PROPAGATE_LANDESSHO
Endif
Return

$INIT_LANDESSHO
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "LANDESSHO"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LANDESSHO
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "LANDESSHO"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LANDESSHO             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LANDESSHO             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LANDESSHO
[L]CURPRO = "LANDESSHO"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LANDESSHO,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LANDESSHO
[L]CURPRO = "LANDESSHO"
Return

$_AOTHERS_LANDESSHO
[L]CURPRO = "LANDESSHO"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LANDESSHO
[L]CURPRO = "LANDESSHO"
Return

$PROPAGATE_LANDESSHO
this.isReadonly = 0
[L]CURPRO = "LANDESSHO"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LANDESSHO
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "LANDESSHO"
$_LNKPRO_LANDESSHO
Return


####################################################################
# 6 : ITMREF Product ( Field ITM 20)
####################################################################

$SET_ITMREF
If [L]_AOLDVAL<>this.ITMREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMREF
 Gosub PROPAGATE_ITMREF
Endif
Return

$INIT_ITMREF
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ITMREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMREF
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ITMREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMREF
[L]CURPRO = "ITMREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>vireblc(format$("K:20c",this.ITMREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITM.ACTRLREF(this,"ITMREF",this.ITMREF,this.ITMREF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ITMREF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMREF
[L]CURPRO = "ITMREF"
Return

$PROPAGATE_ITMREF
this.isReadonly = 0
[L]CURPRO = "ITMREF"
Gosub _LNKPRO_ITMREF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMREF
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ITMREF"
$_LNKPRO_ITMREF
If vireblc(this.ITMREF,2)<>""
 # Link ITMMASTER
 Local File ITMMASTER [WITM]
 Read [F:WITM]ITM0 = this.ITMREF
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMMASTER" & ZONE="DES1AXX" & IDENT1=[F:WITM]ITMREF & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITM]
Endif
Return


####################################################################
# 7 : ENAFLG Active ( Field Local menu number 1)
####################################################################

$SET_ENAFLG
If [L]_AOLDVAL<>this.ENAFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ENAFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ENAFLG
 Gosub PROPAGATE_ENAFLG
Endif
Return

$INIT_ENAFLG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ENAFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.ENAFLG=0 and fmet this.AGETATTRIBUTE("ENAFLG","$isMandatory")="true"
 this.ENAFLG = 1
Endif
Return
 
$CONTROL_ENAFLG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ENAFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ENAFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ENAFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ENAFLG
[L]CURPRO = "ENAFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ENAFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ENAFLG
[L]CURPRO = "ENAFLG"
If this.ENAFLG<0 or this.ENAFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.ENAFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_ENAFLG
[L]CURPRO = "ENAFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ENAFLG
[L]CURPRO = "ENAFLG"
Return

$PROPAGATE_ENAFLG
this.isReadonly = 0
[L]CURPRO = "ENAFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ENAFLG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ENAFLG"
$_LNKPRO_ENAFLG
Return


####################################################################
# 8 : DISVATFLG Rebate on VAT ( Field Local menu number 1)
####################################################################

$SET_DISVATFLG
If [L]_AOLDVAL<>this.DISVATFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DISVATFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DISVATFLG
 Gosub PROPAGATE_DISVATFLG
Endif
Return

$INIT_DISVATFLG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DISVATFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DISVATFLG=0 and fmet this.AGETATTRIBUTE("DISVATFLG","$isMandatory")="true"
 this.DISVATFLG = 1
Endif
Return
 
$CONTROL_DISVATFLG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DISVATFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DISVATFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DISVATFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DISVATFLG
[L]CURPRO = "DISVATFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DISVATFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DISVATFLG
[L]CURPRO = "DISVATFLG"
If this.DISVATFLG<0 or this.DISVATFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.DISVATFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_DISVATFLG
[L]CURPRO = "DISVATFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DISVATFLG
[L]CURPRO = "DISVATFLG"
Return

$PROPAGATE_DISVATFLG
this.isReadonly = 0
[L]CURPRO = "DISVATFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DISVATFLG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DISVATFLG"
$_LNKPRO_DISVATFLG
Return


####################################################################
# 9 : AMTCOD Amount code ( Field Local menu number 269)
####################################################################

$SET_AMTCOD
If [L]_AOLDVAL<>this.AMTCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTCOD
 Gosub PROPAGATE_AMTCOD
Endif
Return

$INIT_AMTCOD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "AMTCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.AMTCOD=0 and fmet this.AGETATTRIBUTE("AMTCOD","$isMandatory")="true"
 this.AMTCOD = 1
Endif
Return
 
$CONTROL_AMTCOD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "AMTCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTCOD
[L]CURPRO = "AMTCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTCOD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTCOD
[L]CURPRO = "AMTCOD"
If this.AMTCOD<0 or this.AMTCOD>len(mess(0,269,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"269 ->"-num$(this.AMTCOD)-mess(99,123,1)):  Return : # Local menu "269 -> Invalid option
Endif
Return

$_AOTHERS_AMTCOD
[L]CURPRO = "AMTCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTCOD
[L]CURPRO = "AMTCOD"
Return

$PROPAGATE_AMTCOD
this.isReadonly = 0
[L]CURPRO = "AMTCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTCOD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "AMTCOD"
$_LNKPRO_AMTCOD
Return


####################################################################
# 10 : INCDCR Increase/Decrease ( Field Local menu number 254)
####################################################################

$SET_INCDCR
If [L]_AOLDVAL<>this.INCDCR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_INCDCR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.INCDCR
 Gosub PROPAGATE_INCDCR
Endif
Return

$INIT_INCDCR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "INCDCR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.INCDCR=0 and fmet this.AGETATTRIBUTE("INCDCR","$isMandatory")="true"
 this.INCDCR = 1
Endif
Return
 
$CONTROL_INCDCR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "INCDCR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_INCDCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_INCDCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_INCDCR
[L]CURPRO = "INCDCR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.INCDCR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_INCDCR
[L]CURPRO = "INCDCR"
If this.INCDCR<0 or this.INCDCR>len(mess(0,254,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"254 ->"-num$(this.INCDCR)-mess(99,123,1)):  Return : # Local menu "254 -> Invalid option
Endif
Return

$_AOTHERS_INCDCR
[L]CURPRO = "INCDCR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_INCDCR
[L]CURPRO = "INCDCR"
Return

$PROPAGATE_INCDCR
this.isReadonly = 0
[L]CURPRO = "INCDCR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_INCDCR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "INCDCR"
$_LNKPRO_INCDCR
Return


####################################################################
# 11 : DACLIN Price line ( Field Local menu number 1)
####################################################################

$SET_DACLIN
If [L]_AOLDVAL<>this.DACLIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DACLIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DACLIN
 Gosub PROPAGATE_DACLIN
Endif
Return

$INIT_DACLIN
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DACLIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DACLIN=0 and fmet this.AGETATTRIBUTE("DACLIN","$isMandatory")="true"
 this.DACLIN = 1
Endif
Return
 
$CONTROL_DACLIN
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DACLIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DACLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DACLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DACLIN
[L]CURPRO = "DACLIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DACLIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DACLIN
[L]CURPRO = "DACLIN"
If this.DACLIN<0 or this.DACLIN>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.DACLIN)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_DACLIN
[L]CURPRO = "DACLIN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DACLIN
[L]CURPRO = "DACLIN"
Return

$PROPAGATE_DACLIN
this.isReadonly = 0
[L]CURPRO = "DACLIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DACLIN
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DACLIN"
$_LNKPRO_DACLIN
Return


####################################################################
# 12 : DACORD Order footer ( Field Local menu number 1)
####################################################################

$SET_DACORD
If [L]_AOLDVAL<>this.DACORD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DACORD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DACORD
 Gosub PROPAGATE_DACORD
Endif
Return

$INIT_DACORD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DACORD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DACORD=0 and fmet this.AGETATTRIBUTE("DACORD","$isMandatory")="true"
 this.DACORD = 1
Endif
Return
 
$CONTROL_DACORD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DACORD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DACORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DACORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DACORD
[L]CURPRO = "DACORD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DACORD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DACORD
[L]CURPRO = "DACORD"
If this.DACORD<0 or this.DACORD>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.DACORD)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_DACORD
[L]CURPRO = "DACORD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DACORD
[L]CURPRO = "DACORD"
Return

$PROPAGATE_DACORD
this.isReadonly = 0
[L]CURPRO = "DACORD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DACORD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DACORD"
$_LNKPRO_DACORD
Return


####################################################################
# 13 : BPSORI Original supplier ( Field Local menu number 577)
####################################################################

$SET_BPSORI
If [L]_AOLDVAL<>this.BPSORI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPSORI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPSORI
 Gosub PROPAGATE_BPSORI
Endif
Return

$INIT_BPSORI
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "BPSORI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.BPSORI=0 and fmet this.AGETATTRIBUTE("BPSORI","$isMandatory")="true"
 this.BPSORI = 1
Endif
Return
 
$CONTROL_BPSORI
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "BPSORI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPSORI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPSORI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPSORI
[L]CURPRO = "BPSORI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BPSORI=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPSORI
[L]CURPRO = "BPSORI"
If this.BPSORI<0 or this.BPSORI>len(mess(0,577,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"577 ->"-num$(this.BPSORI)-mess(99,123,1)):  Return : # Local menu "577 -> Invalid option
Endif
Return

$_AOTHERS_BPSORI
[L]CURPRO = "BPSORI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPSORI
[L]CURPRO = "BPSORI"
Return

$PROPAGATE_BPSORI
this.isReadonly = 0
[L]CURPRO = "BPSORI"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPSORI
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "BPSORI"
$_LNKPRO_BPSORI
Return


####################################################################
# 14 : DEFVAL Default value ( Field DCB 11)
####################################################################

$SET_DEFVAL
If [L]_AOLDVAL<>this.DEFVAL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DEFVAL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DEFVAL
 Gosub PROPAGATE_DEFVAL
Endif
Return

$INIT_DEFVAL
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DEFVAL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DEFVAL
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DEFVAL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DEFVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DEFVAL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DEFVAL
[L]CURPRO = "DEFVAL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DEFVAL=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DEFVAL
[L]CURPRO = "DEFVAL"
Return

$_AOTHERS_DEFVAL
[L]CURPRO = "DEFVAL"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DEFVAL
[L]CURPRO = "DEFVAL"
Return

$PROPAGATE_DEFVAL
this.isReadonly = 0
[L]CURPRO = "DEFVAL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DEFVAL
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DEFVAL"
$_LNKPRO_DEFVAL
Return


####################################################################
# 15 : CUR Currency ( Field CUR 3)
####################################################################

$SET_CUR
If [L]_AOLDVAL<>this.CUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CUR
 Gosub PROPAGATE_CUR
Endif
Return

$INIT_CUR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CUR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CUR
[L]CURPRO = "CUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CUR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>vireblc(format$("K:3c",this.CUR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCUR.ACTRLREF(this,"CUR",this.CUR,this.CUR,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CUR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CUR
[L]CURPRO = "CUR"
Return

$PROPAGATE_CUR
this.isReadonly = 0
[L]CURPRO = "CUR"
Gosub _LNKPRO_CUR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CUR
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CUR"
$_LNKPRO_CUR
If vireblc(this.CUR,2)<>""
 # Link TABCUR
 Local File TABCUR [WTCU]
 Read [F:WTCU]TCU0 = this.CUR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTSHO" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTDES" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$symbol",[F:WTCU]CURSYM)
  If int(val([F:WTCU]CURFMT1))>0
   Local Char WPREC(10)
   Local Char WSCALE(10)
   WPREC=num$(int(val([F:WTCU]CURFMT1)))
   WSCALE=num$(int(10*(val([F:WTCU]CURFMT1)-int(val([F:WTCU]CURFMT1)))))
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$precision",WPREC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTCU]
Endif
Return


####################################################################
# 16 : TRFINV Include in ord-inv ( Field Local menu number 567)
####################################################################

$SET_TRFINV
If [L]_AOLDVAL<>this.TRFINV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TRFINV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TRFINV
 Gosub PROPAGATE_TRFINV
Endif
Return

$INIT_TRFINV
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "TRFINV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.TRFINV=0 and fmet this.AGETATTRIBUTE("TRFINV","$isMandatory")="true"
 this.TRFINV = 1
Endif
Return
 
$CONTROL_TRFINV
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "TRFINV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TRFINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TRFINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TRFINV
[L]CURPRO = "TRFINV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TRFINV=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TRFINV
[L]CURPRO = "TRFINV"
If this.TRFINV<0 or this.TRFINV>len(mess(0,567,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"567 ->"-num$(this.TRFINV)-mess(99,123,1)):  Return : # Local menu "567 -> Invalid option
Endif
Return

$_AOTHERS_TRFINV
[L]CURPRO = "TRFINV"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TRFINV
[L]CURPRO = "TRFINV"
Return

$PROPAGATE_TRFINV
this.isReadonly = 0
[L]CURPRO = "TRFINV"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TRFINV
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "TRFINV"
$_LNKPRO_TRFINV
Return


####################################################################
# 17 : DSPLIN Distribution ( Field Local menu number 520)
####################################################################

$SET_DSPLIN
If [L]_AOLDVAL<>this.DSPLIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DSPLIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DSPLIN
 Gosub PROPAGATE_DSPLIN
Endif
Return

$INIT_DSPLIN
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DSPLIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DSPLIN=0 and fmet this.AGETATTRIBUTE("DSPLIN","$isMandatory")="true"
 this.DSPLIN = 1
Endif
Return
 
$CONTROL_DSPLIN
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DSPLIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DSPLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DSPLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DSPLIN
[L]CURPRO = "DSPLIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DSPLIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DSPLIN
[L]CURPRO = "DSPLIN"
If this.DSPLIN<0 or this.DSPLIN>len(mess(0,520,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"520 ->"-num$(this.DSPLIN)-mess(99,123,1)):  Return : # Local menu "520 -> Invalid option
Endif
Return

$_AOTHERS_DSPLIN
[L]CURPRO = "DSPLIN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DSPLIN
[L]CURPRO = "DSPLIN"
Return

$PROPAGATE_DSPLIN
this.isReadonly = 0
[L]CURPRO = "DSPLIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DSPLIN
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DSPLIN"
$_LNKPRO_DSPLIN
Return


####################################################################
# 18 : NPRVLT Net price increase ( Field Local menu number 1)
####################################################################

$SET_NPRVLT
If [L]_AOLDVAL<>this.NPRVLT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_NPRVLT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.NPRVLT
 Gosub PROPAGATE_NPRVLT
Endif
Return

$INIT_NPRVLT
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "NPRVLT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.NPRVLT=0 and fmet this.AGETATTRIBUTE("NPRVLT","$isMandatory")="true"
 this.NPRVLT = 1
Endif
Return
 
$CONTROL_NPRVLT
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "NPRVLT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_NPRVLT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_NPRVLT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_NPRVLT
[L]CURPRO = "NPRVLT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.NPRVLT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_NPRVLT
[L]CURPRO = "NPRVLT"
If this.NPRVLT<0 or this.NPRVLT>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.NPRVLT)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_NPRVLT
[L]CURPRO = "NPRVLT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_NPRVLT
[L]CURPRO = "NPRVLT"
Return

$PROPAGATE_NPRVLT
this.isReadonly = 0
[L]CURPRO = "NPRVLT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_NPRVLT
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "NPRVLT"
$_LNKPRO_NPRVLT
Return


####################################################################
# 19 : CLCBAS Calculation basis ( Field Local menu number 537)
####################################################################

$SET_CLCBAS
If [L]_AOLDVAL<>this.CLCBAS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLCBAS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CLCBAS
 Gosub PROPAGATE_CLCBAS
Endif
Return

$INIT_CLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCBAS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CLCBAS=0 and fmet this.AGETATTRIBUTE("CLCBAS","$isMandatory")="true"
 this.CLCBAS = 1
Endif
Return
 
$CONTROL_CLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCBAS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLCBAS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLCBAS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLCBAS
[L]CURPRO = "CLCBAS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CLCBAS=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLCBAS
[L]CURPRO = "CLCBAS"
If this.CLCBAS<0 or this.CLCBAS>len(mess(0,537,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"537 ->"-num$(this.CLCBAS)-mess(99,123,1)):  Return : # Local menu "537 -> Invalid option
Endif
Return

$_AOTHERS_CLCBAS
[L]CURPRO = "CLCBAS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLCBAS
[L]CURPRO = "CLCBAS"
Return

$PROPAGATE_CLCBAS
this.isReadonly = 0
[L]CURPRO = "CLCBAS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCBAS"
$_LNKPRO_CLCBAS
Return


####################################################################
# 20 : ACTCLCBAS Action calcul. ( Field A 10)
####################################################################

$SET_ACTCLCBAS
If [L]_AOLDVAL<>this.ACTCLCBAS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ACTCLCBAS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ACTCLCBAS
 Gosub PROPAGATE_ACTCLCBAS
Endif
Return

$INIT_ACTCLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ACTCLCBAS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ACTCLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ACTCLCBAS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ACTCLCBAS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ACTCLCBAS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ACTCLCBAS
[L]CURPRO = "ACTCLCBAS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ACTCLCBAS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ACTCLCBAS
[L]CURPRO = "ACTCLCBAS"
Return

$_AOTHERS_ACTCLCBAS
[L]CURPRO = "ACTCLCBAS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ACTCLCBAS
[L]CURPRO = "ACTCLCBAS"
Return

$PROPAGATE_ACTCLCBAS
this.isReadonly = 0
[L]CURPRO = "ACTCLCBAS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ACTCLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ACTCLCBAS"
$_LNKPRO_ACTCLCBAS
Return


####################################################################
# 21 : PRGCLCBAS Program calcul. ( Field A 10)
####################################################################

$SET_PRGCLCBAS
If [L]_AOLDVAL<>this.PRGCLCBAS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PRGCLCBAS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PRGCLCBAS
 Gosub PROPAGATE_PRGCLCBAS
Endif
Return

$INIT_PRGCLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PRGCLCBAS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PRGCLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PRGCLCBAS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PRGCLCBAS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PRGCLCBAS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PRGCLCBAS
[L]CURPRO = "PRGCLCBAS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PRGCLCBAS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PRGCLCBAS
[L]CURPRO = "PRGCLCBAS"
Return

$_AOTHERS_PRGCLCBAS
[L]CURPRO = "PRGCLCBAS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PRGCLCBAS
[L]CURPRO = "PRGCLCBAS"
Return

$PROPAGATE_PRGCLCBAS
this.isReadonly = 0
[L]CURPRO = "PRGCLCBAS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PRGCLCBAS
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "PRGCLCBAS"
$_LNKPRO_PRGCLCBAS
Return


####################################################################
# 22 : CLCORD Calculation order ( Field C 3)
####################################################################

$SET_CLCORD
If [L]_AOLDVAL<>this.CLCORD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLCORD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CLCORD
 Gosub PROPAGATE_CLCORD
Endif
Return

$INIT_CLCORD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCORD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CLCORD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCORD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLCORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLCORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLCORD
[L]CURPRO = "CLCORD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CLCORD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLCORD
[L]CURPRO = "CLCORD"
Return

$_AOTHERS_CLCORD
[L]CURPRO = "CLCORD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLCORD
[L]CURPRO = "CLCORD"
Return

$PROPAGATE_CLCORD
this.isReadonly = 0
[L]CURPRO = "CLCORD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLCORD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCORD"
$_LNKPRO_CLCORD
Return


####################################################################
# 23 : CLCDEB Intrastat taken into account ( Field Local menu number 2208)
####################################################################

$SET_CLCDEB
If [L]_AOLDVAL<>this.CLCDEB
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLCDEB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CLCDEB
 Gosub PROPAGATE_CLCDEB
Endif
Return

$INIT_CLCDEB
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCDEB"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CLCDEB=0 and fmet this.AGETATTRIBUTE("CLCDEB","$isMandatory")="true"
 this.CLCDEB = 1
Endif
Return
 
$CONTROL_CLCDEB
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCDEB"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLCDEB                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLCDEB                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLCDEB
[L]CURPRO = "CLCDEB"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CLCDEB=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLCDEB
[L]CURPRO = "CLCDEB"
If this.CLCDEB<0 or this.CLCDEB>len(mess(0,2208,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2208 ->"-num$(this.CLCDEB)-mess(99,123,1)):  Return : # Local menu "2208 -> Invalid option
Endif
Return

$_AOTHERS_CLCDEB
[L]CURPRO = "CLCDEB"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLCDEB
[L]CURPRO = "CLCDEB"
Return

$PROPAGATE_CLCDEB
this.isReadonly = 0
[L]CURPRO = "CLCDEB"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLCDEB
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "CLCDEB"
$_LNKPRO_CLCDEB
Return


####################################################################
# 24 : VATRUL Tax rule ( Field Local menu number 538)
####################################################################

$SET_VATRUL
If [L]_AOLDVAL<>this.VATRUL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VATRUL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VATRUL
 Gosub PROPAGATE_VATRUL
Endif
Return

$INIT_VATRUL
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VATRUL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.VATRUL=0 and fmet this.AGETATTRIBUTE("VATRUL","$isMandatory")="true"
 this.VATRUL = 1
Endif
Return
 
$CONTROL_VATRUL
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VATRUL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VATRUL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VATRUL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VATRUL
[L]CURPRO = "VATRUL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.VATRUL=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VATRUL
[L]CURPRO = "VATRUL"
If this.VATRUL<0 or this.VATRUL>len(mess(0,538,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"538 ->"-num$(this.VATRUL)-mess(99,123,1)):  Return : # Local menu "538 -> Invalid option
Endif
Return

$_AOTHERS_VATRUL
[L]CURPRO = "VATRUL"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VATRUL
[L]CURPRO = "VATRUL"
Return

$PROPAGATE_VATRUL
this.isReadonly = 0
[L]CURPRO = "VATRUL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VATRUL
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VATRUL"
$_LNKPRO_VATRUL
Return


####################################################################
# 25 : VACITM Element tax level ( Field TVI 5)
####################################################################

$SET_VACITM
If [L]_AOLDVAL<>this.VACITM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VACITM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VACITM
 Gosub PROPAGATE_VACITM
Endif
Return

$INIT_VACITM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VACITM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VACITM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VACITM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VACITM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VACITM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VACITM
[L]CURPRO = "VACITM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VACITM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VACITM
[L]CURPRO = "VACITM"
If vireblc(this.VACITM,2)<>vireblc(format$("K:5c",this.VACITM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VACITM
[L]CURPRO = "VACITM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VACITM
[L]CURPRO = "VACITM"
If vireblc(this.VACITM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTVI.ACTRLREF(this,"VACITM",this.VACITM,this.VACITM,this.VACITM_LEG,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.VACITM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_VACITM
this.isReadonly = 0
[L]CURPRO = "VACITM"
Gosub _LNKPRO_VACITM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VACITM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VACITM"
$_LNKPRO_VACITM
If vireblc(this.VACITM,2)<>""
 # Link TABVACITM
 Local File TABVACITM [WTVI]
 Read [F:WTVI]TVI0 = this.VACITM;this.VACITM_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABVACITM" & ZONE="SHOAXX" & IDENT1=[F:WTVI]VACITM & IDENT2=[F:WTVI]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABVACITM" & ZONE="DESAXX" & IDENT1=[F:WTVI]VACITM & IDENT2=[F:WTVI]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTVI]
Endif
Return


####################################################################
# 26 : VACITM_LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_VACITM_LEG
If [L]_AOLDVAL<>this.VACITM_LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VACITM_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VACITM_LEG
 Gosub PROPAGATE_VACITM_LEG
Endif
Return

$INIT_VACITM_LEG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VACITM_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"VACITM_LEG",this.VACITM_LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VACITM_LEG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VACITM_LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VACITM_LEG            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VACITM_LEG            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VACITM_LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
If vireblc(this.VACITM_LEG,2)<>vireblc(format$("K:20B",this.VACITM_LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"VACITM_LEG",this.VACITM_LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
Return

$PROPAGATE_VACITM_LEG
this.isReadonly = 0
[L]CURPRO = "VACITM_LEG"
Gosub _LNKPRO_VACITM_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VACITM_LEG
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "VACITM_LEG"
$_LNKPRO_VACITM_LEG
If vireblc(this.VACITM_LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.VACITM_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM_LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM_LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 27 : ACCCOD Accounting code ( Field CAC 10)
####################################################################

$SET_ACCCOD
If [L]_AOLDVAL<>this.ACCCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ACCCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ACCCOD
 Gosub PROPAGATE_ACCCOD
Endif
Return

$INIT_ACCCOD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ACCCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ACCCOD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ACCCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ACCCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ACCCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ACCCOD
[L]CURPRO = "ACCCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ACCCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ACCCOD
[L]CURPRO = "ACCCOD"
If vireblc(this.ACCCOD,2)<>vireblc(format$("K:10c",this.ACCCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ACCCOD
[L]CURPRO = "ACCCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ACCCOD
[L]CURPRO = "ACCCOD"
Return

$PROPAGATE_ACCCOD
this.isReadonly = 0
[L]CURPRO = "ACCCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ACCCOD
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "ACCCOD"
$_LNKPRO_ACCCOD
Return


####################################################################
# 28 : DSP Distribution ( Field DSP 10)
####################################################################

$SET_DSP
If [L]_AOLDVAL<>this.DSP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DSP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DSP
 Gosub PROPAGATE_DSP
Endif
Return

$INIT_DSP
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DSP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DSP
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DSP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DSP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DSP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DSP
[L]CURPRO = "DSP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DSP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DSP
[L]CURPRO = "DSP"
If vireblc(this.DSP,2)<>vireblc(format$("K:10c",this.DSP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DSP
[L]CURPRO = "DSP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DSP
[L]CURPRO = "DSP"
Return

$PROPAGATE_DSP
this.isReadonly = 0
[L]CURPRO = "DSP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DSP
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "DSP"
$_LNKPRO_DSP
Return


####################################################################
# 30 : EXPNUM Export number ( Field L 8)
####################################################################

$SET_EXPNUM
If [L]_AOLDVAL<>this.EXPNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXPNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXPNUM
 Gosub PROPAGATE_EXPNUM
Endif
Return

$INIT_EXPNUM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "EXPNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXPNUM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "EXPNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXPNUM
[L]CURPRO = "EXPNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXPNUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$_AOTHERS_EXPNUM
[L]CURPRO = "EXPNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$PROPAGATE_EXPNUM
this.isReadonly = 0
[L]CURPRO = "EXPNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXPNUM
Gosub DECLARE_VAR From WMC0PFOOTINV
[L]CURPRO = "EXPNUM"
$_LNKPRO_EXPNUM
Return




