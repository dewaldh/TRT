#<AdxTL>@(#)0.0.0.0 $Revision$Class Costing purchase invoices
# Supervisor
## ACLA-CLASSE ## PINVOICEV
# 2018-08-27 12:39:32 810


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : INVTYP Invoice category ( Field Local menu number 645)
####################################################################

$SET_INVTYP
If [L]_AOLDVAL<>this.INVTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_INVTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.INVTYP
 Gosub PROPAGATE_INVTYP
Endif
Return

$INIT_INVTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "INVTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.INVTYP=0 and fmet this.AGETATTRIBUTE("INVTYP","$isMandatory")="true"
 this.INVTYP = 1
Endif
Return
 
$CONTROL_INVTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "INVTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_INVTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_INVTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_INVTYP
[L]CURPRO = "INVTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.INVTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_INVTYP
[L]CURPRO = "INVTYP"
If this.INVTYP<0 or this.INVTYP>len(mess(0,645,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"645 ->"-num$(this.INVTYP)-mess(99,123,1)):  Return : # Local menu "645 -> Invalid option
Endif
Return

$_AOTHERS_INVTYP
[L]CURPRO = "INVTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_INVTYP
[L]CURPRO = "INVTYP"
Return

$PROPAGATE_INVTYP
this.isReadonly = 0
[L]CURPRO = "INVTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_INVTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "INVTYP"
$_LNKPRO_INVTYP
Return


####################################################################
# 2 : NUM Document no. ( Field VCR 20)
####################################################################

$SET_NUM
If [L]_AOLDVAL<>this.NUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_NUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.NUM
 Gosub PROPAGATE_NUM
Endif
Return

$INIT_NUM
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "NUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_NUM
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "NUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_NUM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_NUM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_NUM
[L]CURPRO = "NUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.NUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_NUM
[L]CURPRO = "NUM"
If vireblc(this.NUM,2)<>vireblc(format$("K:20X",this.NUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_NUM
[L]CURPRO = "NUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_NUM
[L]CURPRO = "NUM"
Return

$PROPAGATE_NUM
this.isReadonly = 0
[L]CURPRO = "NUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_NUM
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "NUM"
$_LNKPRO_NUM
Return

$_ALOADATTRIBUTE_NUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("NUM","$isMandatory","true")
Return


####################################################################
# 3 : PIVTYP Usr invoice type ( Field TPV 5)
####################################################################

$SET_PIVTYP
If [L]_AOLDVAL<>this.PIVTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PIVTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PIVTYP
 Gosub PROPAGATE_PIVTYP
Endif
Return

$INIT_PIVTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PIVTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PIVTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PIVTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PIVTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PIVTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PIVTYP
[L]CURPRO = "PIVTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PIVTYP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PIVTYP
[L]CURPRO = "PIVTYP"
If vireblc(this.PIVTYP,2)<>vireblc(format$("K:5c",this.PIVTYP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PIVTYP
[L]CURPRO = "PIVTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PIVTYP
[L]CURPRO = "PIVTYP"
Return

$PROPAGATE_PIVTYP
this.isReadonly = 0
[L]CURPRO = "PIVTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PIVTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PIVTYP"
$_LNKPRO_PIVTYP
Return


####################################################################
# 4 : PIHTYP Purchase invoice cat. ( Field Local menu number 533)
####################################################################

$SET_PIHTYP
If [L]_AOLDVAL<>this.PIHTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PIHTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PIHTYP
 Gosub PROPAGATE_PIHTYP
Endif
Return

$INIT_PIHTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PIHTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PIHTYP=0 and fmet this.AGETATTRIBUTE("PIHTYP","$isMandatory")="true"
 this.PIHTYP = 1
Endif
Return
 
$CONTROL_PIHTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PIHTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PIHTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PIHTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PIHTYP
[L]CURPRO = "PIHTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PIHTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PIHTYP
[L]CURPRO = "PIHTYP"
If this.PIHTYP<0 or this.PIHTYP>len(mess(0,533,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"533 ->"-num$(this.PIHTYP)-mess(99,123,1)):  Return : # Local menu "533 -> Invalid option
Endif
Return

$_AOTHERS_PIHTYP
[L]CURPRO = "PIHTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PIHTYP
[L]CURPRO = "PIHTYP"
Return

$PROPAGATE_PIHTYP
this.isReadonly = 0
[L]CURPRO = "PIHTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PIHTYP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PIHTYP"
$_LNKPRO_PIHTYP
Return


####################################################################
# 5 : BPR BP ( Field BPR 15)
####################################################################

$SET_BPR
If [L]_AOLDVAL<>this.BPR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPR
 Gosub PROPAGATE_BPR
Endif
Return

$INIT_BPR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "BPR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "BPR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPR
[L]CURPRO = "BPR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPR
[L]CURPRO = "BPR"
If vireblc(this.BPR,2)<>vireblc(format$("K:15c",this.BPR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPR
[L]CURPRO = "BPR"
If vireblc(this.BPR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPR",this.BPR,this.BPR,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPR
[L]CURPRO = "BPR"
Return

$PROPAGATE_BPR
this.isReadonly = 0
[L]CURPRO = "BPR"
Gosub _LNKPRO_BPR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "BPR"
$_LNKPRO_BPR
If vireblc(this.BPR,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPR
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPR","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPR","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return

$_ALOADATTRIBUTE_BPR
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPR","$isMandatory","true")
Return


####################################################################
# 6 : CUR Currency ( Field CUR 3)
####################################################################

$SET_CUR
If [L]_AOLDVAL<>this.CUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CUR
 Gosub PROPAGATE_CUR
Endif
Return

$INIT_CUR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CUR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CUR
[L]CURPRO = "CUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CUR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>vireblc(format$("K:3c",this.CUR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCUR.ACTRLREF(this,"CUR",this.CUR,this.CUR,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CUR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CUR
[L]CURPRO = "CUR"
Return

$PROPAGATE_CUR
this.isReadonly = 0
[L]CURPRO = "CUR"
Gosub _LNKPRO_CUR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CUR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CUR"
$_LNKPRO_CUR
If vireblc(this.CUR,2)<>""
 # Link TABCUR
 Local File TABCUR [WTCU]
 Read [F:WTCU]TCU0 = this.CUR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTSHO" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTDES" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$symbol",[F:WTCU]CURSYM)
  If int(val([F:WTCU]CURFMT1))>0
   Local Char WPREC(10)
   Local Char WSCALE(10)
   WPREC=num$(int(val([F:WTCU]CURFMT1)))
   WSCALE=num$(int(10*(val([F:WTCU]CURFMT1)-int(val([F:WTCU]CURFMT1)))))
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$precision",WPREC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTCU]
Endif
Return

$_ALOADATTRIBUTE_CUR
[L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$isMandatory","true")
Return


####################################################################
# 7 : LINNBR Number of lines ( Field C 4)
####################################################################

$SET_LINNBR
If [L]_AOLDVAL<>this.LINNBR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LINNBR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LINNBR
 Gosub PROPAGATE_LINNBR
Endif
Return

$INIT_LINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "LINNBR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "LINNBR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LINNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LINNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LINNBR
[L]CURPRO = "LINNBR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.LINNBR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LINNBR
[L]CURPRO = "LINNBR"
Return

$_AOTHERS_LINNBR
[L]CURPRO = "LINNBR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LINNBR
[L]CURPRO = "LINNBR"
Return

$PROPAGATE_LINNBR
this.isReadonly = 0
[L]CURPRO = "LINNBR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "LINNBR"
$_LNKPRO_LINNBR
Return


####################################################################
# 8 : QTYLINNBR Number of different quantity L ( Field C 4)
####################################################################

$SET_QTYLINNBR
If [L]_AOLDVAL<>this.QTYLINNBR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QTYLINNBR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QTYLINNBR
 Gosub PROPAGATE_QTYLINNBR
Endif
Return

$INIT_QTYLINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "QTYLINNBR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QTYLINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "QTYLINNBR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QTYLINNBR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QTYLINNBR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QTYLINNBR
[L]CURPRO = "QTYLINNBR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QTYLINNBR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QTYLINNBR
[L]CURPRO = "QTYLINNBR"
Return

$_AOTHERS_QTYLINNBR
[L]CURPRO = "QTYLINNBR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QTYLINNBR
[L]CURPRO = "QTYLINNBR"
Return

$PROPAGATE_QTYLINNBR
this.isReadonly = 0
[L]CURPRO = "QTYLINNBR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QTYLINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "QTYLINNBR"
$_LNKPRO_QTYLINNBR
Return


####################################################################
# 9 : PRILINNBR Number of different price line ( Field C 4)
####################################################################

$SET_PRILINNBR
If [L]_AOLDVAL<>this.PRILINNBR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PRILINNBR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PRILINNBR
 Gosub PROPAGATE_PRILINNBR
Endif
Return

$INIT_PRILINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PRILINNBR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PRILINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PRILINNBR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PRILINNBR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PRILINNBR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PRILINNBR
[L]CURPRO = "PRILINNBR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PRILINNBR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PRILINNBR
[L]CURPRO = "PRILINNBR"
Return

$_AOTHERS_PRILINNBR
[L]CURPRO = "PRILINNBR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PRILINNBR
[L]CURPRO = "PRILINNBR"
Return

$PROPAGATE_PRILINNBR
this.isReadonly = 0
[L]CURPRO = "PRILINNBR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PRILINNBR
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "PRILINNBR"
$_LNKPRO_PRILINNBR
Return


####################################################################
# 10 : DSPWEU Weight unit ( Field UOM 3)
####################################################################

$SET_DSPWEU
If [L]_AOLDVAL<>this.DSPWEU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DSPWEU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DSPWEU
 Gosub PROPAGATE_DSPWEU
Endif
Return

$INIT_DSPWEU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DSPWEU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DSPWEU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DSPWEU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DSPWEU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DSPWEU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DSPWEU
[L]CURPRO = "DSPWEU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DSPWEU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DSPWEU
[L]CURPRO = "DSPWEU"
If vireblc(this.DSPWEU,2)<>vireblc(format$("K:3X",this.DSPWEU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DSPWEU
[L]CURPRO = "DSPWEU"
If vireblc(this.DSPWEU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"DSPWEU",this.DSPWEU,this.DSPWEU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.DSPWEU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DSPWEU
[L]CURPRO = "DSPWEU"
Return

$PROPAGATE_DSPWEU
this.isReadonly = 0
[L]CURPRO = "DSPWEU"
Gosub _LNKPRO_DSPWEU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DSPWEU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DSPWEU"
$_LNKPRO_DSPWEU
If vireblc(this.DSPWEU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.DSPWEU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPWEU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPWEU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPWEU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPWEU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return


####################################################################
# 11 : DSPVOU Volume unit ( Field UOM 3)
####################################################################

$SET_DSPVOU
If [L]_AOLDVAL<>this.DSPVOU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DSPVOU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DSPVOU
 Gosub PROPAGATE_DSPVOU
Endif
Return

$INIT_DSPVOU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DSPVOU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DSPVOU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DSPVOU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DSPVOU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DSPVOU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DSPVOU
[L]CURPRO = "DSPVOU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DSPVOU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DSPVOU
[L]CURPRO = "DSPVOU"
If vireblc(this.DSPVOU,2)<>vireblc(format$("K:3X",this.DSPVOU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DSPVOU
[L]CURPRO = "DSPVOU"
If vireblc(this.DSPVOU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"DSPVOU",this.DSPVOU,this.DSPVOU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.DSPVOU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DSPVOU
[L]CURPRO = "DSPVOU"
Return

$PROPAGATE_DSPVOU
this.isReadonly = 0
[L]CURPRO = "DSPVOU"
Gosub _LNKPRO_DSPVOU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DSPVOU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DSPVOU"
$_LNKPRO_DSPVOU
If vireblc(this.DSPVOU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.DSPVOU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPVOU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPVOU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPVOU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("DSPVOU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return


####################################################################
# 12 : TOTLINWEU Line weight total ( Field QTY 0)
####################################################################

$SET_TOTLINWEU
If [L]_AOLDVAL<>this.TOTLINWEU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TOTLINWEU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TOTLINWEU
 Gosub PROPAGATE_TOTLINWEU
Endif
Return

$INIT_TOTLINWEU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINWEU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TOTLINWEU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINWEU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TOTLINWEU             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TOTLINWEU             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TOTLINWEU
[L]CURPRO = "TOTLINWEU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TOTLINWEU=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TOTLINWEU
[L]CURPRO = "TOTLINWEU"
Return

$_AOTHERS_TOTLINWEU
[L]CURPRO = "TOTLINWEU"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TOTLINWEU
[L]CURPRO = "TOTLINWEU"
Return

$PROPAGATE_TOTLINWEU
this.isReadonly = 0
[L]CURPRO = "TOTLINWEU"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TOTLINWEU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINWEU"
$_LNKPRO_TOTLINWEU
Return


####################################################################
# 13 : TOTLINVOU Line volume total ( Field QTY 0)
####################################################################

$SET_TOTLINVOU
If [L]_AOLDVAL<>this.TOTLINVOU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TOTLINVOU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TOTLINVOU
 Gosub PROPAGATE_TOTLINVOU
Endif
Return

$INIT_TOTLINVOU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINVOU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TOTLINVOU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINVOU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TOTLINVOU             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TOTLINVOU             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TOTLINVOU
[L]CURPRO = "TOTLINVOU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TOTLINVOU=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TOTLINVOU
[L]CURPRO = "TOTLINVOU"
Return

$_AOTHERS_TOTLINVOU
[L]CURPRO = "TOTLINVOU"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TOTLINVOU
[L]CURPRO = "TOTLINVOU"
Return

$PROPAGATE_TOTLINVOU
this.isReadonly = 0
[L]CURPRO = "TOTLINVOU"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TOTLINVOU
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINVOU"
$_LNKPRO_TOTLINVOU
Return


####################################################################
# 14 : TOTLINQTY Total quantity lines ( Field DCB 11)
####################################################################

$SET_TOTLINQTY
If [L]_AOLDVAL<>this.TOTLINQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TOTLINQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TOTLINQTY
 Gosub PROPAGATE_TOTLINQTY
Endif
Return

$INIT_TOTLINQTY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TOTLINQTY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TOTLINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TOTLINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TOTLINQTY
[L]CURPRO = "TOTLINQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TOTLINQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TOTLINQTY
[L]CURPRO = "TOTLINQTY"
Return

$_AOTHERS_TOTLINQTY
[L]CURPRO = "TOTLINQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TOTLINQTY
[L]CURPRO = "TOTLINQTY"
Return

$PROPAGATE_TOTLINQTY
this.isReadonly = 0
[L]CURPRO = "TOTLINQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TOTLINQTY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINQTY"
$_LNKPRO_TOTLINQTY
Return


####################################################################
# 15 : TOTLINAMT Invoice lines excluding tax ( Field MD1 0)
####################################################################

$SET_TOTLINAMT
If [L]_AOLDVAL<>this.TOTLINAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TOTLINAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TOTLINAMT
 Gosub PROPAGATE_TOTLINAMT
Endif
Return

$INIT_TOTLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TOTLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TOTLINAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TOTLINAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TOTLINAMT
[L]CURPRO = "TOTLINAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TOTLINAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TOTLINAMT
[L]CURPRO = "TOTLINAMT"
Return

$_AOTHERS_TOTLINAMT
[L]CURPRO = "TOTLINAMT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"TOTLINAMT",this.TOTLINAMT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TOTLINAMT
[L]CURPRO = "TOTLINAMT"
Return

$PROPAGATE_TOTLINAMT
this.isReadonly = 0
[L]CURPRO = "TOTLINAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TOTLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTLINAMT"
$_LNKPRO_TOTLINAMT
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"TOTLINAMT",this.TOTLINAMT,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("TOTLINAMT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 16 : CLCLINAMT Calculated lines -tax ( Field MD1 0)
####################################################################

$SET_CLCLINAMT
If [L]_AOLDVAL<>this.CLCLINAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLCLINAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CLCLINAMT
 Gosub PROPAGATE_CLCLINAMT
Endif
Return

$INIT_CLCLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLCLINAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CLCLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLCLINAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLCLINAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLCLINAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLCLINAMT
[L]CURPRO = "CLCLINAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CLCLINAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLCLINAMT
[L]CURPRO = "CLCLINAMT"
Return

$_AOTHERS_CLCLINAMT
[L]CURPRO = "CLCLINAMT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"CLCLINAMT",this.CLCLINAMT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLCLINAMT
[L]CURPRO = "CLCLINAMT"
Return

$PROPAGATE_CLCLINAMT
this.isReadonly = 0
[L]CURPRO = "CLCLINAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLCLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLCLINAMT"
$_LNKPRO_CLCLINAMT
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"CLCLINAMT",this.CLCLINAMT,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("CLCLINAMT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 17 : DIFLINAMT Variance - tax ( Field MD3 0)
####################################################################

$SET_DIFLINAMT
If [L]_AOLDVAL<>this.DIFLINAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DIFLINAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DIFLINAMT
 Gosub PROPAGATE_DIFLINAMT
Endif
Return

$INIT_DIFLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DIFLINAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DIFLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DIFLINAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DIFLINAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DIFLINAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DIFLINAMT
[L]CURPRO = "DIFLINAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DIFLINAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DIFLINAMT
[L]CURPRO = "DIFLINAMT"
Return

$_AOTHERS_DIFLINAMT
[L]CURPRO = "DIFLINAMT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD3(this,"DIFLINAMT",this.DIFLINAMT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DIFLINAMT
[L]CURPRO = "DIFLINAMT"
Return

$PROPAGATE_DIFLINAMT
this.isReadonly = 0
[L]CURPRO = "DIFLINAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DIFLINAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DIFLINAMT"
$_LNKPRO_DIFLINAMT
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD3(this,"DIFLINAMT",this.DIFLINAMT,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("DIFLINAMT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 18 : TOTTAXAMT Tax total ( Field MD1 0)
####################################################################

$SET_TOTTAXAMT
If [L]_AOLDVAL<>this.TOTTAXAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TOTTAXAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TOTTAXAMT
 Gosub PROPAGATE_TOTTAXAMT
Endif
Return

$INIT_TOTTAXAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTTAXAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TOTTAXAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTTAXAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TOTTAXAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TOTTAXAMT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TOTTAXAMT
[L]CURPRO = "TOTTAXAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TOTTAXAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TOTTAXAMT
[L]CURPRO = "TOTTAXAMT"
Return

$_AOTHERS_TOTTAXAMT
[L]CURPRO = "TOTTAXAMT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"TOTTAXAMT",this.TOTTAXAMT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TOTTAXAMT
[L]CURPRO = "TOTTAXAMT"
Return

$PROPAGATE_TOTTAXAMT
this.isReadonly = 0
[L]CURPRO = "TOTTAXAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TOTTAXAMT
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TOTTAXAMT"
$_LNKPRO_TOTTAXAMT
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"TOTTAXAMT",this.TOTTAXAMT,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("TOTTAXAMT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 22 : LAN Language ( Field LAN 3)
####################################################################

$SET_LAN
If [L]_AOLDVAL<>this.LAN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LAN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LAN
 Gosub PROPAGATE_LAN
Endif
Return

$INIT_LAN
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "LAN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LAN
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "LAN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LAN                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LAN                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LAN
[L]CURPRO = "LAN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LAN,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LAN
[L]CURPRO = "LAN"
If vireblc(this.LAN,2)<>vireblc(format$("KTD:3B",this.LAN),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_LAN
[L]CURPRO = "LAN"
If vireblc(this.LAN,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPLAN.ACTRLREF(this,"LAN",this.LAN,this.LAN,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.LAN<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LAN
[L]CURPRO = "LAN"
Return

$PROPAGATE_LAN
this.isReadonly = 0
[L]CURPRO = "LAN"
Gosub _LNKPRO_LAN
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LAN
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "LAN"
$_LNKPRO_LAN
If vireblc(this.LAN,2)<>""
 # Link TABLAN
 Local File TABLAN [WTLA]
 Read [F:WTLA]TLA0 = this.LAN
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTSHO" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTDES" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTLA]
Endif
Return

$_ALOADATTRIBUTE_LAN
[L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$isMandatory","true")
Return


####################################################################
# 23 : CPYLAN Company language ( Field LAN 3)
####################################################################

$SET_CPYLAN
If [L]_AOLDVAL<>this.CPYLAN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPYLAN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPYLAN
 Gosub PROPAGATE_CPYLAN
Endif
Return

$INIT_CPYLAN
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CPYLAN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPYLAN
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CPYLAN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPYLAN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPYLAN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPYLAN
[L]CURPRO = "CPYLAN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CPYLAN,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPYLAN
[L]CURPRO = "CPYLAN"
If vireblc(this.CPYLAN,2)<>vireblc(format$("KTD:3B",this.CPYLAN),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CPYLAN
[L]CURPRO = "CPYLAN"
If vireblc(this.CPYLAN,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPLAN.ACTRLREF(this,"CPYLAN",this.CPYLAN,this.CPYLAN,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CPYLAN<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPYLAN
[L]CURPRO = "CPYLAN"
Return

$PROPAGATE_CPYLAN
this.isReadonly = 0
[L]CURPRO = "CPYLAN"
Gosub _LNKPRO_CPYLAN
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPYLAN
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CPYLAN"
$_LNKPRO_CPYLAN
If vireblc(this.CPYLAN,2)<>""
 # Link TABLAN
 Local File TABLAN [WTLA]
 Read [F:WTLA]TLA0 = this.CPYLAN
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTSHO" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CPYLAN","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTDES" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CPYLAN","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTLA]
Endif
Return

$_ALOADATTRIBUTE_CPYLAN
[L]ASTATUS = fmet this.ASETATTRIBUTE("CPYLAN","$isMandatory","true")
Return


####################################################################
# 24 : CPY Company ( Field CPY 5)
####################################################################

$SET_CPY
If [L]_AOLDVAL<>this.CPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPY
 Gosub PROPAGATE_CPY
Endif
Return

$INIT_CPY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPY
[L]CURPRO = "CPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CPY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>vireblc(format$("K:5c",this.CPY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCPY.ACTRLREF(this,"CPY",this.CPY,this.CPY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CPY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPY
[L]CURPRO = "CPY"
Return

$PROPAGATE_CPY
this.isReadonly = 0
[L]CURPRO = "CPY"
Gosub _LNKPRO_CPY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CPY"
$_LNKPRO_CPY
If vireblc(this.CPY,2)<>""
 # Link COMPANY
 Local File COMPANY [WCPY]
 Read [F:WCPY]CPY0 = this.CPY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$title",[F:WCPY]CPYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$description",[F:WCPY]CPYNAM)
 Endif
 LogicClose File [WCPY]
Endif
Return

$_ALOADATTRIBUTE_CPY
[L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$isMandatory","true")
Return


####################################################################
# 25 : DEP Settlement discount ( Field TDA 5)
####################################################################

$SET_DEP
If [L]_AOLDVAL<>this.DEP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DEP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DEP
 Gosub PROPAGATE_DEP
Endif
Return

$INIT_DEP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DEP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DEP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DEP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DEP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DEP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DEP
[L]CURPRO = "DEP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DEP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DEP
[L]CURPRO = "DEP"
If vireblc(this.DEP,2)<>vireblc(format$("K:5c",this.DEP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DEP
[L]CURPRO = "DEP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DEP
[L]CURPRO = "DEP"
If vireblc(this.DEP,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTDA.ACTRLREF(this,"DEP",this.DEP,this.DEP,"","")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.DEP<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_DEP
this.isReadonly = 0
[L]CURPRO = "DEP"
Gosub _LNKPRO_DEP
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DEP
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "DEP"
$_LNKPRO_DEP
If vireblc(this.DEP,2)<>""
 # Link TABDEPAGIO
 Local File TABDEPAGIO [WTDA]
 Read [F:WTDA]TDA0 = this.DEP;""
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABDEPAGIO" & ZONE="SHOAXX" & IDENT1=[F:WTDA]DEP & IDENT2=[F:WTDA]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DEP","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABDEPAGIO" & ZONE="DESAXX" & IDENT1=[F:WTDA]DEP & IDENT2=[F:WTDA]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DEP","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTDA]
Endif
Return


####################################################################
# 26 : TEX1 Text ( Field TXC 12)
####################################################################

$SET_TEX1
If [L]_AOLDVAL<>this.TEX1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TEX1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TEX1
 Gosub PROPAGATE_TEX1
Endif
Return

$INIT_TEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TEX1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TEX1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TEX1                  : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TEX1                  : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TEX1
[L]CURPRO = "TEX1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TEX1,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TEX1
[L]CURPRO = "TEX1"
If vireblc(this.TEX1,2)<>vireblc(format$("K:12X",this.TEX1),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TEX1
[L]CURPRO = "TEX1"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TEX1
[L]CURPRO = "TEX1"
Return

$PROPAGATE_TEX1
this.isReadonly = 0
[L]CURPRO = "TEX1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TEX1"
$_LNKPRO_TEX1
Return


####################################################################
# 27 : CLATEX1 Header text ( Field ACRTF 1)
####################################################################

$GET_CLATEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX1"
Local Char _CNT(100)
Local Tinyint _EXI : [L]_EXI=1
[L]ASTATUS = fmet this.AREAD_CLB("CLATEX1",
& this.TEX1
& ,[L]_CNT,this.CLATEX1)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isLoaded")<>"true"
 [L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
Endif
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_CLATEX1
If fmet this.AGETATTRIBUTE("CLATEX1","$isLoaded")<>"true" or [L]_AOLDVAL<>this.CLATEX1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLATEX1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE("CLATEX1","$isLoaded")<>"true" or [L]_AOLDVAL<>this.CLATEX1
 Gosub PROPAGATE_CLATEX1
Endif
Return

$INIT_CLATEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CLATEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLATEX1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLATEX1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLATEX1
[L]CURPRO = "CLATEX1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & len(this.CLATEX1)=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLATEX1
[L]CURPRO = "CLATEX1"
Return

$_AOTHERS_CLATEX1
[L]CURPRO = "CLATEX1"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLATEX1
[L]CURPRO = "CLATEX1"
Return

$PROPAGATE_CLATEX1
this.isReadonly = 0
[L]CURPRO = "CLATEX1"
[L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLATEX1
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX1"
$_LNKPRO_CLATEX1
Local Tinyint _EXI : [L]_EXI=1
Gosub READ_EXI_CLATEX1 From WMC0PINVOICEV
[L]ASTATUS = fmet this.ASETATTRIBUTE("CLATEX1","$isLobFound",func ASYRSUB.BOOLEAN_TO_SYR([L]_EXI+1))
Return


####################################################################
# 28 : TEX2 Text ( Field TXC 12)
####################################################################

$SET_TEX2
If [L]_AOLDVAL<>this.TEX2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TEX2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TEX2
 Gosub PROPAGATE_TEX2
Endif
Return

$INIT_TEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TEX2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TEX2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TEX2                  : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TEX2                  : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TEX2
[L]CURPRO = "TEX2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TEX2,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TEX2
[L]CURPRO = "TEX2"
If vireblc(this.TEX2,2)<>vireblc(format$("K:12X",this.TEX2),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TEX2
[L]CURPRO = "TEX2"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TEX2
[L]CURPRO = "TEX2"
Return

$PROPAGATE_TEX2
this.isReadonly = 0
[L]CURPRO = "TEX2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "TEX2"
$_LNKPRO_TEX2
Return


####################################################################
# 29 : CLATEX2 Footer text ( Field ACRTF 1)
####################################################################

$GET_CLATEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX2"
Local Char _CNT(100)
Local Tinyint _EXI : [L]_EXI=1
[L]ASTATUS = fmet this.AREAD_CLB("CLATEX2",
& this.TEX2
& ,[L]_CNT,this.CLATEX2)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isLoaded")<>"true"
 [L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
Endif
[L]ARULE = "GET" : [L]ACTION = "GET" : Gosub ACTION From ASYRSUB
Return

$SET_CLATEX2
If fmet this.AGETATTRIBUTE("CLATEX2","$isLoaded")<>"true" or [L]_AOLDVAL<>this.CLATEX2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLATEX2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If fmet this.AGETATTRIBUTE("CLATEX2","$isLoaded")<>"true" or [L]_AOLDVAL<>this.CLATEX2
 Gosub PROPAGATE_CLATEX2
Endif
Return

$INIT_CLATEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CLATEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLATEX2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLATEX2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLATEX2
[L]CURPRO = "CLATEX2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & len(this.CLATEX2)=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLATEX2
[L]CURPRO = "CLATEX2"
Return

$_AOTHERS_CLATEX2
[L]CURPRO = "CLATEX2"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLATEX2
[L]CURPRO = "CLATEX2"
Return

$PROPAGATE_CLATEX2
this.isReadonly = 0
[L]CURPRO = "CLATEX2"
[L]ASTATUS = fmet this.ASETATTRIBUTE([L]CURPRO,"$isLoaded","true")
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLATEX2
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "CLATEX2"
$_LNKPRO_CLATEX2
Local Tinyint _EXI : [L]_EXI=1
Gosub READ_EXI_CLATEX2 From WMC0PINVOICEV
[L]ASTATUS = fmet this.ASETATTRIBUTE("CLATEX2","$isLobFound",func ASYRSUB.BOOLEAN_TO_SYR([L]_EXI+1))
Return


####################################################################
# 30 : BETCPY Intercompany ( Field Local menu number 1)
####################################################################

$SET_BETCPY
If [L]_AOLDVAL<>this.BETCPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BETCPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BETCPY
 Gosub PROPAGATE_BETCPY
Endif
Return

$INIT_BETCPY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "BETCPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.BETCPY=0 and fmet this.AGETATTRIBUTE("BETCPY","$isMandatory")="true"
 this.BETCPY = 1
Endif
Return
 
$CONTROL_BETCPY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "BETCPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BETCPY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BETCPY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BETCPY
[L]CURPRO = "BETCPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BETCPY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BETCPY
[L]CURPRO = "BETCPY"
If this.BETCPY<0 or this.BETCPY>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.BETCPY)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_BETCPY
[L]CURPRO = "BETCPY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BETCPY
[L]CURPRO = "BETCPY"
Return

$PROPAGATE_BETCPY
this.isReadonly = 0
[L]CURPRO = "BETCPY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BETCPY
Gosub DECLARE_VAR From WMC0PINVOICEV
[L]CURPRO = "BETCPY"
$_LNKPRO_BETCPY
Return




