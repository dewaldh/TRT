#<AdxTL>@(#)0.0.0.0 $Revision$Class Costing sales invoice
# Supervisor
## ACLA-CLASSE ## SINVOICEV
# 2018-08-27 12:47:00 315

####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 31 : INVCNOSTA Credit memo status on invoice ( Field Local menu number 1)
####################################################################

$SET_INVCNOSTA
If [L]_AOLDVAL<>this.INVCNOSTA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_INVCNOSTA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.INVCNOSTA
 Gosub PROPAGATE_INVCNOSTA
Endif
Return

$INIT_INVCNOSTA
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "INVCNOSTA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.INVCNOSTA=0 and fmet this.AGETATTRIBUTE("INVCNOSTA","$isMandatory")="true"
 this.INVCNOSTA = 1
Endif
Return
 
$CONTROL_INVCNOSTA
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "INVCNOSTA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_INVCNOSTA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_INVCNOSTA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_INVCNOSTA
[L]CURPRO = "INVCNOSTA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.INVCNOSTA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_INVCNOSTA
[L]CURPRO = "INVCNOSTA"
If this.INVCNOSTA<0 or this.INVCNOSTA>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.INVCNOSTA)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_INVCNOSTA
[L]CURPRO = "INVCNOSTA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_INVCNOSTA
[L]CURPRO = "INVCNOSTA"
Return

$PROPAGATE_INVCNOSTA
this.isReadonly = 0
[L]CURPRO = "INVCNOSTA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_INVCNOSTA
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "INVCNOSTA"
$_LNKPRO_INVCNOSTA
Return


####################################################################
# 32 : STOMVTFLG Stock transaction ( Field Local menu number 1)
####################################################################

$SET_STOMVTFLG
If [L]_AOLDVAL<>this.STOMVTFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STOMVTFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STOMVTFLG
 Gosub PROPAGATE_STOMVTFLG
Endif
Return

$INIT_STOMVTFLG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "STOMVTFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.STOMVTFLG=0 and fmet this.AGETATTRIBUTE("STOMVTFLG","$isMandatory")="true"
 this.STOMVTFLG = 1
Endif
Return
 
$CONTROL_STOMVTFLG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "STOMVTFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STOMVTFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STOMVTFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STOMVTFLG
[L]CURPRO = "STOMVTFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STOMVTFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STOMVTFLG
[L]CURPRO = "STOMVTFLG"
If this.STOMVTFLG<0 or this.STOMVTFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.STOMVTFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_STOMVTFLG
[L]CURPRO = "STOMVTFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STOMVTFLG
[L]CURPRO = "STOMVTFLG"
Return

$PROPAGATE_STOMVTFLG
this.isReadonly = 0
[L]CURPRO = "STOMVTFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STOMVTFLG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "STOMVTFLG"
$_LNKPRO_STOMVTFLG
Return


####################################################################
# 33 : INVREF Reference ( Field REF 30)
####################################################################

$SET_INVREF
If [L]_AOLDVAL<>this.INVREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_INVREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.INVREF
 Gosub PROPAGATE_INVREF
Endif
Return

$INIT_INVREF
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "INVREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_INVREF
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "INVREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_INVREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_INVREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_INVREF
[L]CURPRO = "INVREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.INVREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_INVREF
[L]CURPRO = "INVREF"
If vireblc(this.INVREF,2)<>vireblc(format$("K:30X",this.INVREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_INVREF
[L]CURPRO = "INVREF"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_INVREF
[L]CURPRO = "INVREF"
Return

$PROPAGATE_INVREF
this.isReadonly = 0
[L]CURPRO = "INVREF"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_INVREF
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "INVREF"
$_LNKPRO_INVREF
Return


####################################################################
# 34 : PJT Project ( Field PJT 40)
####################################################################

$SET_PJT
If [L]_AOLDVAL<>this.PJT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PJT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PJT
 Gosub PROPAGATE_PJT
Endif
Return

$INIT_PJT
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PJT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PJT
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PJT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PJT                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PJT                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PJT
[L]CURPRO = "PJT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PJT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PJT
[L]CURPRO = "PJT"
If vireblc(this.PJT,2)<>vireblc(format$("K:40X",this.PJT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PJT
[L]CURPRO = "PJT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PJT
[L]CURPRO = "PJT"
Return

$PROPAGATE_PJT
this.isReadonly = 0
[L]CURPRO = "PJT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PJT
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PJT"
$_LNKPRO_PJT
Return


####################################################################
# 35 : PRITYP Price - / +tax ( Field Local menu number 243)
####################################################################

$SET_PRITYP
If [L]_AOLDVAL<>this.PRITYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PRITYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PRITYP
 Gosub PROPAGATE_PRITYP
Endif
Return

$INIT_PRITYP
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PRITYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.PRITYP=0 and fmet this.AGETATTRIBUTE("PRITYP","$isMandatory")="true"
 this.PRITYP = 1
Endif
Return
 
$CONTROL_PRITYP
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PRITYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PRITYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PRITYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PRITYP
[L]CURPRO = "PRITYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PRITYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PRITYP
[L]CURPRO = "PRITYP"
If this.PRITYP<0 or this.PRITYP>len(mess(0,243,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"243 ->"-num$(this.PRITYP)-mess(99,123,1)):  Return : # Local menu "243 -> Invalid option
Endif
Return

$_AOTHERS_PRITYP
[L]CURPRO = "PRITYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PRITYP
[L]CURPRO = "PRITYP"
Return

$PROPAGATE_PRITYP
this.isReadonly = 0
[L]CURPRO = "PRITYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PRITYP
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PRITYP"
$_LNKPRO_PRITYP
Return


####################################################################
# 37 : CNOREN Memo reason ( Field Miscellaneous table number)
####################################################################

$SET_CNOREN
If [L]_AOLDVAL<>this.CNOREN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CNOREN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CNOREN
 Gosub PROPAGATE_CNOREN
Endif
Return

$INIT_CNOREN
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "CNOREN"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"CNOREN",this.CNOREN,8)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CNOREN
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "CNOREN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CNOREN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CNOREN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CNOREN
[L]CURPRO = "CNOREN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CNOREN,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CNOREN
[L]CURPRO = "CNOREN"
If vireblc(this.CNOREN,2)<>vireblc(format$("K:20B",this.CNOREN),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CNOREN
[L]CURPRO = "CNOREN"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"CNOREN",this.CNOREN,8,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CNOREN
[L]CURPRO = "CNOREN"
Return

$PROPAGATE_CNOREN
this.isReadonly = 0
[L]CURPRO = "CNOREN"
Gosub _LNKPRO_CNOREN
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CNOREN
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "CNOREN"
$_LNKPRO_CNOREN
If vireblc(this.CNOREN,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 8;this.CNOREN
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CNOREN","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CNOREN","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 38 : DEP Settlement discount ( Field TDA 5)
####################################################################

$SET_DEP
If [L]_AOLDVAL<>this.DEP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DEP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DEP
 Gosub PROPAGATE_DEP
Endif
Return

$INIT_DEP
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "DEP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DEP
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "DEP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DEP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DEP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DEP
[L]CURPRO = "DEP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DEP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DEP
[L]CURPRO = "DEP"
If vireblc(this.DEP,2)<>vireblc(format$("K:5c",this.DEP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DEP
[L]CURPRO = "DEP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DEP
[L]CURPRO = "DEP"
If vireblc(this.DEP,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTDA.ACTRLREF(this,"DEP",this.DEP,this.DEP,this.DEP_LEG,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.DEP<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_DEP
this.isReadonly = 0
[L]CURPRO = "DEP"
Gosub _LNKPRO_DEP
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DEP
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "DEP"
$_LNKPRO_DEP
If vireblc(this.DEP,2)<>""
 # Link TABDEPAGIO
 Local File TABDEPAGIO [WTDA]
 Read [F:WTDA]TDA0 = this.DEP;this.DEP_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABDEPAGIO" & ZONE="SHOAXX" & IDENT1=[F:WTDA]DEP & IDENT2=[F:WTDA]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DEP","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABDEPAGIO" & ZONE="DESAXX" & IDENT1=[F:WTDA]DEP & IDENT2=[F:WTDA]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DEP","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTDA]
Endif
Return


####################################################################
# 39 : DEP_LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_DEP_LEG
If [L]_AOLDVAL<>this.DEP_LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DEP_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DEP_LEG
 Gosub PROPAGATE_DEP_LEG
Endif
Return

$INIT_DEP_LEG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "DEP_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"DEP_LEG",this.DEP_LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DEP_LEG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "DEP_LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DEP_LEG               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DEP_LEG               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DEP_LEG
[L]CURPRO = "DEP_LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DEP_LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DEP_LEG
[L]CURPRO = "DEP_LEG"
If vireblc(this.DEP_LEG,2)<>vireblc(format$("K:20B",this.DEP_LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DEP_LEG
[L]CURPRO = "DEP_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"DEP_LEG",this.DEP_LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DEP_LEG
[L]CURPRO = "DEP_LEG"
Return

$PROPAGATE_DEP_LEG
this.isReadonly = 0
[L]CURPRO = "DEP_LEG"
Gosub _LNKPRO_DEP_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DEP_LEG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "DEP_LEG"
$_LNKPRO_DEP_LEG
If vireblc(this.DEP_LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.DEP_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DEP_LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("DEP_LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 40 : LAN Language ( Field LAN 3)
####################################################################

$SET_LAN
If [L]_AOLDVAL<>this.LAN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LAN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LAN
 Gosub PROPAGATE_LAN
Endif
Return

$INIT_LAN
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "LAN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LAN
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "LAN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LAN                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LAN                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LAN
[L]CURPRO = "LAN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LAN,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LAN
[L]CURPRO = "LAN"
If vireblc(this.LAN,2)<>vireblc(format$("KTD:3B",this.LAN),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_LAN
[L]CURPRO = "LAN"
If vireblc(this.LAN,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPLAN.ACTRLREF(this,"LAN",this.LAN,this.LAN,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.LAN<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LAN
[L]CURPRO = "LAN"
Return

$PROPAGATE_LAN
this.isReadonly = 0
[L]CURPRO = "LAN"
Gosub _LNKPRO_LAN
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LAN
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "LAN"
$_LNKPRO_LAN
If vireblc(this.LAN,2)<>""
 # Link TABLAN
 Local File TABLAN [WTLA]
 Read [F:WTLA]TLA0 = this.LAN
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTSHO" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABLAN" & ZONE="INTDES" & IDENT1=[F:WTLA]LAN & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LAN","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTLA]
Endif
Return


####################################################################
# 42 : SIHTEX1 Invoice header text ( Field TXC 12)
####################################################################

$SET_SIHTEX1
If [L]_AOLDVAL<>this.SIHTEX1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SIHTEX1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SIHTEX1
 Gosub PROPAGATE_SIHTEX1
Endif
Return

$INIT_SIHTEX1
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SIHTEX1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SIHTEX1
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SIHTEX1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SIHTEX1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SIHTEX1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SIHTEX1
[L]CURPRO = "SIHTEX1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SIHTEX1,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SIHTEX1
[L]CURPRO = "SIHTEX1"
If vireblc(this.SIHTEX1,2)<>vireblc(format$("K:12X",this.SIHTEX1),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SIHTEX1
[L]CURPRO = "SIHTEX1"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SIHTEX1
[L]CURPRO = "SIHTEX1"
Return

$PROPAGATE_SIHTEX1
this.isReadonly = 0
[L]CURPRO = "SIHTEX1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SIHTEX1
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SIHTEX1"
$_LNKPRO_SIHTEX1
Return


####################################################################
# 43 : SIHTEX2 Invoice footer text ( Field TXC 12)
####################################################################

$SET_SIHTEX2
If [L]_AOLDVAL<>this.SIHTEX2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SIHTEX2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SIHTEX2
 Gosub PROPAGATE_SIHTEX2
Endif
Return

$INIT_SIHTEX2
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SIHTEX2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SIHTEX2
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SIHTEX2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SIHTEX2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SIHTEX2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SIHTEX2
[L]CURPRO = "SIHTEX2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SIHTEX2,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SIHTEX2
[L]CURPRO = "SIHTEX2"
If vireblc(this.SIHTEX2,2)<>vireblc(format$("K:12X",this.SIHTEX2),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SIHTEX2
[L]CURPRO = "SIHTEX2"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SIHTEX2
[L]CURPRO = "SIHTEX2"
Return

$PROPAGATE_SIHTEX2
this.isReadonly = 0
[L]CURPRO = "SIHTEX2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SIHTEX2
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SIHTEX2"
$_LNKPRO_SIHTEX2
Return


####################################################################
# 44 : BETFCY Intersites ( Field Local menu number 1)
####################################################################

$SET_BETFCY
If [L]_AOLDVAL<>this.BETFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BETFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BETFCY
 Gosub PROPAGATE_BETFCY
Endif
Return

$INIT_BETFCY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "BETFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.BETFCY=0 and fmet this.AGETATTRIBUTE("BETFCY","$isMandatory")="true"
 this.BETFCY = 1
Endif
Return
 
$CONTROL_BETFCY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "BETFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BETFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BETFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BETFCY
[L]CURPRO = "BETFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BETFCY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BETFCY
[L]CURPRO = "BETFCY"
If this.BETFCY<0 or this.BETFCY>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.BETFCY)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_BETFCY
[L]CURPRO = "BETFCY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BETFCY
[L]CURPRO = "BETFCY"
Return

$PROPAGATE_BETFCY
this.isReadonly = 0
[L]CURPRO = "BETFCY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BETFCY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "BETFCY"
$_LNKPRO_BETFCY
Return


####################################################################
# 45 : BETCPY Intercompany ( Field Local menu number 1)
####################################################################

$SET_BETCPY
If [L]_AOLDVAL<>this.BETCPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BETCPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BETCPY
 Gosub PROPAGATE_BETCPY
Endif
Return

$INIT_BETCPY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "BETCPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.BETCPY=0 and fmet this.AGETATTRIBUTE("BETCPY","$isMandatory")="true"
 this.BETCPY = 1
Endif
Return
 
$CONTROL_BETCPY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "BETCPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BETCPY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BETCPY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BETCPY
[L]CURPRO = "BETCPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BETCPY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BETCPY
[L]CURPRO = "BETCPY"
If this.BETCPY<0 or this.BETCPY>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.BETCPY)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_BETCPY
[L]CURPRO = "BETCPY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BETCPY
[L]CURPRO = "BETCPY"
Return

$PROPAGATE_BETCPY
this.isReadonly = 0
[L]CURPRO = "BETCPY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BETCPY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "BETCPY"
$_LNKPRO_BETCPY
Return


####################################################################
# 46 : ORIFCY Original site ( Field FCY 5)
####################################################################

$SET_ORIFCY
If [L]_AOLDVAL<>this.ORIFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ORIFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ORIFCY
 Gosub PROPAGATE_ORIFCY
Endif
Return

$INIT_ORIFCY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "ORIFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ORIFCY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "ORIFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ORIFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ORIFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ORIFCY
[L]CURPRO = "ORIFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ORIFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ORIFCY
[L]CURPRO = "ORIFCY"
If vireblc(this.ORIFCY,2)<>vireblc(format$("K:5c",this.ORIFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ORIFCY
[L]CURPRO = "ORIFCY"
If vireblc(this.ORIFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"ORIFCY",this.ORIFCY,this.ORIFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ORIFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ORIFCY
[L]CURPRO = "ORIFCY"
Return

$PROPAGATE_ORIFCY
this.isReadonly = 0
[L]CURPRO = "ORIFCY"
Gosub _LNKPRO_ORIFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ORIFCY
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "ORIFCY"
$_LNKPRO_ORIFCY
If vireblc(this.ORIFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.ORIFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("ORIFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("ORIFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 47 : PIHNUM Purchase invoice no. ( Field VCR 20)
####################################################################

$SET_PIHNUM
If [L]_AOLDVAL<>this.PIHNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PIHNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PIHNUM
 Gosub PROPAGATE_PIHNUM
Endif
Return

$INIT_PIHNUM
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PIHNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PIHNUM
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PIHNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PIHNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PIHNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PIHNUM
[L]CURPRO = "PIHNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PIHNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PIHNUM
[L]CURPRO = "PIHNUM"
If vireblc(this.PIHNUM,2)<>vireblc(format$("K:20X",this.PIHNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PIHNUM
[L]CURPRO = "PIHNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PIHNUM
[L]CURPRO = "PIHNUM"
Return

$PROPAGATE_PIHNUM
this.isReadonly = 0
[L]CURPRO = "PIHNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PIHNUM
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PIHNUM"
$_LNKPRO_PIHNUM
Return


####################################################################
# 49 : LINNBR Number of lines ( Field C 4)
####################################################################

$SET_LINNBR
If [L]_AOLDVAL<>this.LINNBR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LINNBR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LINNBR
 Gosub PROPAGATE_LINNBR
Endif
Return

$INIT_LINNBR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "LINNBR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LINNBR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "LINNBR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LINNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LINNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LINNBR
[L]CURPRO = "LINNBR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.LINNBR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LINNBR
[L]CURPRO = "LINNBR"
Return

$_AOTHERS_LINNBR
[L]CURPRO = "LINNBR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LINNBR
[L]CURPRO = "LINNBR"
Return

$PROPAGATE_LINNBR
this.isReadonly = 0
[L]CURPRO = "LINNBR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LINNBR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "LINNBR"
$_LNKPRO_LINNBR
Return


####################################################################
# 52 : PAM_LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_PAM_LEG
If [L]_AOLDVAL<>this.PAM_LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PAM_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PAM_LEG
 Gosub PROPAGATE_PAM_LEG
Endif
Return

$INIT_PAM_LEG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PAM_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"PAM_LEG",this.PAM_LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PAM_LEG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PAM_LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PAM_LEG               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PAM_LEG               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PAM_LEG
[L]CURPRO = "PAM_LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PAM_LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PAM_LEG
[L]CURPRO = "PAM_LEG"
If vireblc(this.PAM_LEG,2)<>vireblc(format$("K:20B",this.PAM_LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PAM_LEG
[L]CURPRO = "PAM_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"PAM_LEG",this.PAM_LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PAM_LEG
[L]CURPRO = "PAM_LEG"
Return

$PROPAGATE_PAM_LEG
this.isReadonly = 0
[L]CURPRO = "PAM_LEG"
Gosub _LNKPRO_PAM_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PAM_LEG
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "PAM_LEG"
$_LNKPRO_PAM_LEG
If vireblc(this.PAM_LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.PAM_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PAM_LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PAM_LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 53 : COPNBR Invoice copies ( Field C 1)
####################################################################

$SET_COPNBR
If [L]_AOLDVAL<>this.COPNBR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_COPNBR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.COPNBR
 Gosub PROPAGATE_COPNBR
Endif
Return

$INIT_COPNBR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "COPNBR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_COPNBR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "COPNBR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_COPNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_COPNBR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_COPNBR
[L]CURPRO = "COPNBR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.COPNBR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_COPNBR
[L]CURPRO = "COPNBR"
Return

$_AOTHERS_COPNBR
[L]CURPRO = "COPNBR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_COPNBR
[L]CURPRO = "COPNBR"
Return

$PROPAGATE_COPNBR
this.isReadonly = 0
[L]CURPRO = "COPNBR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_COPNBR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "COPNBR"
$_LNKPRO_COPNBR
Return


####################################################################
# 54 : COPNBE Credit memo copy no. ( Field C 1)
####################################################################

$SET_COPNBE
If [L]_AOLDVAL<>this.COPNBE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_COPNBE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.COPNBE
 Gosub PROPAGATE_COPNBE
Endif
Return

$INIT_COPNBE
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "COPNBE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_COPNBE
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "COPNBE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_COPNBE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_COPNBE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_COPNBE
[L]CURPRO = "COPNBE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.COPNBE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_COPNBE
[L]CURPRO = "COPNBE"
Return

$_AOTHERS_COPNBE
[L]CURPRO = "COPNBE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_COPNBE
[L]CURPRO = "COPNBE"
Return

$PROPAGATE_COPNBE
this.isReadonly = 0
[L]CURPRO = "COPNBE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_COPNBE
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "COPNBE"
$_LNKPRO_COPNBE
Return


####################################################################
# 55 : TRSCOD Movement code ( Field Miscellaneous table number)
####################################################################

$SET_TRSCOD
If [L]_AOLDVAL<>this.TRSCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TRSCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TRSCOD
 Gosub PROPAGATE_TRSCOD
Endif
Return

$INIT_TRSCOD
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "TRSCOD"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"TRSCOD",this.TRSCOD,14)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TRSCOD
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "TRSCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TRSCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TRSCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TRSCOD
[L]CURPRO = "TRSCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TRSCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TRSCOD
[L]CURPRO = "TRSCOD"
If vireblc(this.TRSCOD,2)<>vireblc(format$("K:20B",this.TRSCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TRSCOD
[L]CURPRO = "TRSCOD"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"TRSCOD",this.TRSCOD,14,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TRSCOD
[L]CURPRO = "TRSCOD"
Return

$PROPAGATE_TRSCOD
this.isReadonly = 0
[L]CURPRO = "TRSCOD"
Gosub _LNKPRO_TRSCOD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TRSCOD
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "TRSCOD"
$_LNKPRO_TRSCOD
If vireblc(this.TRSCOD,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 14;this.TRSCOD
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TRSCOD","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TRSCOD","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 56 : ENTCOD Stock auto journal ( Field GAU 5)
####################################################################

$SET_ENTCOD
If [L]_AOLDVAL<>this.ENTCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ENTCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ENTCOD
 Gosub PROPAGATE_ENTCOD
Endif
Return

$INIT_ENTCOD
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "ENTCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ENTCOD
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "ENTCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ENTCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ENTCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ENTCOD
[L]CURPRO = "ENTCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ENTCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ENTCOD
[L]CURPRO = "ENTCOD"
If vireblc(this.ENTCOD,2)<>vireblc(format$("K:5c",this.ENTCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ENTCOD
[L]CURPRO = "ENTCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ENTCOD
[L]CURPRO = "ENTCOD"
Return

$PROPAGATE_ENTCOD
this.isReadonly = 0
[L]CURPRO = "ENTCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ENTCOD
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "ENTCOD"
$_LNKPRO_ENTCOD
Return


####################################################################
# 57 : SRGLOCDEF Dock location ( Field LOC 10)
####################################################################

$SET_SRGLOCDEF
If [L]_AOLDVAL<>this.SRGLOCDEF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SRGLOCDEF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SRGLOCDEF
 Gosub PROPAGATE_SRGLOCDEF
Endif
Return

$INIT_SRGLOCDEF
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SRGLOCDEF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SRGLOCDEF
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SRGLOCDEF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SRGLOCDEF             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SRGLOCDEF             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SRGLOCDEF
[L]CURPRO = "SRGLOCDEF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SRGLOCDEF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SRGLOCDEF
[L]CURPRO = "SRGLOCDEF"
If vireblc(this.SRGLOCDEF,2)<>vireblc(format$("K:10c",this.SRGLOCDEF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SRGLOCDEF
[L]CURPRO = "SRGLOCDEF"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SRGLOCDEF
[L]CURPRO = "SRGLOCDEF"
If vireblc(this.SRGLOCDEF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPLOC.ACTRLREF(this,"SRGLOCDEF",this.SRGLOCDEF,this.STOFCY,this.SRGLOCDEF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.SRGLOCDEF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_SRGLOCDEF
this.isReadonly = 0
[L]CURPRO = "SRGLOCDEF"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SRGLOCDEF
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "SRGLOCDEF"
$_LNKPRO_SRGLOCDEF
Return


####################################################################
# 58 : EECNAT Transaction nature ( Field TEC 5)
####################################################################

$SET_EECNAT
If [L]_AOLDVAL<>this.EECNAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECNAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECNAT
 Gosub PROPAGATE_EECNAT
Endif
Return

$INIT_EECNAT
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECNAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECNAT
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECNAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECNAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECNAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECNAT
[L]CURPRO = "EECNAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECNAT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECNAT
[L]CURPRO = "EECNAT"
If vireblc(this.EECNAT,2)<>vireblc(format$("K:5c",this.EECNAT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECNAT
[L]CURPRO = "EECNAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECNAT
[L]CURPRO = "EECNAT"
Return

$PROPAGATE_EECNAT
this.isReadonly = 0
[L]CURPRO = "EECNAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECNAT
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECNAT"
$_LNKPRO_EECNAT
Return


####################################################################
# 59 : EECNATR Transaction nature ( Field TEC 5)
####################################################################

$SET_EECNATR
If [L]_AOLDVAL<>this.EECNATR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECNATR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECNATR
 Gosub PROPAGATE_EECNATR
Endif
Return

$INIT_EECNATR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECNATR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECNATR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECNATR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECNATR               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECNATR               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECNATR
[L]CURPRO = "EECNATR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECNATR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECNATR
[L]CURPRO = "EECNATR"
If vireblc(this.EECNATR,2)<>vireblc(format$("K:5c",this.EECNATR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECNATR
[L]CURPRO = "EECNATR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECNATR
[L]CURPRO = "EECNATR"
Return

$PROPAGATE_EECNATR
this.isReadonly = 0
[L]CURPRO = "EECNATR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECNATR
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECNATR"
$_LNKPRO_EECNATR
Return


####################################################################
# 60 : EECSCH EU rule ( Field TSC 5)
####################################################################

$SET_EECSCH
If [L]_AOLDVAL<>this.EECSCH
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECSCH
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECSCH
 Gosub PROPAGATE_EECSCH
Endif
Return

$INIT_EECSCH
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECSCH"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECSCH
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECSCH"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECSCH                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECSCH                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECSCH
[L]CURPRO = "EECSCH"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECSCH,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECSCH
[L]CURPRO = "EECSCH"
If vireblc(this.EECSCH,2)<>vireblc(format$("K:5c",this.EECSCH),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECSCH
[L]CURPRO = "EECSCH"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECSCH
[L]CURPRO = "EECSCH"
Return

$PROPAGATE_EECSCH
this.isReadonly = 0
[L]CURPRO = "EECSCH"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECSCH
Gosub DECLARE_VAR From WMC0SINVOICEV
[L]CURPRO = "EECSCH"
$_LNKPRO_EECSCH
Return




