#<AdxTL>@(#)0.0.0.0 $Revision$Class Work orders - products
# Sage X3 supervisor
## ACLA-CLASSE ## MFGITM
# 2018-03-26 00:32:58 079


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : MFGNUM Work order number ( Field VCR 20)
####################################################################

$SET_MFGNUM
If [L]_AOLDVAL<>this.MFGNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGNUM
 Gosub PROPAGATE_MFGNUM
Endif
Return

$INIT_MFGNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGNUM
[L]CURPRO = "MFGNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.MFGNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGNUM
[L]CURPRO = "MFGNUM"
If vireblc(this.MFGNUM,2)<>vireblc(format$("K:20X",this.MFGNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_MFGNUM
[L]CURPRO = "MFGNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGNUM
[L]CURPRO = "MFGNUM"
Return

$PROPAGATE_MFGNUM
this.isReadonly = 0
[L]CURPRO = "MFGNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGNUM"
$_LNKPRO_MFGNUM
Return


####################################################################
# 2 : MFGLIN Line no. ( Field L 8)
####################################################################

$SET_MFGLIN
If [L]_AOLDVAL<>this.MFGLIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGLIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGLIN
 Gosub PROPAGATE_MFGLIN
Endif
Return

$INIT_MFGLIN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGLIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGLIN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGLIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGLIN
[L]CURPRO = "MFGLIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MFGLIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGLIN
[L]CURPRO = "MFGLIN"
Return

$_AOTHERS_MFGLIN
[L]CURPRO = "MFGLIN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGLIN
[L]CURPRO = "MFGLIN"
Return

$PROPAGATE_MFGLIN
this.isReadonly = 0
[L]CURPRO = "MFGLIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGLIN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGLIN"
$_LNKPRO_MFGLIN
Return


####################################################################
# 3 : ITMREF Product ( Field ITM 20)
####################################################################

$SET_ITMREF
If [L]_AOLDVAL<>this.ITMREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMREF
 Gosub PROPAGATE_ITMREF
Endif
Return

$INIT_ITMREF
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMREF
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMREF
[L]CURPRO = "ITMREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>vireblc(format$("K:20c",this.ITMREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITM.ACTRLREF(this,"ITMREF",this.ITMREF,this.ITMREF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ITMREF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMREF
[L]CURPRO = "ITMREF"
Return

$PROPAGATE_ITMREF
this.isReadonly = 0
[L]CURPRO = "ITMREF"
Gosub _LNKPRO_ITMREF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMREF
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMREF"
$_LNKPRO_ITMREF
If vireblc(this.ITMREF,2)<>""
 # Link ITMMASTER
 Local File ITMMASTER [WITM]
 Read [F:WITM]ITM0 = this.ITMREF
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMMASTER" & ZONE="DES1AXX" & IDENT1=[F:WITM]ITMREF & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITM]
Endif
Return

$_ALOADATTRIBUTE_ITMREF
[L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$isMandatory","true")
Return


####################################################################
# 4 : ITMTYP Revenue type ( Field Local menu number 2301)
####################################################################

$SET_ITMTYP
If [L]_AOLDVAL<>this.ITMTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMTYP
 Gosub PROPAGATE_ITMTYP
Endif
Return

$INIT_ITMTYP
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.ITMTYP=0 and fmet this.AGETATTRIBUTE("ITMTYP","$isMandatory")="true"
 this.ITMTYP = 1
Endif
Return
 
$CONTROL_ITMTYP
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMTYP
[L]CURPRO = "ITMTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ITMTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMTYP
[L]CURPRO = "ITMTYP"
If this.ITMTYP<0 or this.ITMTYP>len(mess(0,2301,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2301 ->"-num$(this.ITMTYP)-mess(99,123,1)):  Return : # Local menu "2301 -> Invalid option
Endif
Return

$_AOTHERS_ITMTYP
[L]CURPRO = "ITMTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMTYP
[L]CURPRO = "ITMTYP"
Return

$PROPAGATE_ITMTYP
this.isReadonly = 0
[L]CURPRO = "ITMTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMTYP
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMTYP"
$_LNKPRO_ITMTYP
Return


####################################################################
# 5 : ITMLIN WO line ( Field L 8)
####################################################################

$SET_ITMLIN
If [L]_AOLDVAL<>this.ITMLIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMLIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMLIN
 Gosub PROPAGATE_ITMLIN
Endif
Return

$INIT_ITMLIN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMLIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMLIN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMLIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMLIN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMLIN
[L]CURPRO = "ITMLIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ITMLIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMLIN
[L]CURPRO = "ITMLIN"
Return

$_AOTHERS_ITMLIN
[L]CURPRO = "ITMLIN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMLIN
[L]CURPRO = "ITMLIN"
Return

$PROPAGATE_ITMLIN
this.isReadonly = 0
[L]CURPRO = "ITMLIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMLIN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ITMLIN"
$_LNKPRO_ITMLIN
Return


####################################################################
# 6 : MFGSTA Work order status ( Field Local menu number 317)
####################################################################

$SET_MFGSTA
If [L]_AOLDVAL<>this.MFGSTA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGSTA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGSTA
 Gosub PROPAGATE_MFGSTA
Endif
Return

$INIT_MFGSTA
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGSTA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.MFGSTA=0 and fmet this.AGETATTRIBUTE("MFGSTA","$isMandatory")="true"
 this.MFGSTA = 1
Endif
Return
 
$CONTROL_MFGSTA
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGSTA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGSTA                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGSTA                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGSTA
[L]CURPRO = "MFGSTA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MFGSTA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGSTA
[L]CURPRO = "MFGSTA"
If this.MFGSTA<0 or this.MFGSTA>len(mess(0,317,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"317 ->"-num$(this.MFGSTA)-mess(99,123,1)):  Return : # Local menu "317 -> Invalid option
Endif
Return

$_AOTHERS_MFGSTA
[L]CURPRO = "MFGSTA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGSTA
[L]CURPRO = "MFGSTA"
Return

$PROPAGATE_MFGSTA
this.isReadonly = 0
[L]CURPRO = "MFGSTA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGSTA
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGSTA"
$_LNKPRO_MFGSTA
Return


####################################################################
# 7 : PLNFCY Planning site ( Field FCY 5)
####################################################################

$SET_PLNFCY
If [L]_AOLDVAL<>this.PLNFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PLNFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PLNFCY
 Gosub PROPAGATE_PLNFCY
Endif
Return

$INIT_PLNFCY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "PLNFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PLNFCY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "PLNFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PLNFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PLNFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PLNFCY
[L]CURPRO = "PLNFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PLNFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PLNFCY
[L]CURPRO = "PLNFCY"
If vireblc(this.PLNFCY,2)<>vireblc(format$("K:5c",this.PLNFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PLNFCY
[L]CURPRO = "PLNFCY"
If vireblc(this.PLNFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"PLNFCY",this.PLNFCY,this.PLNFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PLNFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PLNFCY
[L]CURPRO = "PLNFCY"
Return

$PROPAGATE_PLNFCY
this.isReadonly = 0
[L]CURPRO = "PLNFCY"
Gosub _LNKPRO_PLNFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PLNFCY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "PLNFCY"
$_LNKPRO_PLNFCY
If vireblc(this.PLNFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.PLNFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PLNFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PLNFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return

$_ALOADATTRIBUTE_PLNFCY
[L]ASTATUS = fmet this.ASETATTRIBUTE("PLNFCY","$isMandatory","true")
Return


####################################################################
# 8 : MFGFCY Production site ( Field FCY 5)
####################################################################

$SET_MFGFCY
If [L]_AOLDVAL<>this.MFGFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGFCY
 Gosub PROPAGATE_MFGFCY
Endif
Return

$INIT_MFGFCY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGFCY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGFCY
[L]CURPRO = "MFGFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.MFGFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGFCY
[L]CURPRO = "MFGFCY"
If vireblc(this.MFGFCY,2)<>vireblc(format$("K:5c",this.MFGFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_MFGFCY
[L]CURPRO = "MFGFCY"
If vireblc(this.MFGFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"MFGFCY",this.MFGFCY,this.MFGFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.MFGFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGFCY
[L]CURPRO = "MFGFCY"
Return

$PROPAGATE_MFGFCY
this.isReadonly = 0
[L]CURPRO = "MFGFCY"
Gosub _LNKPRO_MFGFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGFCY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGFCY"
$_LNKPRO_MFGFCY
If vireblc(this.MFGFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.MFGFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("MFGFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("MFGFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return

$_ALOADATTRIBUTE_MFGFCY
[L]ASTATUS = fmet this.ASETATTRIBUTE("MFGFCY","$isMandatory","true")
Return


####################################################################
# 9 : WIPNUM WIP order number ( Field VCR 20)
####################################################################

$SET_WIPNUM
If [L]_AOLDVAL<>this.WIPNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_WIPNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.WIPNUM
 Gosub PROPAGATE_WIPNUM
Endif
Return

$INIT_WIPNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "WIPNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_WIPNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "WIPNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_WIPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_WIPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_WIPNUM
[L]CURPRO = "WIPNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.WIPNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_WIPNUM
[L]CURPRO = "WIPNUM"
If vireblc(this.WIPNUM,2)<>vireblc(format$("K:20X",this.WIPNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_WIPNUM
[L]CURPRO = "WIPNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_WIPNUM
[L]CURPRO = "WIPNUM"
Return

$PROPAGATE_WIPNUM
this.isReadonly = 0
[L]CURPRO = "WIPNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_WIPNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "WIPNUM"
$_LNKPRO_WIPNUM
Return


####################################################################
# 10 : TCLCOD Product category ( Field ITG 5)
####################################################################

$SET_TCLCOD
If [L]_AOLDVAL<>this.TCLCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TCLCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TCLCOD
 Gosub PROPAGATE_TCLCOD
Endif
Return

$INIT_TCLCOD
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TCLCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TCLCOD
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TCLCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TCLCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TCLCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TCLCOD
[L]CURPRO = "TCLCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TCLCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TCLCOD
[L]CURPRO = "TCLCOD"
If vireblc(this.TCLCOD,2)<>vireblc(format$("K:5c",this.TCLCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TCLCOD
[L]CURPRO = "TCLCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TCLCOD
[L]CURPRO = "TCLCOD"
If vireblc(this.TCLCOD,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITG.ACTRLREF(this,"TCLCOD",this.TCLCOD,this.TCLCOD,this.MFGFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.TCLCOD<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_TCLCOD
this.isReadonly = 0
[L]CURPRO = "TCLCOD"
Gosub _LNKPRO_TCLCOD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TCLCOD
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TCLCOD"
$_LNKPRO_TCLCOD
If vireblc(this.TCLCOD,2)<>""
 # Link ITMCATEG
 Local File ITMCATEG [WITG]
 Read [F:WITG]ITG1 = this.TCLCOD;this.MFGFCY
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMCATEG" & ZONE="TCLSHOAXX" & IDENT1=[F:WITG]TCLCOD & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TCLCOD","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMCATEG" & ZONE="TCLAXX" & IDENT1=[F:WITG]TCLCOD & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TCLCOD","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITG]
Endif
Return

$_ALOADATTRIBUTE_TCLCOD
[L]ASTATUS = fmet this.ASETATTRIBUTE("TCLCOD","$isMandatory","true")
Return


####################################################################
# 11 : TSICODADI Miscellaneous table ( Field C 4)
####################################################################

$SET_TSICODADI
If [L]_AOLDVAL<>this.TSICODADI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TSICODADI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TSICODADI
 Gosub PROPAGATE_TSICODADI
Endif
Return

$INIT_TSICODADI
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TSICODADI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TSICODADI
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TSICODADI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TSICODADI             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TSICODADI             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TSICODADI
[L]CURPRO = "TSICODADI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TSICODADI=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TSICODADI
[L]CURPRO = "TSICODADI"
Return

$_AOTHERS_TSICODADI
[L]CURPRO = "TSICODADI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TSICODADI
[L]CURPRO = "TSICODADI"
Return

$PROPAGATE_TSICODADI
this.isReadonly = 0
[L]CURPRO = "TSICODADI"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TSICODADI
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TSICODADI"
$_LNKPRO_TSICODADI
Return


####################################################################
# 12 : TSICOD Statistical group ( Field Miscellaneous table number)
####################################################################

$SET_TSICOD
If [L]_AOLDVAL<>this.TSICOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TSICOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TSICOD
 Gosub PROPAGATE_TSICOD
Endif
Return

$INIT_TSICOD
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TSICOD"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"TSICOD",this.TSICOD,this.TSICODADI)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TSICOD
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TSICOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TSICOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TSICOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TSICOD
[L]CURPRO = "TSICOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TSICOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TSICOD
[L]CURPRO = "TSICOD"
If vireblc(this.TSICOD,2)<>vireblc(format$("K:20B",this.TSICOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TSICOD
[L]CURPRO = "TSICOD"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"TSICOD",this.TSICOD,this.TSICODADI,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TSICOD
[L]CURPRO = "TSICOD"
Return

$PROPAGATE_TSICOD
this.isReadonly = 0
[L]CURPRO = "TSICOD"
Gosub _LNKPRO_TSICOD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TSICOD
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "TSICOD"
$_LNKPRO_TSICOD
If vireblc(this.TSICOD,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = this.TSICODADI;this.TSICOD
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TSICOD","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("TSICOD","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 13 : ABCCLS ABC class ( Field Local menu number 212)
####################################################################

$SET_ABCCLS
If [L]_AOLDVAL<>this.ABCCLS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ABCCLS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ABCCLS
 Gosub PROPAGATE_ABCCLS
Endif
Return

$INIT_ABCCLS
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ABCCLS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.ABCCLS=0 and fmet this.AGETATTRIBUTE("ABCCLS","$isMandatory")="true"
 this.ABCCLS = 1
Endif
Return
 
$CONTROL_ABCCLS
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ABCCLS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ABCCLS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ABCCLS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ABCCLS
[L]CURPRO = "ABCCLS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ABCCLS=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ABCCLS
[L]CURPRO = "ABCCLS"
If this.ABCCLS<0 or this.ABCCLS>len(mess(0,212,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"212 ->"-num$(this.ABCCLS)-mess(99,123,1)):  Return : # Local menu "212 -> Invalid option
Endif
Return

$_AOTHERS_ABCCLS
[L]CURPRO = "ABCCLS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ABCCLS
[L]CURPRO = "ABCCLS"
Return

$PROPAGATE_ABCCLS
this.isReadonly = 0
[L]CURPRO = "ABCCLS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ABCCLS
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ABCCLS"
$_LNKPRO_ABCCLS
Return


####################################################################
# 14 : PJT Project ( Field PJT 40)
####################################################################

$SET_PJT
If [L]_AOLDVAL<>this.PJT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PJT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PJT
 Gosub PROPAGATE_PJT
Endif
Return

$INIT_PJT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "PJT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PJT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "PJT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PJT                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PJT                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PJT
[L]CURPRO = "PJT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PJT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PJT
[L]CURPRO = "PJT"
If vireblc(this.PJT,2)<>vireblc(format$("K:40X",this.PJT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PJT
[L]CURPRO = "PJT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PJT
[L]CURPRO = "PJT"
Return

$PROPAGATE_PJT
this.isReadonly = 0
[L]CURPRO = "PJT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PJT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "PJT"
$_LNKPRO_PJT
Return


####################################################################
# 15 : BPCTYPDEN Ship-to type (site, customer) ( Field Local menu number 722)
####################################################################

$SET_BPCTYPDEN
If [L]_AOLDVAL<>this.BPCTYPDEN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPCTYPDEN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPCTYPDEN
 Gosub PROPAGATE_BPCTYPDEN
Endif
Return

$INIT_BPCTYPDEN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BPCTYPDEN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.BPCTYPDEN=0 and fmet this.AGETATTRIBUTE("BPCTYPDEN","$isMandatory")="true"
 this.BPCTYPDEN = 1
Endif
Return
 
$CONTROL_BPCTYPDEN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BPCTYPDEN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPCTYPDEN             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPCTYPDEN             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPCTYPDEN
[L]CURPRO = "BPCTYPDEN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BPCTYPDEN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPCTYPDEN
[L]CURPRO = "BPCTYPDEN"
If this.BPCTYPDEN<0 or this.BPCTYPDEN>len(mess(0,722,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"722 ->"-num$(this.BPCTYPDEN)-mess(99,123,1)):  Return : # Local menu "722 -> Invalid option
Endif
Return

$_AOTHERS_BPCTYPDEN
[L]CURPRO = "BPCTYPDEN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPCTYPDEN
[L]CURPRO = "BPCTYPDEN"
Return

$PROPAGATE_BPCTYPDEN
this.isReadonly = 0
[L]CURPRO = "BPCTYPDEN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPCTYPDEN
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BPCTYPDEN"
$_LNKPRO_BPCTYPDEN
Return


####################################################################
# 16 : BPCNUM Destination ( Field BPR 15)
####################################################################

$SET_BPCNUM
If [L]_AOLDVAL<>this.BPCNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPCNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPCNUM
 Gosub PROPAGATE_BPCNUM
Endif
Return

$INIT_BPCNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BPCNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPCNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BPCNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPCNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPCNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPCNUM
[L]CURPRO = "BPCNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPCNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPCNUM
[L]CURPRO = "BPCNUM"
If vireblc(this.BPCNUM,2)<>vireblc(format$("K:15c",this.BPCNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPCNUM
[L]CURPRO = "BPCNUM"
If vireblc(this.BPCNUM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPCNUM",this.BPCNUM,this.BPCNUM,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPCNUM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPCNUM
[L]CURPRO = "BPCNUM"
Return

$PROPAGATE_BPCNUM
this.isReadonly = 0
[L]CURPRO = "BPCNUM"
Gosub _LNKPRO_BPCNUM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPCNUM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BPCNUM"
$_LNKPRO_BPCNUM
If vireblc(this.BPCNUM,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPCNUM
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCNUM","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCNUM","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return


####################################################################
# 17 : MFGDES WO description ( Field DES 30)
####################################################################

$SET_MFGDES
If [L]_AOLDVAL<>this.MFGDES
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGDES
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGDES
 Gosub PROPAGATE_MFGDES
Endif
Return

$INIT_MFGDES
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGDES"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGDES
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGDES"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGDES                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGDES                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGDES
[L]CURPRO = "MFGDES"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.MFGDES,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGDES
[L]CURPRO = "MFGDES"
If vireblc(this.MFGDES,2)<>vireblc(format$("K:30X",this.MFGDES),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_MFGDES
[L]CURPRO = "MFGDES"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGDES
[L]CURPRO = "MFGDES"
Return

$PROPAGATE_MFGDES
this.isReadonly = 0
[L]CURPRO = "MFGDES"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGDES
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "MFGDES"
$_LNKPRO_MFGDES
Return


####################################################################
# 18 : STRDAT Start date ( Field D)
####################################################################

$SET_STRDAT
If [L]_AOLDVAL<>this.STRDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STRDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STRDAT
 Gosub PROPAGATE_STRDAT
Endif
Return

$INIT_STRDAT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "STRDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STRDAT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "STRDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STRDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STRDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STRDAT
[L]CURPRO = "STRDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STRDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STRDAT
[L]CURPRO = "STRDAT"
Return

$_AOTHERS_STRDAT
[L]CURPRO = "STRDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STRDAT
[L]CURPRO = "STRDAT"
Return

$PROPAGATE_STRDAT
this.isReadonly = 0
[L]CURPRO = "STRDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STRDAT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "STRDAT"
$_LNKPRO_STRDAT
Return


####################################################################
# 19 : ENDDAT End date ( Field D)
####################################################################

$SET_ENDDAT
If [L]_AOLDVAL<>this.ENDDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ENDDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ENDDAT
 Gosub PROPAGATE_ENDDAT
Endif
Return

$INIT_ENDDAT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ENDDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ENDDAT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ENDDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ENDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ENDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ENDDAT
[L]CURPRO = "ENDDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.ENDDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ENDDAT
[L]CURPRO = "ENDDAT"
Return

$_AOTHERS_ENDDAT
[L]CURPRO = "ENDDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ENDDAT
[L]CURPRO = "ENDDAT"
Return

$PROPAGATE_ENDDAT
this.isReadonly = 0
[L]CURPRO = "ENDDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ENDDAT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "ENDDAT"
$_LNKPRO_ENDDAT
Return


####################################################################
# 20 : UOM Release unit ( Field UOM 3)
####################################################################

$SET_UOM
If [L]_AOLDVAL<>this.UOM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UOM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UOM
 Gosub PROPAGATE_UOM
Endif
Return

$INIT_UOM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UOM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UOM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UOM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UOM
[L]CURPRO = "UOM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.UOM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UOM
[L]CURPRO = "UOM"
If vireblc(this.UOM,2)<>vireblc(format$("K:3X",this.UOM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_UOM
[L]CURPRO = "UOM"
If vireblc(this.UOM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"UOM",this.UOM,this.UOM,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.UOM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UOM
[L]CURPRO = "UOM"
Return

$PROPAGATE_UOM
this.isReadonly = 0
[L]CURPRO = "UOM"
Gosub _LNKPRO_UOM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UOM
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOM"
$_LNKPRO_UOM
If vireblc(this.UOM,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.UOM
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return

$_ALOADATTRIBUTE_UOM
[L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$isMandatory","true")
Return


####################################################################
# 21 : UOMEXTQTY Release quantity ( Field QTY 0)
####################################################################

$SET_UOMEXTQTY
If [L]_AOLDVAL<>this.UOMEXTQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UOMEXTQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UOMEXTQTY
 Gosub PROPAGATE_UOMEXTQTY
Endif
Return

$INIT_UOMEXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOMEXTQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UOMEXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOMEXTQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UOMEXTQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UOMEXTQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UOMEXTQTY
[L]CURPRO = "UOMEXTQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UOMEXTQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UOMEXTQTY
[L]CURPRO = "UOMEXTQTY"
Return

$_AOTHERS_UOMEXTQTY
[L]CURPRO = "UOMEXTQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UOMEXTQTY
[L]CURPRO = "UOMEXTQTY"
Return

$PROPAGATE_UOMEXTQTY
this.isReadonly = 0
[L]CURPRO = "UOMEXTQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UOMEXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOMEXTQTY"
$_LNKPRO_UOMEXTQTY
Return


####################################################################
# 22 : UOMSTUCOE STK conversion ( Field COE 0)
####################################################################

$SET_UOMSTUCOE
If [L]_AOLDVAL<>this.UOMSTUCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UOMSTUCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UOMSTUCOE
 Gosub PROPAGATE_UOMSTUCOE
Endif
Return

$INIT_UOMSTUCOE
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOMSTUCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UOMSTUCOE
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOMSTUCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UOMSTUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UOMSTUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UOMSTUCOE
[L]CURPRO = "UOMSTUCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UOMSTUCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UOMSTUCOE
[L]CURPRO = "UOMSTUCOE"
Return

$_AOTHERS_UOMSTUCOE
[L]CURPRO = "UOMSTUCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UOMSTUCOE
[L]CURPRO = "UOMSTUCOE"
Return

$PROPAGATE_UOMSTUCOE
this.isReadonly = 0
[L]CURPRO = "UOMSTUCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UOMSTUCOE
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "UOMSTUCOE"
$_LNKPRO_UOMSTUCOE
Return


####################################################################
# 23 : STU Stock unit ( Field UOM 3)
####################################################################

$SET_STU
If [L]_AOLDVAL<>this.STU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STU
 Gosub PROPAGATE_STU
Endif
Return

$INIT_STU
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "STU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STU
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "STU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STU
[L]CURPRO = "STU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.STU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STU
[L]CURPRO = "STU"
If vireblc(this.STU,2)<>vireblc(format$("K:3X",this.STU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_STU
[L]CURPRO = "STU"
If vireblc(this.STU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"STU",this.STU,this.STU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.STU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STU
[L]CURPRO = "STU"
Return

$PROPAGATE_STU
this.isReadonly = 0
[L]CURPRO = "STU"
Gosub _LNKPRO_STU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STU
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "STU"
$_LNKPRO_STU
If vireblc(this.STU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.STU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("STU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("STU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("STU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("STU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return

$_ALOADATTRIBUTE_STU
[L]ASTATUS = fmet this.ASETATTRIBUTE("STU","$isMandatory","true")
Return


####################################################################
# 24 : EXTQTY Planned quantity ( Field QTY 0)
####################################################################

$SET_EXTQTY
If [L]_AOLDVAL<>this.EXTQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXTQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXTQTY
 Gosub PROPAGATE_EXTQTY
Endif
Return

$INIT_EXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "EXTQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "EXTQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXTQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXTQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXTQTY
[L]CURPRO = "EXTQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXTQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXTQTY
[L]CURPRO = "EXTQTY"
Return

$_AOTHERS_EXTQTY
[L]CURPRO = "EXTQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXTQTY
[L]CURPRO = "EXTQTY"
Return

$PROPAGATE_EXTQTY
this.isReadonly = 0
[L]CURPRO = "EXTQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "EXTQTY"
$_LNKPRO_EXTQTY
Return


####################################################################
# 25 : CPLQTY Total actual quantity ( Field QTY 0)
####################################################################

$SET_CPLQTY
If [L]_AOLDVAL<>this.CPLQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPLQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPLQTY
 Gosub PROPAGATE_CPLQTY
Endif
Return

$INIT_CPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "CPLQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "CPLQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPLQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPLQTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPLQTY
[L]CURPRO = "CPLQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CPLQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPLQTY
[L]CURPRO = "CPLQTY"
Return

$_AOTHERS_CPLQTY
[L]CURPRO = "CPLQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPLQTY
[L]CURPRO = "CPLQTY"
Return

$PROPAGATE_CPLQTY
this.isReadonly = 0
[L]CURPRO = "CPLQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "CPLQTY"
$_LNKPRO_CPLQTY
Return


####################################################################
# 26 : REJCPLQTY Actual rejected quantity ( Field QTY 0)
####################################################################

$SET_REJCPLQTY
If [L]_AOLDVAL<>this.REJCPLQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_REJCPLQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.REJCPLQTY
 Gosub PROPAGATE_REJCPLQTY
Endif
Return

$INIT_REJCPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "REJCPLQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_REJCPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "REJCPLQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_REJCPLQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_REJCPLQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_REJCPLQTY
[L]CURPRO = "REJCPLQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.REJCPLQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_REJCPLQTY
[L]CURPRO = "REJCPLQTY"
Return

$_AOTHERS_REJCPLQTY
[L]CURPRO = "REJCPLQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_REJCPLQTY
[L]CURPRO = "REJCPLQTY"
Return

$PROPAGATE_REJCPLQTY
this.isReadonly = 0
[L]CURPRO = "REJCPLQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_REJCPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "REJCPLQTY"
$_LNKPRO_REJCPLQTY
Return


####################################################################
# 27 : QUACPLQTY Actual quantity under control ( Field QTY 0)
####################################################################

$SET_QUACPLQTY
If [L]_AOLDVAL<>this.QUACPLQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QUACPLQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QUACPLQTY
 Gosub PROPAGATE_QUACPLQTY
Endif
Return

$INIT_QUACPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "QUACPLQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QUACPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "QUACPLQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QUACPLQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QUACPLQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QUACPLQTY
[L]CURPRO = "QUACPLQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QUACPLQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QUACPLQTY
[L]CURPRO = "QUACPLQTY"
Return

$_AOTHERS_QUACPLQTY
[L]CURPRO = "QUACPLQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QUACPLQTY
[L]CURPRO = "QUACPLQTY"
Return

$PROPAGATE_QUACPLQTY
this.isReadonly = 0
[L]CURPRO = "QUACPLQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QUACPLQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "QUACPLQTY"
$_LNKPRO_QUACPLQTY
Return


####################################################################
# 28 : RMNEXTQTY Remaining quantity ( Field QTY 0)
####################################################################

$SET_RMNEXTQTY
If [L]_AOLDVAL<>this.RMNEXTQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RMNEXTQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RMNEXTQTY
 Gosub PROPAGATE_RMNEXTQTY
Endif
Return

$INIT_RMNEXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "RMNEXTQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RMNEXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "RMNEXTQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RMNEXTQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RMNEXTQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RMNEXTQTY
[L]CURPRO = "RMNEXTQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RMNEXTQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RMNEXTQTY
[L]CURPRO = "RMNEXTQTY"
Return

$_AOTHERS_RMNEXTQTY
[L]CURPRO = "RMNEXTQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RMNEXTQTY
[L]CURPRO = "RMNEXTQTY"
Return

$PROPAGATE_RMNEXTQTY
this.isReadonly = 0
[L]CURPRO = "RMNEXTQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RMNEXTQTY
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "RMNEXTQTY"
$_LNKPRO_RMNEXTQTY
Return


####################################################################
# 29 : LOT Lot ( Field LOT 15)
####################################################################

$SET_LOT
If [L]_AOLDVAL<>this.LOT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LOT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LOT
 Gosub PROPAGATE_LOT
Endif
Return

$INIT_LOT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "LOT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LOT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "LOT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LOT                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LOT                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LOT
[L]CURPRO = "LOT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LOT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LOT
[L]CURPRO = "LOT"
If vireblc(this.LOT,2)<>vireblc(format$("K:15c",this.LOT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_LOT
[L]CURPRO = "LOT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LOT
[L]CURPRO = "LOT"
Return

$PROPAGATE_LOT
this.isReadonly = 0
[L]CURPRO = "LOT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LOT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "LOT"
$_LNKPRO_LOT
Return


####################################################################
# 30 : BOMALT BOM code ( Field TBO 0)
####################################################################

$SET_BOMALT
If [L]_AOLDVAL<>this.BOMALT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BOMALT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BOMALT
 Gosub PROPAGATE_BOMALT
Endif
Return

$INIT_BOMALT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BOMALT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BOMALT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BOMALT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BOMALT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BOMALT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BOMALT
[L]CURPRO = "BOMALT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BOMALT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BOMALT
[L]CURPRO = "BOMALT"
Return

$_AOTHERS_BOMALT
[L]CURPRO = "BOMALT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BOMALT
[L]CURPRO = "BOMALT"
If this.BOMALT<>0
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTBO.ACTRLREF(this,"BOMALT",this.BOMALT,2,this.BOMALT,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BOMALT<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_BOMALT
this.isReadonly = 0
[L]CURPRO = "BOMALT"
Gosub _LNKPRO_BOMALT
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BOMALT
Gosub DECLARE_VAR From WMC0MFGITM
[L]CURPRO = "BOMALT"
$_LNKPRO_BOMALT
If this.BOMALT<>0
 # Link TABBOMALT
 Local File TABBOMALT [WTBO]
 Read [F:WTBO]TBO0 = 2;this.BOMALT
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABBOMALT" & ZONE="TBOSHOAXX" & IDENT1=num$([F:WTBO]BOMALTTYP) & IDENT2=num$([F:WTBO]BOMALT) & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BOMALT","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABBOMALT" & ZONE="TBODESAXX" & IDENT1=num$([F:WTBO]BOMALTTYP) & IDENT2=num$([F:WTBO]BOMALT) & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BOMALT","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTBO]
Endif
Return




