#<AdxTL>@(#)0.0.0.0 $Revision$
If clalev([F:YBDT]) = 0 : Local File YBBDETAILTEM [YBDT]  : Endif
If clalev([F:BAN]) = 0  : Local File BANK         [BAN]   : Endif
Local Integer I : I = 0
  For [F:YBDT] Where [F:YBDT]YBATNBR = 'BB20180900109'
  Infbox num$([F:YBDT]YDETLIG)
    # If THE BANK Field IS POPULATED
    #If [F:YBDT]YBAN <> "" Then
    #    Infbox("1")
     # Read [F:BAN]BAN0 = [F:YBDT]YBAN
      #If THE BANK IS A PRINCIPAL BANK
     # If [F:BAN]YBANPRNSTA = 2 Then
        #CREATE SIMULATION LINE For THE PRINCIPAL BANK ON THE CURRENT BUSINESS TRANSACTION LINE
        #(DR/CR OPPOSITE To THE CURRENT BUSINESS TRANSACTION LINE)
#If clalev([F:YBDT]) = 0 : Local File YBBSIM [YBBS]  : Endif
          I = [F:YBDT]YDETLIG
          Call ADDLIG_SIM([F:YBDT]YBATNBR,I,[F:YBDT]YENTTYP,[F:YBDT]YJOU,[F:YBDT]YTRANSNBR,[F:YBDT]YDETDES,[F:YBDT]YFCY,[F:YBDT]YCOA,[F:YBDT]YACC,[F:YBDT]YLIGDES,[F:YBDT]YCTRL,
& [F:YBDT]YBP,[F:YBDT]YDEB,[F:YBDT]YCDT,[F:YBDT]YTAX,[F:YBDT]YREF,[F:YBDT]YPJT) From BB_ENGINE_EXEC
        If fstat <> 0 Then
          GMESSAGE = "Insert to Simulation"
        Endif
   #   Endif
   # Endif
  Next

## PJM Class Call to AINSERT
##Open Tables in order to Set the instance before AINSERT
#If !clalev([F:OPP]) : Local File OPPOR [OPP] : Endif
#If !clalev([F:OPPPJM]) : Local File OPPORPJM [OPPPJM] : Endif
#
#
#    Local Integer MY_STATUS
#
#    Local Instance YPJM Using C_OPPOR
#    YPJM = NewInstance C_OPPOR AllocGroup null
#    MY_STATUS = fmet YPJM.AINIT
#    If MY_STATUS <> [V]CST_AOK
#      Infbox ("issue on AINIT PJM")
#    Endif
#
#    Local Instance YPJMM Using C_OPPORPJM
#    YPJMM = NewInstance C_OPPORPJM AllocGroup null
#    MY_STATUS = fmet YPJMM.AINIT
#    If MY_STATUS <> [V]CST_AOK
#      Infbox ("issue on AINIT PJMM")
#    Endif
#
#    #Set Instance to Table
#    SetInstance YPJM With [F:OPP]
#    SetInstance YPJMM With [F:OPPPJM]
#
#    YPJM.TCHTOREAD = "PJM"
#    YPJM.CPY = "900"
#    YPJM.SALFCY = "900-1"
#    YPJM.OPPNUM = "DEWTEST01"
#    YPJM.TCHISPJM = 2
#    YPJM.CUR = "AUD"
#    YPJM.OPPTYP = "HPR"
#    #Mandatory on Main Class
#    YPJM.CHGTYP = 1
#    #Mandatory on Sub Class
#    YPJM.PIMPL.PIMDESAXX = "test"
#    YPJM.PIMPL.PIMDESAX1 = "test2"
#
#    YPJMM.OPPNUM = "DEWTEST01"
#    YPJMM.OPPSTATE = 1
#    YPJMM.SALFCY = "900-1"
#    YPJMM.CPY = "900"
#    YPJMM.OPPPROACTIV = 2
#    YPJMM.CUROPP = "AUD"
#    YPJMM.CUR = "AUD"
#    YPJMM.OPEDEFFCY = "900-1"
#    YPJMM.OPPDESTEX = "test"
#    YPJMM.OPPCOMTEX = "test" #Mandatory on Class
#    YPJMM.CDIE.DIE(0) = "CAD"
#
#    MY_STATUS = fmet YPJM.AINSERT()
#    #MY_STATUS = fmet YPJMM.AINSERT()
#    If [L]MY_STATUS <> [V]CST_AOK Then
#      Call RECOVERS_ERROR_IN_CLASSIC(YPJM) From SUBPJMA
#    Endif
#    If MY_STATUS = [V]CST_AERROR Then
#      Infbox "AERROR"-num$(MY_STATUS)
#    Endif
#
#    FreeGroup YPJM
#    FreeGroup YPJMM
#

