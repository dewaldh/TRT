#<AdxTL>@(#)0.0.0.0 $Revision$Class Sales return header
# Supervisor
## ACLA-CLASSE ## SRETURN
# 2018-08-27 12:49:33 783


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : STOFCY Receiving site ( Field FCY 5)
####################################################################

$SET_STOFCY
If [L]_AOLDVAL<>this.STOFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STOFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STOFCY
 Gosub PROPAGATE_STOFCY
Endif
Return

$INIT_STOFCY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "STOFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STOFCY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "STOFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STOFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STOFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STOFCY
[L]CURPRO = "STOFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.STOFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STOFCY
[L]CURPRO = "STOFCY"
If vireblc(this.STOFCY,2)<>vireblc(format$("K:5c",this.STOFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_STOFCY
[L]CURPRO = "STOFCY"
If vireblc(this.STOFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"STOFCY",this.STOFCY,this.STOFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.STOFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STOFCY
[L]CURPRO = "STOFCY"
Return

$PROPAGATE_STOFCY
this.isReadonly = 0
[L]CURPRO = "STOFCY"
Gosub _LNKPRO_STOFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STOFCY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "STOFCY"
$_LNKPRO_STOFCY
If vireblc(this.STOFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.STOFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("STOFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("STOFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return

$_ALOADATTRIBUTE_STOFCY
[L]ASTATUS = fmet this.ASETATTRIBUTE("STOFCY","$isMandatory","true")
Return


####################################################################
# 2 : CPY Company ( Field CPY 5)
####################################################################

$SET_CPY
If [L]_AOLDVAL<>this.CPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPY
 Gosub PROPAGATE_CPY
Endif
Return

$INIT_CPY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "CPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "CPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPY
[L]CURPRO = "CPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CPY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>vireblc(format$("K:5c",this.CPY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCPY.ACTRLREF(this,"CPY",this.CPY,this.CPY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CPY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPY
[L]CURPRO = "CPY"
Return

$PROPAGATE_CPY
this.isReadonly = 0
[L]CURPRO = "CPY"
Gosub _LNKPRO_CPY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "CPY"
$_LNKPRO_CPY
If vireblc(this.CPY,2)<>""
 # Link COMPANY
 Local File COMPANY [WCPY]
 Read [F:WCPY]CPY0 = this.CPY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$title",[F:WCPY]CPYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$description",[F:WCPY]CPYNAM)
 Endif
 LogicClose File [WCPY]
Endif
Return

$_ALOADATTRIBUTE_CPY
[L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$isMandatory","true")
Return


####################################################################
# 3 : LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_LEG
If [L]_AOLDVAL<>this.LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LEG
 Gosub PROPAGATE_LEG
Endif
Return

$INIT_LEG
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"LEG",this.LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LEG
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LEG                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LEG                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LEG
[L]CURPRO = "LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LEG
[L]CURPRO = "LEG"
If vireblc(this.LEG,2)<>vireblc(format$("K:20B",this.LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_LEG
[L]CURPRO = "LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"LEG",this.LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LEG
[L]CURPRO = "LEG"
Return

$PROPAGATE_LEG
this.isReadonly = 0
[L]CURPRO = "LEG"
Gosub _LNKPRO_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LEG
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "LEG"
$_LNKPRO_LEG
If vireblc(this.LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 4 : SRHNUM Return no. ( Field VCR 20)
####################################################################

$SET_SRHNUM
If [L]_AOLDVAL<>this.SRHNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SRHNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SRHNUM
 Gosub PROPAGATE_SRHNUM
Endif
Return

$INIT_SRHNUM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "SRHNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SRHNUM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "SRHNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SRHNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SRHNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SRHNUM
[L]CURPRO = "SRHNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SRHNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SRHNUM
[L]CURPRO = "SRHNUM"
If vireblc(this.SRHNUM,2)<>vireblc(format$("K:20X",this.SRHNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SRHNUM
[L]CURPRO = "SRHNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SRHNUM
[L]CURPRO = "SRHNUM"
Return

$PROPAGATE_SRHNUM
this.isReadonly = 0
[L]CURPRO = "SRHNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SRHNUM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "SRHNUM"
$_LNKPRO_SRHNUM
Return

$_ALOADATTRIBUTE_SRHNUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("SRHNUM","$isMandatory","true")
Return


####################################################################
# 5 : EXYDAT Expiration date ( Field D)
####################################################################

$SET_EXYDAT
If [L]_AOLDVAL<>this.EXYDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXYDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXYDAT
 Gosub PROPAGATE_EXYDAT
Endif
Return

$INIT_EXYDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EXYDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXYDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EXYDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXYDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXYDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXYDAT
[L]CURPRO = "EXYDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXYDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXYDAT
[L]CURPRO = "EXYDAT"
Return

$_AOTHERS_EXYDAT
[L]CURPRO = "EXYDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXYDAT
[L]CURPRO = "EXYDAT"
Return

$PROPAGATE_EXYDAT
this.isReadonly = 0
[L]CURPRO = "EXYDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXYDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EXYDAT"
$_LNKPRO_EXYDAT
Return


####################################################################
# 6 : AUZUSR Authorized user ( Field A 5)
####################################################################

$SET_AUZUSR
If [L]_AOLDVAL<>this.AUZUSR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AUZUSR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AUZUSR
 Gosub PROPAGATE_AUZUSR
Endif
Return

$INIT_AUZUSR
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "AUZUSR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AUZUSR
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "AUZUSR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AUZUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AUZUSR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AUZUSR
[L]CURPRO = "AUZUSR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.AUZUSR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AUZUSR
[L]CURPRO = "AUZUSR"
Return

$_AOTHERS_AUZUSR
[L]CURPRO = "AUZUSR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AUZUSR
[L]CURPRO = "AUZUSR"
Return

$PROPAGATE_AUZUSR
this.isReadonly = 0
[L]CURPRO = "AUZUSR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AUZUSR
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "AUZUSR"
$_LNKPRO_AUZUSR
Return


####################################################################
# 7 : EXTRTNDAT Expected return date ( Field D)
####################################################################

$SET_EXTRTNDAT
If [L]_AOLDVAL<>this.EXTRTNDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXTRTNDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXTRTNDAT
 Gosub PROPAGATE_EXTRTNDAT
Endif
Return

$INIT_EXTRTNDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EXTRTNDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXTRTNDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EXTRTNDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXTRTNDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXTRTNDAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXTRTNDAT
[L]CURPRO = "EXTRTNDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXTRTNDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXTRTNDAT
[L]CURPRO = "EXTRTNDAT"
Return

$_AOTHERS_EXTRTNDAT
[L]CURPRO = "EXTRTNDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXTRTNDAT
[L]CURPRO = "EXTRTNDAT"
Return

$PROPAGATE_EXTRTNDAT
this.isReadonly = 0
[L]CURPRO = "EXTRTNDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXTRTNDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EXTRTNDAT"
$_LNKPRO_EXTRTNDAT
Return


####################################################################
# 8 : RTNDAT Return date ( Field D)
####################################################################

$SET_RTNDAT
If [L]_AOLDVAL<>this.RTNDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RTNDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RTNDAT
 Gosub PROPAGATE_RTNDAT
Endif
Return

$INIT_RTNDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "RTNDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RTNDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "RTNDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RTNDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RTNDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RTNDAT
[L]CURPRO = "RTNDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RTNDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RTNDAT
[L]CURPRO = "RTNDAT"
Return

$_AOTHERS_RTNDAT
[L]CURPRO = "RTNDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RTNDAT
[L]CURPRO = "RTNDAT"
Return

$PROPAGATE_RTNDAT
this.isReadonly = 0
[L]CURPRO = "RTNDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RTNDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "RTNDAT"
$_LNKPRO_RTNDAT
Return

$_ALOADATTRIBUTE_RTNDAT
[L]ASTATUS = fmet this.ASETATTRIBUTE("RTNDAT","$isMandatory","true")
Return


####################################################################
# 9 : BPCORD Sold-to ( Field BPC 15)
####################################################################

$SET_BPCORD
If [L]_AOLDVAL<>this.BPCORD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPCORD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPCORD
 Gosub PROPAGATE_BPCORD
Endif
Return

$INIT_BPCORD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPCORD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPCORD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPCORD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPCORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPCORD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPCORD
[L]CURPRO = "BPCORD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPCORD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPCORD
[L]CURPRO = "BPCORD"
If vireblc(this.BPCORD,2)<>vireblc(format$("K:15c",this.BPCORD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPCORD
[L]CURPRO = "BPCORD"
If vireblc(this.BPCORD,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPC.ACTRLREF(this,"BPCORD",this.BPCORD,this.BPCORD,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPCORD<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPCORD
[L]CURPRO = "BPCORD"
Return

$PROPAGATE_BPCORD
this.isReadonly = 0
[L]CURPRO = "BPCORD"
Gosub _LNKPRO_BPCORD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPCORD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPCORD"
$_LNKPRO_BPCORD
If vireblc(this.BPCORD,2)<>""
 # Link BPCUSTOMER
 Local File BPCUSTOMER [WBPC]
 Read [F:WBPC]BPC0 = this.BPCORD
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCORD","$title",[F:WBPC]BPCSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCORD","$description",[F:WBPC]BPCNAM)
 Endif
 LogicClose File [WBPC]
Endif
Return

$_ALOADATTRIBUTE_BPCORD
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPCORD","$isMandatory","true")
Return


####################################################################
# 10 : BPAADD Delivery address ( Field ADR 5)
####################################################################

$SET_BPAADD
If [L]_AOLDVAL<>this.BPAADD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPAADD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPAADD
 Gosub PROPAGATE_BPAADD
Endif
Return

$INIT_BPAADD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPAADD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPAADD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPAADD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPAADD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPAADD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPAADD
[L]CURPRO = "BPAADD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPAADD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPAADD
[L]CURPRO = "BPAADD"
If vireblc(this.BPAADD,2)<>vireblc(format$("K:5c",this.BPAADD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPAADD
[L]CURPRO = "BPAADD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPAADD
[L]CURPRO = "BPAADD"
If vireblc(this.BPAADD,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPADR.ACTRLREF(this,"BPAADD",this.BPAADD,1,this.BPCORD,this.BPAADD,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPAADD<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_BPAADD
this.isReadonly = 0
[L]CURPRO = "BPAADD"
Gosub _LNKPRO_BPAADD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPAADD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPAADD"
$_LNKPRO_BPAADD
If vireblc(this.BPAADD,2)<>""
 # Link BPADDRESS
 Local File BPADDRESS [WBPA]
 Read [F:WBPA]BPA0 = 1;this.BPCORD;this.BPAADD
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPAADD","$description",[F:WBPA]BPADES)
 Endif
 LogicClose File [WBPA]
Endif
Return


####################################################################
# 13 : BPDPOSCOD Deliv postal code ( Field POS 10)
####################################################################

$SET_BPDPOSCOD
If [L]_AOLDVAL<>this.BPDPOSCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPDPOSCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPDPOSCOD
 Gosub PROPAGATE_BPDPOSCOD
Endif
Return

$INIT_BPDPOSCOD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDPOSCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPDPOSCOD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDPOSCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPDPOSCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPDPOSCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPDPOSCOD
[L]CURPRO = "BPDPOSCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPDPOSCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPDPOSCOD
[L]CURPRO = "BPDPOSCOD"
If vireblc(this.BPDPOSCOD,2)<>vireblc(format$("K:10X",this.BPDPOSCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPDPOSCOD
[L]CURPRO = "BPDPOSCOD"
[L]ASTATUS =  func ASYRTRTATY.CONTROLPOS(this,"BPDPOSCOD",this.BPDPOSCOD,this.BPDCRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPDPOSCOD
[L]CURPRO = "BPDPOSCOD"
Return

$PROPAGATE_BPDPOSCOD
this.isReadonly = 0
[L]ASTATUS =  func ASYRTRTATY.PROPAGATEPOS(this,"BPDPOSCOD",this.BPDPOSCOD,this.BPDCTY,this.BPDSAT,this.BPDCRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]CURPRO = "BPDPOSCOD"
Gosub _LNKPRO_BPDPOSCOD
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPDPOSCOD
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDPOSCOD"
$_LNKPRO_BPDPOSCOD
If vireblc(this.BPDPOSCOD,2)<>""
 # Link POSCOD
 Local File POSCOD [WPOS]
 Read [F:WPOS]POS0 = this.BPDCRY;this.BPDPOSCOD;this.BPDCTY;AVOID.ACHAR
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPDPOSCOD","$description",[F:WPOS]POSCTY)
 Endif
 LogicClose File [WPOS]
Endif
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATPOS(this,"BPDPOSCOD",this.BPDPOSCOD,[L]AFORMAT,this.BPDCRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPDPOSCOD","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 14 : BPDCTY Delivery city ( Field CTY 40)
####################################################################

$SET_BPDCTY
If [L]_AOLDVAL<>this.BPDCTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPDCTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPDCTY
 Gosub PROPAGATE_BPDCTY
Endif
Return

$INIT_BPDCTY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPDCTY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPDCTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPDCTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPDCTY
[L]CURPRO = "BPDCTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPDCTY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPDCTY
[L]CURPRO = "BPDCTY"
If vireblc(this.BPDCTY,2)<>vireblc(format$("K:40X",this.BPDCTY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPDCTY
[L]CURPRO = "BPDCTY"
[L]ASTATUS =  func ASYRTRTATY.CONTROLCTY(this,"BPDCTY",this.BPDCTY,this.BPDCRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPDCTY
[L]CURPRO = "BPDCTY"
Return

$PROPAGATE_BPDCTY
this.isReadonly = 0
[L]ASTATUS =  func ASYRTRTATY.PROPAGATECTY(this,"BPDCTY",this.BPDCTY,this.BPDPOSCOD,this.BPDSAT,this.BPDCRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]CURPRO = "BPDCTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPDCTY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCTY"
$_LNKPRO_BPDCTY
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATCTY(this,"BPDCTY",this.BPDCTY,[L]AFORMAT,this.BPDCRY)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPDCTY","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 15 : BPDSAT Delivery country ( Field SAT 35)
####################################################################

$SET_BPDSAT
If [L]_AOLDVAL<>this.BPDSAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPDSAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPDSAT
 Gosub PROPAGATE_BPDSAT
Endif
Return

$INIT_BPDSAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDSAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPDSAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDSAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPDSAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPDSAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPDSAT
[L]CURPRO = "BPDSAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPDSAT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPDSAT
[L]CURPRO = "BPDSAT"
If vireblc(this.BPDSAT,2)<>vireblc(format$("K:35X",this.BPDSAT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPDSAT
[L]CURPRO = "BPDSAT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLSAT(this,"BPDSAT",this.BPDSAT,this.BPDCRY,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPDSAT
[L]CURPRO = "BPDSAT"
Return

$PROPAGATE_BPDSAT
this.isReadonly = 0
[L]CURPRO = "BPDSAT"
Gosub _LNKPRO_BPDSAT
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPDSAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDSAT"
$_LNKPRO_BPDSAT
If vireblc(this.BPDSAT,2)<>""
 # Link TABSUBDIV
 Local File TABSUBDIV [WATU]
 Read [F:WATU]ATU0 = this.BPDCRY;AVOID.ALIB;this.BPDSAT
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABSUBDIV" & ZONE="INTIT" & IDENT1=[F:WATU]CRYTYP & IDENT2=[F:WATU]COD & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BPDSAT","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABSUBDIV" & ZONE="INTIT" & IDENT1=[F:WATU]CRYTYP & IDENT2=[F:WATU]COD & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BPDSAT","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WATU]
Endif
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATSAT(this,"BPDSAT",this.BPDSAT,[L]AFORMAT,this.BPDCRY,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPDSAT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 16 : BPDCRY Delivery country ( Field CRY 3)
####################################################################

$SET_BPDCRY
If [L]_AOLDVAL<>this.BPDCRY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPDCRY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPDCRY
 Gosub PROPAGATE_BPDCRY
Endif
Return

$INIT_BPDCRY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCRY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPDCRY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCRY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPDCRY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPDCRY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPDCRY
[L]CURPRO = "BPDCRY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPDCRY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPDCRY
[L]CURPRO = "BPDCRY"
If vireblc(this.BPDCRY,2)<>vireblc(format$("K:3c",this.BPDCRY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPDCRY
[L]CURPRO = "BPDCRY"
If vireblc(this.BPDCRY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCRY.ACTRLREF(this,"BPDCRY",this.BPDCRY,this.BPDCRY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPDCRY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPDCRY
[L]CURPRO = "BPDCRY"
Return

$PROPAGATE_BPDCRY
this.isReadonly = 0
[L]CURPRO = "BPDCRY"
Gosub _LNKPRO_BPDCRY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPDCRY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCRY"
$_LNKPRO_BPDCRY
If vireblc(this.BPDCRY,2)<>""
 # Link TABCOUNTRY
 Local File TABCOUNTRY [WTCY]
 Read [F:WTCY]TCY0 = this.BPDCRY
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCOUNTRY" & ZONE="CRYDES" & IDENT1=[F:WTCY]CRY & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BPDCRY","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCOUNTRY" & ZONE="CRYDES" & IDENT1=[F:WTCY]CRY & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BPDCRY","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTCY]
Endif
Return


####################################################################
# 17 : BPDCRYNAM Delivery country name ( Field NCY 40)
####################################################################

$SET_BPDCRYNAM
If [L]_AOLDVAL<>this.BPDCRYNAM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPDCRYNAM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPDCRYNAM
 Gosub PROPAGATE_BPDCRYNAM
Endif
Return

$INIT_BPDCRYNAM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCRYNAM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPDCRYNAM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCRYNAM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPDCRYNAM             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPDCRYNAM             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPDCRYNAM
[L]CURPRO = "BPDCRYNAM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPDCRYNAM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPDCRYNAM
[L]CURPRO = "BPDCRYNAM"
If vireblc(this.BPDCRYNAM,2)<>vireblc(format$("K:40X",this.BPDCRYNAM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPDCRYNAM
[L]CURPRO = "BPDCRYNAM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPDCRYNAM
[L]CURPRO = "BPDCRYNAM"
Return

$PROPAGATE_BPDCRYNAM
this.isReadonly = 0
[L]CURPRO = "BPDCRYNAM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPDCRYNAM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPDCRYNAM"
$_LNKPRO_BPDCRYNAM
Return


####################################################################
# 18 : CNDNAM Delivery contact ( Field AIN 15)
####################################################################

$SET_CNDNAM
If [L]_AOLDVAL<>this.CNDNAM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CNDNAM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CNDNAM
 Gosub PROPAGATE_CNDNAM
Endif
Return

$INIT_CNDNAM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "CNDNAM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CNDNAM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "CNDNAM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CNDNAM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CNDNAM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CNDNAM
[L]CURPRO = "CNDNAM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CNDNAM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CNDNAM
[L]CURPRO = "CNDNAM"
If vireblc(this.CNDNAM,2)<>vireblc(format$("K:15c",this.CNDNAM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CNDNAM
[L]CURPRO = "CNDNAM"
If vireblc(this.CNDNAM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPAIN.ACTRLREF(this,"CNDNAM",this.CNDNAM,this.CNDNAM,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CNDNAM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CNDNAM
[L]CURPRO = "CNDNAM"
Return

$PROPAGATE_CNDNAM
this.isReadonly = 0
[L]CURPRO = "CNDNAM"
Gosub _LNKPRO_CNDNAM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CNDNAM
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "CNDNAM"
$_LNKPRO_CNDNAM
If vireblc(this.CNDNAM,2)<>""
 # Link CONTACTCRM
 Local File CONTACTCRM [WAIN]
 Read [F:WAIN]AIN0 = this.CNDNAM
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CNDNAM","$description",[F:WAIN]CNTLNA)
 Endif
 LogicClose File [WAIN]
Endif
Return


####################################################################
# 19 : DLVDAT Delivery date ( Field D)
####################################################################

$SET_DLVDAT
If [L]_AOLDVAL<>this.DLVDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DLVDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DLVDAT
 Gosub PROPAGATE_DLVDAT
Endif
Return

$INIT_DLVDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "DLVDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DLVDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "DLVDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DLVDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DLVDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DLVDAT
[L]CURPRO = "DLVDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DLVDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DLVDAT
[L]CURPRO = "DLVDAT"
Return

$_AOTHERS_DLVDAT
[L]CURPRO = "DLVDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DLVDAT
[L]CURPRO = "DLVDAT"
Return

$PROPAGATE_DLVDAT
this.isReadonly = 0
[L]CURPRO = "DLVDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DLVDAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "DLVDAT"
$_LNKPRO_DLVDAT
Return


####################################################################
# 20 : BPCINV Bill-to customer ( Field BPC 15)
####################################################################

$SET_BPCINV
If [L]_AOLDVAL<>this.BPCINV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPCINV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPCINV
 Gosub PROPAGATE_BPCINV
Endif
Return

$INIT_BPCINV
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPCINV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPCINV
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPCINV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPCINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPCINV                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPCINV
[L]CURPRO = "BPCINV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPCINV,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPCINV
[L]CURPRO = "BPCINV"
If vireblc(this.BPCINV,2)<>vireblc(format$("K:15c",this.BPCINV),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPCINV
[L]CURPRO = "BPCINV"
If vireblc(this.BPCINV,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPC.ACTRLREF(this,"BPCINV",this.BPCINV,this.BPCINV,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPCINV<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPCINV
[L]CURPRO = "BPCINV"
Return

$PROPAGATE_BPCINV
this.isReadonly = 0
[L]CURPRO = "BPCINV"
Gosub _LNKPRO_BPCINV
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPCINV
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "BPCINV"
$_LNKPRO_BPCINV
If vireblc(this.BPCINV,2)<>""
 # Link BPCUSTOMER
 Local File BPCUSTOMER [WBPC]
 Read [F:WBPC]BPC0 = this.BPCINV
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCINV","$title",[F:WBPC]BPCSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPCINV","$description",[F:WBPC]BPCNAM)
 Endif
 LogicClose File [WBPC]
Endif
Return

$_ALOADATTRIBUTE_BPCINV
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPCINV","$isMandatory","true")
Return


####################################################################
# 21 : SALFCY Sales site ( Field FCY 5)
####################################################################

$SET_SALFCY
If [L]_AOLDVAL<>this.SALFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SALFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SALFCY
 Gosub PROPAGATE_SALFCY
Endif
Return

$INIT_SALFCY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "SALFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SALFCY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "SALFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SALFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SALFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SALFCY
[L]CURPRO = "SALFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SALFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SALFCY
[L]CURPRO = "SALFCY"
If vireblc(this.SALFCY,2)<>vireblc(format$("K:5c",this.SALFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SALFCY
[L]CURPRO = "SALFCY"
If vireblc(this.SALFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"SALFCY",this.SALFCY,this.SALFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.SALFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SALFCY
[L]CURPRO = "SALFCY"
Return

$PROPAGATE_SALFCY
this.isReadonly = 0
[L]CURPRO = "SALFCY"
Gosub _LNKPRO_SALFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SALFCY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "SALFCY"
$_LNKPRO_SALFCY
If vireblc(this.SALFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.SALFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SALFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SALFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 22 : STOFCYDLV Shipment site ( Field FCY 5)
####################################################################

$SET_STOFCYDLV
If [L]_AOLDVAL<>this.STOFCYDLV
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STOFCYDLV
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STOFCYDLV
 Gosub PROPAGATE_STOFCYDLV
Endif
Return

$INIT_STOFCYDLV
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "STOFCYDLV"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STOFCYDLV
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "STOFCYDLV"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STOFCYDLV             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STOFCYDLV             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STOFCYDLV
[L]CURPRO = "STOFCYDLV"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.STOFCYDLV,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STOFCYDLV
[L]CURPRO = "STOFCYDLV"
If vireblc(this.STOFCYDLV,2)<>vireblc(format$("K:5c",this.STOFCYDLV),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_STOFCYDLV
[L]CURPRO = "STOFCYDLV"
If vireblc(this.STOFCYDLV,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"STOFCYDLV",this.STOFCYDLV,this.STOFCYDLV,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.STOFCYDLV<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STOFCYDLV
[L]CURPRO = "STOFCYDLV"
Return

$PROPAGATE_STOFCYDLV
this.isReadonly = 0
[L]CURPRO = "STOFCYDLV"
Gosub _LNKPRO_STOFCYDLV
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STOFCYDLV
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "STOFCYDLV"
$_LNKPRO_STOFCYDLV
If vireblc(this.STOFCYDLV,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.STOFCYDLV
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("STOFCYDLV","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("STOFCYDLV","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 23 : EECNAT Transaction nature ( Field TEC 5)
####################################################################

$SET_EECNAT
If [L]_AOLDVAL<>this.EECNAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECNAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECNAT
 Gosub PROPAGATE_EECNAT
Endif
Return

$INIT_EECNAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECNAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECNAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECNAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECNAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECNAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECNAT
[L]CURPRO = "EECNAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECNAT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECNAT
[L]CURPRO = "EECNAT"
If vireblc(this.EECNAT,2)<>vireblc(format$("K:5c",this.EECNAT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECNAT
[L]CURPRO = "EECNAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECNAT
[L]CURPRO = "EECNAT"
Return

$PROPAGATE_EECNAT
this.isReadonly = 0
[L]CURPRO = "EECNAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECNAT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECNAT"
$_LNKPRO_EECNAT
Return


####################################################################
# 24 : EECSCH EU rule ( Field TSC 5)
####################################################################

$SET_EECSCH
If [L]_AOLDVAL<>this.EECSCH
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECSCH
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECSCH
 Gosub PROPAGATE_EECSCH
Endif
Return

$INIT_EECSCH
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECSCH"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECSCH
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECSCH"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECSCH                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECSCH                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECSCH
[L]CURPRO = "EECSCH"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECSCH,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECSCH
[L]CURPRO = "EECSCH"
If vireblc(this.EECSCH,2)<>vireblc(format$("K:5c",this.EECSCH),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECSCH
[L]CURPRO = "EECSCH"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECSCH
[L]CURPRO = "EECSCH"
Return

$PROPAGATE_EECSCH
this.isReadonly = 0
[L]CURPRO = "EECSCH"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECSCH
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECSCH"
$_LNKPRO_EECSCH
Return


####################################################################
# 25 : EECLOC EU transport location ( Field Local menu number 236)
####################################################################

$SET_EECLOC
If [L]_AOLDVAL<>this.EECLOC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECLOC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECLOC
 Gosub PROPAGATE_EECLOC
Endif
Return

$INIT_EECLOC
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECLOC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.EECLOC=0 and fmet this.AGETATTRIBUTE("EECLOC","$isMandatory")="true"
 this.EECLOC = 1
Endif
Return
 
$CONTROL_EECLOC
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECLOC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECLOC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECLOC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECLOC
[L]CURPRO = "EECLOC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EECLOC=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECLOC
[L]CURPRO = "EECLOC"
If this.EECLOC<0 or this.EECLOC>len(mess(0,236,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"236 ->"-num$(this.EECLOC)-mess(99,123,1)):  Return : # Local menu "236 -> Invalid option
Endif
Return

$_AOTHERS_EECLOC
[L]CURPRO = "EECLOC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECLOC
[L]CURPRO = "EECLOC"
Return

$PROPAGATE_EECLOC
this.isReadonly = 0
[L]CURPRO = "EECLOC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECLOC
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECLOC"
$_LNKPRO_EECLOC
Return


####################################################################
# 26 : EECTRN EU transport mode ( Field Local menu number 237)
####################################################################

$SET_EECTRN
If [L]_AOLDVAL<>this.EECTRN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECTRN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECTRN
 Gosub PROPAGATE_EECTRN
Endif
Return

$INIT_EECTRN
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECTRN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.EECTRN=0 and fmet this.AGETATTRIBUTE("EECTRN","$isMandatory")="true"
 this.EECTRN = 1
Endif
Return
 
$CONTROL_EECTRN
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECTRN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECTRN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECTRN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECTRN
[L]CURPRO = "EECTRN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EECTRN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECTRN
[L]CURPRO = "EECTRN"
If this.EECTRN<0 or this.EECTRN>len(mess(0,237,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"237 ->"-num$(this.EECTRN)-mess(99,123,1)):  Return : # Local menu "237 -> Invalid option
Endif
Return

$_AOTHERS_EECTRN
[L]CURPRO = "EECTRN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECTRN
[L]CURPRO = "EECTRN"
Return

$PROPAGATE_EECTRN
this.isReadonly = 0
[L]CURPRO = "EECTRN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECTRN
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECTRN"
$_LNKPRO_EECTRN
Return


####################################################################
# 27 : EECNUMDEB EU Intrastat ( Field C 4)
####################################################################

$SET_EECNUMDEB
If [L]_AOLDVAL<>this.EECNUMDEB
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECNUMDEB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECNUMDEB
 Gosub PROPAGATE_EECNUMDEB
Endif
Return

$INIT_EECNUMDEB
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECNUMDEB"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECNUMDEB
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECNUMDEB"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECNUMDEB             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECNUMDEB             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECNUMDEB
[L]CURPRO = "EECNUMDEB"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EECNUMDEB=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECNUMDEB
[L]CURPRO = "EECNUMDEB"
Return

$_AOTHERS_EECNUMDEB
[L]CURPRO = "EECNUMDEB"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECNUMDEB
[L]CURPRO = "EECNUMDEB"
Return

$PROPAGATE_EECNUMDEB
this.isReadonly = 0
[L]CURPRO = "EECNUMDEB"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECNUMDEB
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECNUMDEB"
$_LNKPRO_EECNUMDEB
Return


####################################################################
# 28 : EECICT Incoterm ( Field ICT 5)
####################################################################

$SET_EECICT
If [L]_AOLDVAL<>this.EECICT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECICT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECICT
 Gosub PROPAGATE_EECICT
Endif
Return

$INIT_EECICT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECICT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECICT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECICT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECICT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECICT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECICT
[L]CURPRO = "EECICT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EECICT,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECICT
[L]CURPRO = "EECICT"
If vireblc(this.EECICT,2)<>vireblc(format$("K:5c",this.EECICT),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_EECICT
[L]CURPRO = "EECICT"
If vireblc(this.EECICT,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPICT.ACTRLREF(this,"EECICT",this.EECICT,this.EECICT,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.EECICT<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECICT
[L]CURPRO = "EECICT"
Return

$PROPAGATE_EECICT
this.isReadonly = 0
[L]CURPRO = "EECICT"
Gosub _LNKPRO_EECICT
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECICT
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "EECICT"
$_LNKPRO_EECICT
If vireblc(this.EECICT,2)<>""
 # Link INCOTERM
 Local File INCOTERM [WICTH]
 Read [F:WICTH]ICT0 = this.EECICT
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="INCOTERM" & ZONE="DES" & IDENT1=[F:WICTH]ICTCOD & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("EECICT","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WICTH]
Endif
Return


####################################################################
# 29 : ICTCTY Incoterm town ( Field CTY 40)
####################################################################

$SET_ICTCTY
If [L]_AOLDVAL<>this.ICTCTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ICTCTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ICTCTY
 Gosub PROPAGATE_ICTCTY
Endif
Return

$INIT_ICTCTY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "ICTCTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ICTCTY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "ICTCTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ICTCTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ICTCTY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ICTCTY
[L]CURPRO = "ICTCTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ICTCTY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ICTCTY
[L]CURPRO = "ICTCTY"
If vireblc(this.ICTCTY,2)<>vireblc(format$("K:40X",this.ICTCTY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ICTCTY
[L]CURPRO = "ICTCTY"
[L]ASTATUS =  func ASYRTRTATY.CONTROLCTY(this,"ICTCTY",this.ICTCTY,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ICTCTY
[L]CURPRO = "ICTCTY"
Return

$PROPAGATE_ICTCTY
this.isReadonly = 0
[L]ASTATUS =  func ASYRTRTATY.PROPAGATECTY(this,"ICTCTY",this.ICTCTY,this.ICTCTY_POS,this.ICTCTY_SAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]CURPRO = "ICTCTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ICTCTY
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "ICTCTY"
$_LNKPRO_ICTCTY
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATCTY(this,"ICTCTY",this.ICTCTY,[L]AFORMAT,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("ICTCTY","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 30 : ICTCTY_POS Postal code ( Field POS 10)
####################################################################

$SET_ICTCTY_POS
If [L]_AOLDVAL<>this.ICTCTY_POS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ICTCTY_POS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ICTCTY_POS
 Gosub PROPAGATE_ICTCTY_POS
Endif
Return

$INIT_ICTCTY_POS
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "ICTCTY_POS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ICTCTY_POS
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "ICTCTY_POS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ICTCTY_POS            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ICTCTY_POS            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ICTCTY_POS
[L]CURPRO = "ICTCTY_POS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ICTCTY_POS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ICTCTY_POS
[L]CURPRO = "ICTCTY_POS"
If vireblc(this.ICTCTY_POS,2)<>vireblc(format$("K:10X",this.ICTCTY_POS),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ICTCTY_POS
[L]CURPRO = "ICTCTY_POS"
[L]ASTATUS =  func ASYRTRTATY.CONTROLPOS(this,"ICTCTY_POS",this.ICTCTY_POS,AVOID.ACHAR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ICTCTY_POS
[L]CURPRO = "ICTCTY_POS"
Return

$PROPAGATE_ICTCTY_POS
this.isReadonly = 0
[L]ASTATUS =  func ASYRTRTATY.PROPAGATEPOS(this,"ICTCTY_POS",this.ICTCTY_POS,this.ICTCTY,this.ICTCTY_SAT,AVOID.ACHAR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]CURPRO = "ICTCTY_POS"
Gosub _LNKPRO_ICTCTY_POS
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ICTCTY_POS
Gosub DECLARE_VAR From WMC0SRETURN
[L]CURPRO = "ICTCTY_POS"
$_LNKPRO_ICTCTY_POS
If vireblc(this.ICTCTY_POS,2)<>""
 # Link POSCOD
 Local File POSCOD [WPOS]
 Read [F:WPOS]POS0 = AVOID.ACHAR;this.ICTCTY_POS;this.ICTCTY;AVOID.ACHAR
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("ICTCTY_POS","$description",[F:WPOS]POSCTY)
 Endif
 LogicClose File [WPOS]
Endif
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATPOS(this,"ICTCTY_POS",this.ICTCTY_POS,[L]AFORMAT,AVOID.ACHAR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("ICTCTY_POS","$x3Format",[L]AFORMAT)
Endif
Return




