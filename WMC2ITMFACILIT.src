#<AdxTL>@(#)0.0.0.0 $Revision$Class Products-sites
# Supervisor
## ACLA-CLASSE ## ITMFACILIT
# 2018-08-27 12:35:19 741

####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 31 : MAXSTOCLC Calculated max stock ( Field QTY 0)
####################################################################

$SET_MAXSTOCLC
If [L]_AOLDVAL<>this.MAXSTOCLC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MAXSTOCLC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MAXSTOCLC
 Gosub PROPAGATE_MAXSTOCLC
Endif
Return

$INIT_MAXSTOCLC
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MAXSTOCLC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MAXSTOCLC
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MAXSTOCLC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MAXSTOCLC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MAXSTOCLC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MAXSTOCLC
[L]CURPRO = "MAXSTOCLC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MAXSTOCLC=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MAXSTOCLC
[L]CURPRO = "MAXSTOCLC"
Return

$_AOTHERS_MAXSTOCLC
[L]CURPRO = "MAXSTOCLC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MAXSTOCLC
[L]CURPRO = "MAXSTOCLC"
Return

$PROPAGATE_MAXSTOCLC
this.isReadonly = 0
[L]CURPRO = "MAXSTOCLC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MAXSTOCLC
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MAXSTOCLC"
$_LNKPRO_MAXSTOCLC
Return


####################################################################
# 32 : REOMINQTY EOQ ( Field QTY 0)
####################################################################

$SET_REOMINQTY
If [L]_AOLDVAL<>this.REOMINQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_REOMINQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.REOMINQTY
 Gosub PROPAGATE_REOMINQTY
Endif
Return

$INIT_REOMINQTY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "REOMINQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_REOMINQTY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "REOMINQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_REOMINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_REOMINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_REOMINQTY
[L]CURPRO = "REOMINQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.REOMINQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_REOMINQTY
[L]CURPRO = "REOMINQTY"
Return

$_AOTHERS_REOMINQTY
[L]CURPRO = "REOMINQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_REOMINQTY
[L]CURPRO = "REOMINQTY"
Return

$PROPAGATE_REOMINQTY
this.isReadonly = 0
[L]CURPRO = "REOMINQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_REOMINQTY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "REOMINQTY"
$_LNKPRO_REOMINQTY
Return


####################################################################
# 33 : REOMINCLC Calculated EOQ ( Field QTY 0)
####################################################################

$SET_REOMINCLC
If [L]_AOLDVAL<>this.REOMINCLC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_REOMINCLC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.REOMINCLC
 Gosub PROPAGATE_REOMINCLC
Endif
Return

$INIT_REOMINCLC
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "REOMINCLC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_REOMINCLC
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "REOMINCLC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_REOMINCLC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_REOMINCLC             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_REOMINCLC
[L]CURPRO = "REOMINCLC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.REOMINCLC=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_REOMINCLC
[L]CURPRO = "REOMINCLC"
Return

$_AOTHERS_REOMINCLC
[L]CURPRO = "REOMINCLC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_REOMINCLC
[L]CURPRO = "REOMINCLC"
Return

$PROPAGATE_REOMINCLC
this.isReadonly = 0
[L]CURPRO = "REOMINCLC"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_REOMINCLC
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "REOMINCLC"
$_LNKPRO_REOMINCLC
Return


####################################################################
# 34 : MFGLOTQTY Technical lot ( Field QTY 0)
####################################################################

$SET_MFGLOTQTY
If [L]_AOLDVAL<>this.MFGLOTQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGLOTQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGLOTQTY
 Gosub PROPAGATE_MFGLOTQTY
Endif
Return

$INIT_MFGLOTQTY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGLOTQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGLOTQTY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGLOTQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGLOTQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGLOTQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGLOTQTY
[L]CURPRO = "MFGLOTQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MFGLOTQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGLOTQTY
[L]CURPRO = "MFGLOTQTY"
Return

$_AOTHERS_MFGLOTQTY
[L]CURPRO = "MFGLOTQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGLOTQTY
[L]CURPRO = "MFGLOTQTY"
Return

$PROPAGATE_MFGLOTQTY
this.isReadonly = 0
[L]CURPRO = "MFGLOTQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGLOTQTY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGLOTQTY"
$_LNKPRO_MFGLOTQTY
Return


####################################################################
# 35 : SHR Shrinkage percent ( Field DCB 3)
####################################################################

$SET_SHR
If [L]_AOLDVAL<>this.SHR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SHR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SHR
 Gosub PROPAGATE_SHR
Endif
Return

$INIT_SHR
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "SHR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SHR
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "SHR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SHR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SHR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SHR
[L]CURPRO = "SHR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SHR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SHR
[L]CURPRO = "SHR"
Return

$_AOTHERS_SHR
[L]CURPRO = "SHR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SHR
[L]CURPRO = "SHR"
Return

$PROPAGATE_SHR
this.isReadonly = 0
[L]CURPRO = "SHR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SHR
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "SHR"
$_LNKPRO_SHR
Return


####################################################################
# 36 : PLANNER Planner ( Field AUS 5)
####################################################################

$SET_PLANNER
If [L]_AOLDVAL<>this.PLANNER
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PLANNER
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PLANNER
 Gosub PROPAGATE_PLANNER
Endif
Return

$INIT_PLANNER
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PLANNER"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PLANNER
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PLANNER"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PLANNER               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PLANNER               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PLANNER
[L]CURPRO = "PLANNER"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PLANNER,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PLANNER
[L]CURPRO = "PLANNER"
If vireblc(this.PLANNER,2)<>vireblc(format$("K:5B",this.PLANNER),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PLANNER
[L]CURPRO = "PLANNER"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PLANNER
[L]CURPRO = "PLANNER"
Return

$PROPAGATE_PLANNER
this.isReadonly = 0
[L]CURPRO = "PLANNER"
Gosub _LNKPRO_PLANNER
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PLANNER
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PLANNER"
$_LNKPRO_PLANNER
If vireblc(this.PLANNER,2)<>""
 # Link AUTILIS
 Local File AUTILIS [WAUS]
 Read [F:WAUS]CODUSR = this.PLANNER
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PLANNER","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PLANNER","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WAUS]
Endif
Return


####################################################################
# 37 : BUY Buyer ( Field AUS 5)
####################################################################

$SET_BUY
If [L]_AOLDVAL<>this.BUY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BUY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BUY
 Gosub PROPAGATE_BUY
Endif
Return

$INIT_BUY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "BUY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BUY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "BUY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BUY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BUY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BUY
[L]CURPRO = "BUY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BUY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BUY
[L]CURPRO = "BUY"
If vireblc(this.BUY,2)<>vireblc(format$("K:5B",this.BUY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BUY
[L]CURPRO = "BUY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BUY
[L]CURPRO = "BUY"
Return

$PROPAGATE_BUY
this.isReadonly = 0
[L]CURPRO = "BUY"
Gosub _LNKPRO_BUY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BUY
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "BUY"
$_LNKPRO_BUY
If vireblc(this.BUY,2)<>""
 # Link AUTILIS
 Local File AUTILIS [WAUS]
 Read [F:WAUS]CODUSR = this.BUY
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BUY","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="AUTILIS" & ZONE="INTUSR" & IDENT1=[F:WAUS]USR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BUY","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WAUS]
Endif
Return


####################################################################
# 39 : STDCSTUPD Standard cost update ( Field Local menu number 220)
####################################################################

$SET_STDCSTUPD
If [L]_AOLDVAL<>this.STDCSTUPD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STDCSTUPD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STDCSTUPD
 Gosub PROPAGATE_STDCSTUPD
Endif
Return

$INIT_STDCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "STDCSTUPD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.STDCSTUPD=0 and fmet this.AGETATTRIBUTE("STDCSTUPD","$isMandatory")="true"
 this.STDCSTUPD = 1
Endif
Return
 
$CONTROL_STDCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "STDCSTUPD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STDCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STDCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STDCSTUPD
[L]CURPRO = "STDCSTUPD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.STDCSTUPD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STDCSTUPD
[L]CURPRO = "STDCSTUPD"
If this.STDCSTUPD<0 or this.STDCSTUPD>len(mess(0,220,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"220 ->"-num$(this.STDCSTUPD)-mess(99,123,1)):  Return : # Local menu "220 -> Invalid option
Endif
Return

$_AOTHERS_STDCSTUPD
[L]CURPRO = "STDCSTUPD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STDCSTUPD
[L]CURPRO = "STDCSTUPD"
Return

$PROPAGATE_STDCSTUPD
this.isReadonly = 0
[L]CURPRO = "STDCSTUPD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STDCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "STDCSTUPD"
$_LNKPRO_STDCSTUPD
Return


####################################################################
# 40 : CUTCSTUPD Revised std. cost update ( Field Local menu number 220)
####################################################################

$SET_CUTCSTUPD
If [L]_AOLDVAL<>this.CUTCSTUPD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CUTCSTUPD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CUTCSTUPD
 Gosub PROPAGATE_CUTCSTUPD
Endif
Return

$INIT_CUTCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CUTCSTUPD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CUTCSTUPD=0 and fmet this.AGETATTRIBUTE("CUTCSTUPD","$isMandatory")="true"
 this.CUTCSTUPD = 1
Endif
Return
 
$CONTROL_CUTCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CUTCSTUPD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CUTCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CUTCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CUTCSTUPD
[L]CURPRO = "CUTCSTUPD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CUTCSTUPD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CUTCSTUPD
[L]CURPRO = "CUTCSTUPD"
If this.CUTCSTUPD<0 or this.CUTCSTUPD>len(mess(0,220,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"220 ->"-num$(this.CUTCSTUPD)-mess(99,123,1)):  Return : # Local menu "220 -> Invalid option
Endif
Return

$_AOTHERS_CUTCSTUPD
[L]CURPRO = "CUTCSTUPD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CUTCSTUPD
[L]CURPRO = "CUTCSTUPD"
Return

$PROPAGATE_CUTCSTUPD
this.isReadonly = 0
[L]CURPRO = "CUTCSTUPD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CUTCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CUTCSTUPD"
$_LNKPRO_CUTCSTUPD
Return


####################################################################
# 41 : BUDCSTUPD Budgeted std. cost update ( Field Local menu number 220)
####################################################################

$SET_BUDCSTUPD
If [L]_AOLDVAL<>this.BUDCSTUPD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BUDCSTUPD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BUDCSTUPD
 Gosub PROPAGATE_BUDCSTUPD
Endif
Return

$INIT_BUDCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "BUDCSTUPD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.BUDCSTUPD=0 and fmet this.AGETATTRIBUTE("BUDCSTUPD","$isMandatory")="true"
 this.BUDCSTUPD = 1
Endif
Return
 
$CONTROL_BUDCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "BUDCSTUPD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BUDCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BUDCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BUDCSTUPD
[L]CURPRO = "BUDCSTUPD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BUDCSTUPD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BUDCSTUPD
[L]CURPRO = "BUDCSTUPD"
If this.BUDCSTUPD<0 or this.BUDCSTUPD>len(mess(0,220,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"220 ->"-num$(this.BUDCSTUPD)-mess(99,123,1)):  Return : # Local menu "220 -> Invalid option
Endif
Return

$_AOTHERS_BUDCSTUPD
[L]CURPRO = "BUDCSTUPD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BUDCSTUPD
[L]CURPRO = "BUDCSTUPD"
Return

$PROPAGATE_BUDCSTUPD
this.isReadonly = 0
[L]CURPRO = "BUDCSTUPD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BUDCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "BUDCSTUPD"
$_LNKPRO_BUDCSTUPD
Return


####################################################################
# 42 : SIMCSTUPD Simulated cost update ( Field Local menu number 220)
####################################################################

$SET_SIMCSTUPD
If [L]_AOLDVAL<>this.SIMCSTUPD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SIMCSTUPD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SIMCSTUPD
 Gosub PROPAGATE_SIMCSTUPD
Endif
Return

$INIT_SIMCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "SIMCSTUPD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.SIMCSTUPD=0 and fmet this.AGETATTRIBUTE("SIMCSTUPD","$isMandatory")="true"
 this.SIMCSTUPD = 1
Endif
Return
 
$CONTROL_SIMCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "SIMCSTUPD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SIMCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SIMCSTUPD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SIMCSTUPD
[L]CURPRO = "SIMCSTUPD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SIMCSTUPD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SIMCSTUPD
[L]CURPRO = "SIMCSTUPD"
If this.SIMCSTUPD<0 or this.SIMCSTUPD>len(mess(0,220,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"220 ->"-num$(this.SIMCSTUPD)-mess(99,123,1)):  Return : # Local menu "220 -> Invalid option
Endif
Return

$_AOTHERS_SIMCSTUPD
[L]CURPRO = "SIMCSTUPD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SIMCSTUPD
[L]CURPRO = "SIMCSTUPD"
Return

$PROPAGATE_SIMCSTUPD
this.isReadonly = 0
[L]CURPRO = "SIMCSTUPD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SIMCSTUPD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "SIMCSTUPD"
$_LNKPRO_SIMCSTUPD
Return


####################################################################
# 43 : MFGROU Production routing ( Field A 20)
####################################################################

$SET_MFGROU
If [L]_AOLDVAL<>this.MFGROU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGROU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGROU
 Gosub PROPAGATE_MFGROU
Endif
Return

$INIT_MFGROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGROU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGROU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGROU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGROU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGROU
[L]CURPRO = "MFGROU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.MFGROU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGROU
[L]CURPRO = "MFGROU"
Return

$_AOTHERS_MFGROU
[L]CURPRO = "MFGROU"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGROU
[L]CURPRO = "MFGROU"
Return

$PROPAGATE_MFGROU
this.isReadonly = 0
[L]CURPRO = "MFGROU"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGROU"
$_LNKPRO_MFGROU
Return


####################################################################
# 44 : CSTROU Cost ( Field A 20)
####################################################################

$SET_CSTROU
If [L]_AOLDVAL<>this.CSTROU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CSTROU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CSTROU
 Gosub PROPAGATE_CSTROU
Endif
Return

$INIT_CSTROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CSTROU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CSTROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CSTROU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CSTROU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CSTROU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CSTROU
[L]CURPRO = "CSTROU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CSTROU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CSTROU
[L]CURPRO = "CSTROU"
Return

$_AOTHERS_CSTROU
[L]CURPRO = "CSTROU"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CSTROU
[L]CURPRO = "CSTROU"
Return

$PROPAGATE_CSTROU
this.isReadonly = 0
[L]CURPRO = "CSTROU"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CSTROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CSTROU"
$_LNKPRO_CSTROU
Return


####################################################################
# 45 : RCCROU RCCP ( Field A 20)
####################################################################

$SET_RCCROU
If [L]_AOLDVAL<>this.RCCROU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RCCROU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RCCROU
 Gosub PROPAGATE_RCCROU
Endif
Return

$INIT_RCCROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RCCROU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RCCROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RCCROU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RCCROU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RCCROU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RCCROU
[L]CURPRO = "RCCROU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.RCCROU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RCCROU
[L]CURPRO = "RCCROU"
Return

$_AOTHERS_RCCROU
[L]CURPRO = "RCCROU"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RCCROU
[L]CURPRO = "RCCROU"
Return

$PROPAGATE_RCCROU
this.isReadonly = 0
[L]CURPRO = "RCCROU"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RCCROU
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RCCROU"
$_LNKPRO_RCCROU
Return


####################################################################
# 46 : MFGROUALT Code ( Field TRO 0)
####################################################################

$SET_MFGROUALT
If [L]_AOLDVAL<>this.MFGROUALT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGROUALT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGROUALT
 Gosub PROPAGATE_MFGROUALT
Endif
Return

$INIT_MFGROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGROUALT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MFGROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGROUALT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGROUALT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGROUALT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGROUALT
[L]CURPRO = "MFGROUALT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MFGROUALT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGROUALT
[L]CURPRO = "MFGROUALT"
Return

$_AOTHERS_MFGROUALT
[L]CURPRO = "MFGROUALT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGROUALT
[L]CURPRO = "MFGROUALT"
Return

$PROPAGATE_MFGROUALT
this.isReadonly = 0
[L]CURPRO = "MFGROUALT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGROUALT"
$_LNKPRO_MFGROUALT
Return


####################################################################
# 47 : CSTROUALT Code ( Field TRO 0)
####################################################################

$SET_CSTROUALT
If [L]_AOLDVAL<>this.CSTROUALT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CSTROUALT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CSTROUALT
 Gosub PROPAGATE_CSTROUALT
Endif
Return

$INIT_CSTROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CSTROUALT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CSTROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CSTROUALT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CSTROUALT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CSTROUALT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CSTROUALT
[L]CURPRO = "CSTROUALT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CSTROUALT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CSTROUALT
[L]CURPRO = "CSTROUALT"
Return

$_AOTHERS_CSTROUALT
[L]CURPRO = "CSTROUALT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CSTROUALT
[L]CURPRO = "CSTROUALT"
Return

$PROPAGATE_CSTROUALT
this.isReadonly = 0
[L]CURPRO = "CSTROUALT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CSTROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CSTROUALT"
$_LNKPRO_CSTROUALT
Return


####################################################################
# 48 : RCCROUALT Code ( Field TRO 0)
####################################################################

$SET_RCCROUALT
If [L]_AOLDVAL<>this.RCCROUALT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RCCROUALT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RCCROUALT
 Gosub PROPAGATE_RCCROUALT
Endif
Return

$INIT_RCCROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RCCROUALT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RCCROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RCCROUALT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RCCROUALT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RCCROUALT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RCCROUALT
[L]CURPRO = "RCCROUALT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RCCROUALT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RCCROUALT
[L]CURPRO = "RCCROUALT"
Return

$_AOTHERS_RCCROUALT
[L]CURPRO = "RCCROUALT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RCCROUALT
[L]CURPRO = "RCCROUALT"
Return

$PROPAGATE_RCCROUALT
this.isReadonly = 0
[L]CURPRO = "RCCROUALT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RCCROUALT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RCCROUALT"
$_LNKPRO_RCCROUALT
Return


####################################################################
# 49 : MFGSHTCOD Release if shortage ( Field Local menu number 1)
####################################################################

$SET_MFGSHTCOD
If [L]_AOLDVAL<>this.MFGSHTCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MFGSHTCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MFGSHTCOD
 Gosub PROPAGATE_MFGSHTCOD
Endif
Return

$INIT_MFGSHTCOD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGSHTCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.MFGSHTCOD=0 and fmet this.AGETATTRIBUTE("MFGSHTCOD","$isMandatory")="true"
 this.MFGSHTCOD = 1
Endif
Return
 
$CONTROL_MFGSHTCOD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGSHTCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MFGSHTCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MFGSHTCOD             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MFGSHTCOD
[L]CURPRO = "MFGSHTCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MFGSHTCOD=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MFGSHTCOD
[L]CURPRO = "MFGSHTCOD"
If this.MFGSHTCOD<0 or this.MFGSHTCOD>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.MFGSHTCOD)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_MFGSHTCOD
[L]CURPRO = "MFGSHTCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MFGSHTCOD
[L]CURPRO = "MFGSHTCOD"
Return

$PROPAGATE_MFGSHTCOD
this.isReadonly = 0
[L]CURPRO = "MFGSHTCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MFGSHTCOD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MFGSHTCOD"
$_LNKPRO_MFGSHTCOD
Return


####################################################################
# 50 : RELSCATIA Shrink with release ( Field Local menu number 1)
####################################################################

$SET_RELSCATIA
If [L]_AOLDVAL<>this.RELSCATIA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RELSCATIA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RELSCATIA
 Gosub PROPAGATE_RELSCATIA
Endif
Return

$INIT_RELSCATIA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RELSCATIA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.RELSCATIA=0 and fmet this.AGETATTRIBUTE("RELSCATIA","$isMandatory")="true"
 this.RELSCATIA = 1
Endif
Return
 
$CONTROL_RELSCATIA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RELSCATIA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RELSCATIA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RELSCATIA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RELSCATIA
[L]CURPRO = "RELSCATIA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RELSCATIA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RELSCATIA
[L]CURPRO = "RELSCATIA"
If this.RELSCATIA<0 or this.RELSCATIA>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.RELSCATIA)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_RELSCATIA
[L]CURPRO = "RELSCATIA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RELSCATIA
[L]CURPRO = "RELSCATIA"
Return

$PROPAGATE_RELSCATIA
this.isReadonly = 0
[L]CURPRO = "RELSCATIA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RELSCATIA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "RELSCATIA"
$_LNKPRO_RELSCATIA
Return


####################################################################
# 51 : MONPROYEA Last monthly close ( Field C 4)
####################################################################

$SET_MONPROYEA
If [L]_AOLDVAL<>this.MONPROYEA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MONPROYEA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MONPROYEA
 Gosub PROPAGATE_MONPROYEA
Endif
Return

$INIT_MONPROYEA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MONPROYEA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MONPROYEA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MONPROYEA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MONPROYEA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MONPROYEA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MONPROYEA
[L]CURPRO = "MONPROYEA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MONPROYEA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MONPROYEA
[L]CURPRO = "MONPROYEA"
Return

$_AOTHERS_MONPROYEA
[L]CURPRO = "MONPROYEA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MONPROYEA
[L]CURPRO = "MONPROYEA"
Return

$PROPAGATE_MONPROYEA
this.isReadonly = 0
[L]CURPRO = "MONPROYEA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MONPROYEA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MONPROYEA"
$_LNKPRO_MONPROYEA
Return


####################################################################
# 52 : MONPROMON Last monthly close ( Field C 2)
####################################################################

$SET_MONPROMON
If [L]_AOLDVAL<>this.MONPROMON
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MONPROMON
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MONPROMON
 Gosub PROPAGATE_MONPROMON
Endif
Return

$INIT_MONPROMON
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MONPROMON"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MONPROMON
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MONPROMON"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MONPROMON             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MONPROMON             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MONPROMON
[L]CURPRO = "MONPROMON"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MONPROMON=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MONPROMON
[L]CURPRO = "MONPROMON"
Return

$_AOTHERS_MONPROMON
[L]CURPRO = "MONPROMON"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MONPROMON
[L]CURPRO = "MONPROMON"
Return

$PROPAGATE_MONPROMON
this.isReadonly = 0
[L]CURPRO = "MONPROMON"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MONPROMON
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "MONPROMON"
$_LNKPRO_MONPROMON
Return


####################################################################
# 53 : YEAPROYEA Last annual close ( Field C 4)
####################################################################

$SET_YEAPROYEA
If [L]_AOLDVAL<>this.YEAPROYEA
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_YEAPROYEA
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.YEAPROYEA
 Gosub PROPAGATE_YEAPROYEA
Endif
Return

$INIT_YEAPROYEA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "YEAPROYEA"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_YEAPROYEA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "YEAPROYEA"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_YEAPROYEA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_YEAPROYEA             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_YEAPROYEA
[L]CURPRO = "YEAPROYEA"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.YEAPROYEA=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_YEAPROYEA
[L]CURPRO = "YEAPROYEA"
Return

$_AOTHERS_YEAPROYEA
[L]CURPRO = "YEAPROYEA"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_YEAPROYEA
[L]CURPRO = "YEAPROYEA"
Return

$PROPAGATE_YEAPROYEA
this.isReadonly = 0
[L]CURPRO = "YEAPROYEA"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_YEAPROYEA
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "YEAPROYEA"
$_LNKPRO_YEAPROYEA
Return


####################################################################
# 54 : CLEPCTAUT Automatic closing % ( Field DCB 3)
####################################################################

$SET_CLEPCTAUT
If [L]_AOLDVAL<>this.CLEPCTAUT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLEPCTAUT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CLEPCTAUT
 Gosub PROPAGATE_CLEPCTAUT
Endif
Return

$INIT_CLEPCTAUT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CLEPCTAUT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CLEPCTAUT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CLEPCTAUT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLEPCTAUT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLEPCTAUT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLEPCTAUT
[L]CURPRO = "CLEPCTAUT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CLEPCTAUT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLEPCTAUT
[L]CURPRO = "CLEPCTAUT"
Return

$_AOTHERS_CLEPCTAUT
[L]CURPRO = "CLEPCTAUT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLEPCTAUT
[L]CURPRO = "CLEPCTAUT"
Return

$PROPAGATE_CLEPCTAUT
this.isReadonly = 0
[L]CURPRO = "CLEPCTAUT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLEPCTAUT
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "CLEPCTAUT"
$_LNKPRO_CLEPCTAUT
Return


####################################################################
# 55 : VLTCOD Valuation method ( Field TCM 3)
####################################################################

$SET_VLTCOD
If [L]_AOLDVAL<>this.VLTCOD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VLTCOD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VLTCOD
 Gosub PROPAGATE_VLTCOD
Endif
Return

$INIT_VLTCOD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "VLTCOD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VLTCOD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "VLTCOD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VLTCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VLTCOD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VLTCOD
[L]CURPRO = "VLTCOD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VLTCOD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VLTCOD
[L]CURPRO = "VLTCOD"
If vireblc(this.VLTCOD,2)<>vireblc(format$("K:3c",this.VLTCOD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VLTCOD
[L]CURPRO = "VLTCOD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VLTCOD
[L]CURPRO = "VLTCOD"
Return

$PROPAGATE_VLTCOD
this.isReadonly = 0
[L]CURPRO = "VLTCOD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VLTCOD
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "VLTCOD"
$_LNKPRO_VLTCOD
Return


####################################################################
# 56 : PROPER Prorata qty. adjust. ( Field RAT 0)
####################################################################

$SET_PROPER
If [L]_AOLDVAL<>this.PROPER
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PROPER
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PROPER
 Gosub PROPAGATE_PROPER
Endif
Return

$INIT_PROPER
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PROPER"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PROPER
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PROPER"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PROPER                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PROPER                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PROPER
[L]CURPRO = "PROPER"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PROPER=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PROPER
[L]CURPRO = "PROPER"
Return

$_AOTHERS_PROPER
[L]CURPRO = "PROPER"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PROPER
[L]CURPRO = "PROPER"
Return

$PROPAGATE_PROPER
this.isReadonly = 0
[L]CURPRO = "PROPER"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PROPER
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PROPER"
$_LNKPRO_PROPER
Return


####################################################################
# 58 : WIPPRO WIP protect. ( Field Local menu number 1)
####################################################################

$SET_WIPPRO
If [L]_AOLDVAL<>this.WIPPRO
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_WIPPRO
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.WIPPRO
 Gosub PROPAGATE_WIPPRO
Endif
Return

$INIT_WIPPRO
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "WIPPRO"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.WIPPRO=0 and fmet this.AGETATTRIBUTE("WIPPRO","$isMandatory")="true"
 this.WIPPRO = 1
Endif
Return
 
$CONTROL_WIPPRO
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "WIPPRO"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_WIPPRO                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_WIPPRO                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_WIPPRO
[L]CURPRO = "WIPPRO"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.WIPPRO=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_WIPPRO
[L]CURPRO = "WIPPRO"
If this.WIPPRO<0 or this.WIPPRO>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.WIPPRO)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_WIPPRO
[L]CURPRO = "WIPPRO"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_WIPPRO
[L]CURPRO = "WIPPRO"
Return

$PROPAGATE_WIPPRO
this.isReadonly = 0
[L]CURPRO = "WIPPRO"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_WIPPRO
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "WIPPRO"
$_LNKPRO_WIPPRO
Return


####################################################################
# 59 : PCK Packaging ( Field PCK 5)
####################################################################

$SET_PCK
If [L]_AOLDVAL<>this.PCK
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PCK
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PCK
 Gosub PROPAGATE_PCK
Endif
Return

$INIT_PCK
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PCK"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PCK
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PCK"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PCK                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PCK                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PCK
[L]CURPRO = "PCK"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PCK,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PCK
[L]CURPRO = "PCK"
If vireblc(this.PCK,2)<>vireblc(format$("K:5c",this.PCK),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PCK
[L]CURPRO = "PCK"
If vireblc(this.PCK,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPPCK.ACTRLREF(this,"PCK",this.PCK,this.PCK,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PCK<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PCK
[L]CURPRO = "PCK"
Return

$PROPAGATE_PCK
this.isReadonly = 0
[L]CURPRO = "PCK"
Gosub _LNKPRO_PCK
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PCK
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PCK"
$_LNKPRO_PCK
If vireblc(this.PCK,2)<>""
 # Link TABPACKAGE
 Local File TABPACKAGE [WTPA]
 Read [F:WTPA]TPA0 = this.PCK
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABPACKAGE" & ZONE="SHOAXX" & IDENT1=[F:WTPA]PCK & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PCK","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABPACKAGE" & ZONE="DESAXX" & IDENT1=[F:WTPA]PCK & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PCK","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTPA]
Endif
Return


####################################################################
# 60 : PCKCAP Packaging capacity ( Field COE 0)
####################################################################

$SET_PCKCAP
If [L]_AOLDVAL<>this.PCKCAP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PCKCAP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PCKCAP
 Gosub PROPAGATE_PCKCAP
Endif
Return

$INIT_PCKCAP
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PCKCAP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PCKCAP
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PCKCAP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PCKCAP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PCKCAP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PCKCAP
[L]CURPRO = "PCKCAP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PCKCAP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PCKCAP
[L]CURPRO = "PCKCAP"
Return

$_AOTHERS_PCKCAP
[L]CURPRO = "PCKCAP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PCKCAP
[L]CURPRO = "PCKCAP"
Return

$PROPAGATE_PCKCAP
this.isReadonly = 0
[L]CURPRO = "PCKCAP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PCKCAP
Gosub DECLARE_VAR From WMC0ITMFACILIT
[L]CURPRO = "PCKCAP"
$_LNKPRO_PCKCAP
Return




