#<AdxTL>@(#)0.0.0.0 $Revision$Class Subsidies
# Supervisor
## ACLA-CLASSE ## GRANTS
# 2018-08-27 12:33:21 901

####################################################################
# AINIT
####################################################################

$AINIT
Gosub DECLARE_VAR From WMC0GRANTS
Local Integer ALINE,TBLINE,ASTASNAPSHOT,ALLSTAT
If this.APARENT=null & this.snapshotEnabled=0
 this.snapshotEnabled = 1
Elsif this.APARENT<>null
 this.snapshotEnabled = this.APARENT.snapshotEnabled
Endif
If this.ASTALIN=[V]CST_ALL : this.ASTALIN = [V]CST_ANEW : Endif
Gosub INIT_CPY From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_CUR From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_GRAREF From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_FCY From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_DES From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_DES2 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_APPROVDAT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_GRAORG From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_INVPLN From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_GRASTA From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_GRATYP From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_INVGRARAT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_MAXGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_GRAFLGFRC From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_GRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REAFLGFRC From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REAGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_INVFLGFRC From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_INVGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_CRBGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_CRBGRACUM From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_TOBERECAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_ACCCOD From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB1 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB2 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB3 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB4 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB5 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB6 From WMC1GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB7 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB8 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB9 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_REFTAB10 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA1 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA2 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA3 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA4 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA5 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA6 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA7 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA8 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA9 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDA10 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDD1 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDD2 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDD3 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDD4 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDM1 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDM2 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDM3 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDM4 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDM5 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDM6 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDC1 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_USRFLDC2 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_CREDAT From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_UPDDAT From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_EXPNUM From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_CREDATTIM From WMC2GRANTS : Gosub TESTALLSTAT
Gosub INIT_UPDDATTIM From WMC3GRANTS : Gosub TESTALLSTAT
Gosub INIT_AUUID From WMC3GRANTS : Gosub TESTALLSTAT
Gosub INIT_CREUSR From WMC3GRANTS : Gosub TESTALLSTAT
Gosub INIT_UPDUSR From WMC3GRANTS : Gosub TESTALLSTAT
Gosub INIT_CASHTOT From WMC3GRANTS : Gosub TESTALLSTAT
Gosub AINIT From WMC0GRANTS : Gosub TESTALLSTAT
If this.snapshotEnabled=1 & this.APARENT=null
 [L]ASTASNAPSHOT = this.freeSnapshot
Endif
Return

####################################################################
# _ALOADATTRIBUTE
####################################################################

$_ALOADATTRIBUTE
Gosub DECLARE_VAR From WMC0GRANTS
Gosub _ALOADATTRIBUTE_CPY From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_CUR From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_GRAREF From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_FCY From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_DES From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_APPROVDAT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_GRAORG From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_INVPLN From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_GRASTA From WMC1GRANTS : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_GRATYP From WMC1GRANTS : Gosub TESTALLSTAT
Return

####################################################################
# _ALNKPRO
####################################################################

$_ALNKPRO
Gosub DECLARE_VAR From WMC0GRANTS
Gosub LNKPRO_CPY From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_CUR From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_FCY From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_GRAORG From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_INVPLN From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_MAXGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_GRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_REAGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_INVGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_CRBGRAAMT From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_CRBGRACUM From WMC1GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_TOBERECAMT From WMC1GRANTS : Gosub TESTALLSTAT
For AINDCLA=1 To 20
 If this.CANA(AINDCLA)<>null& find(this.CANA(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.CANA(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_USRFLDA1 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA2 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA3 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA4 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA5 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA6 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA7 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA8 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA9 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDA10 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDM1 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDM2 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDM3 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDM4 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDM5 From WMC2GRANTS : Gosub TESTALLSTAT
Gosub LNKPRO_USRFLDM6 From WMC2GRANTS : Gosub TESTALLSTAT
For AINDCLA=1 To maxtab(this.CASHING)
 If this.CASHING(AINDCLA)<>null& find(this.CASHING(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.CASHING(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_CASHTOT From WMC3GRANTS : Gosub TESTALLSTAT
Return

$TESTALLSTAT
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return



