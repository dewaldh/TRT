#<AdxTL>@(#)0.0.0.0 $Revision$Class Settlement Rule
# Supervisor
## ACLA-CLASSE ## YSTR
# 2018-11-15 02:51:51 918

####################################################################
# AINIT
####################################################################

$AINIT
Gosub DECLARE_VAR From WMC0YSTR
Local Integer ALINE,TBLINE,ASTASNAPSHOT,ALLSTAT
If this.APARENT=null & this.snapshotEnabled=0
 this.snapshotEnabled = 1
Elsif this.APARENT<>null
 this.snapshotEnabled = this.APARENT.snapshotEnabled
Endif
If this.ASTALIN=[V]CST_ALL : this.ASTALIN = [V]CST_ANEW : Endif
Gosub INIT_YRULID From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YRULTYPCOD From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YACTFLG From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YSET From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YLANDPUR From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YPRECINCT From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YSTAG From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YLOT From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YSTRDES From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YLIGDES From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YVLDFRM From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YVLDTO From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YPRC From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFFXDVAL From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFFCY From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFBANK From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFACC From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFDRCR From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFGST From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFAMTAMD From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFLONAGR From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFPJTLIN From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YFCCE From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTFCY From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTACC From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTGST From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTAMTAMD From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTLONLGR From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTPJTLIN From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_YTCCE From WMC1YSTR : Gosub TESTALLSTAT
Gosub INIT_CREDATTIM From WMC2YSTR : Gosub TESTALLSTAT
Gosub INIT_UPDDATTIM From WMC2YSTR : Gosub TESTALLSTAT
Gosub INIT_AUUID From WMC2YSTR : Gosub TESTALLSTAT
Gosub INIT_CREUSR From WMC2YSTR : Gosub TESTALLSTAT
Gosub INIT_UPDUSR From WMC2YSTR : Gosub TESTALLSTAT
Gosub AINIT From WMC0YSTR : Gosub TESTALLSTAT
If this.snapshotEnabled=1 & this.APARENT=null
 [L]ASTASNAPSHOT = this.freeSnapshot
Endif
Return

####################################################################
# _ALOADATTRIBUTE
####################################################################

$_ALOADATTRIBUTE
Gosub DECLARE_VAR From WMC0YSTR
Gosub _ALOADATTRIBUTE_YLOT From WMC1YSTR : Gosub TESTALLSTAT
Return

####################################################################
# _ALNKPRO
####################################################################

$_ALNKPRO
Gosub DECLARE_VAR From WMC0YSTR
Gosub LNKPRO_YFFCY From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YFACC From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YFGST From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YFCCE From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YTFCY From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YTACC From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YTGST From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_YTCCE From WMC1YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_CREUSR From WMC2YSTR : Gosub TESTALLSTAT
Gosub LNKPRO_UPDUSR From WMC2YSTR : Gosub TESTALLSTAT
For AINDCLA=1 To maxtab(this.YSRT)
 If this.YSRT(AINDCLA)<>null& find(this.YSRT(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.YSRT(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Return

$TESTALLSTAT
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return



