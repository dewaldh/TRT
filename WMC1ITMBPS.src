#<AdxTL>@(#)0.0.0.0 $Revision$Class Supplier product
# Supervisor
## ACLA-CLASSE ## ITMBPS
# 2018-08-27 12:34:05 116


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : ITMREF Product ( Field ITM 20)
####################################################################

$SET_ITMREF
If [L]_AOLDVAL<>this.ITMREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMREF
 Gosub PROPAGATE_ITMREF
Endif
Return

$INIT_ITMREF
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMREF
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMREF
[L]CURPRO = "ITMREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>vireblc(format$("K:20c",this.ITMREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITM.ACTRLREF(this,"ITMREF",this.ITMREF,this.ITMREF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ITMREF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMREF
[L]CURPRO = "ITMREF"
Return

$PROPAGATE_ITMREF
this.isReadonly = 0
[L]CURPRO = "ITMREF"
Gosub _LNKPRO_ITMREF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMREF
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMREF"
$_LNKPRO_ITMREF
If vireblc(this.ITMREF,2)<>""
 # Link ITMMASTER
 Local File ITMMASTER [WITM]
 Read [F:WITM]ITM0 = this.ITMREF
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMMASTER" & ZONE="DES1AXX" & IDENT1=[F:WITM]ITMREF & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITM]
Endif
Return

$_ALOADATTRIBUTE_ITMREF
[L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$isMandatory","true")
Return


####################################################################
# 2 : BPSNUM Supplier ( Field BPR 15)
####################################################################

$SET_BPSNUM
If [L]_AOLDVAL<>this.BPSNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPSNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPSNUM
 Gosub PROPAGATE_BPSNUM
Endif
Return

$INIT_BPSNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "BPSNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPSNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "BPSNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPSNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPSNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPSNUM
[L]CURPRO = "BPSNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPSNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPSNUM
[L]CURPRO = "BPSNUM"
If vireblc(this.BPSNUM,2)<>vireblc(format$("K:15c",this.BPSNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPSNUM
[L]CURPRO = "BPSNUM"
If vireblc(this.BPSNUM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPSNUM",this.BPSNUM,this.BPSNUM,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPSNUM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPSNUM
[L]CURPRO = "BPSNUM"
Return

$PROPAGATE_BPSNUM
this.isReadonly = 0
[L]CURPRO = "BPSNUM"
Gosub _LNKPRO_BPSNUM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPSNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "BPSNUM"
$_LNKPRO_BPSNUM
If vireblc(this.BPSNUM,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPSNUM
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPSNUM","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPSNUM","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return

$_ALOADATTRIBUTE_BPSNUM
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPSNUM","$isMandatory","true")
Return


####################################################################
# 3 : PIO Priority ( Field C 2)
####################################################################

$SET_PIO
If [L]_AOLDVAL<>this.PIO
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PIO
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PIO
 Gosub PROPAGATE_PIO
Endif
Return

$INIT_PIO
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PIO"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PIO
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PIO"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PIO                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PIO                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PIO
[L]CURPRO = "PIO"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PIO=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PIO
[L]CURPRO = "PIO"
Return

$_AOTHERS_PIO
[L]CURPRO = "PIO"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PIO
[L]CURPRO = "PIO"
Return

$PROPAGATE_PIO
this.isReadonly = 0
[L]CURPRO = "PIO"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PIO
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PIO"
$_LNKPRO_PIO
Return


####################################################################
# 4 : ITMREFBPS Supplier product ( Field A 20)
####################################################################

$SET_ITMREFBPS
If [L]_AOLDVAL<>this.ITMREFBPS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMREFBPS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMREFBPS
 Gosub PROPAGATE_ITMREFBPS
Endif
Return

$INIT_ITMREFBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMREFBPS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMREFBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMREFBPS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMREFBPS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMREFBPS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMREFBPS
[L]CURPRO = "ITMREFBPS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMREFBPS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMREFBPS
[L]CURPRO = "ITMREFBPS"
Return

$_AOTHERS_ITMREFBPS
[L]CURPRO = "ITMREFBPS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMREFBPS
[L]CURPRO = "ITMREFBPS"
Return

$PROPAGATE_ITMREFBPS
this.isReadonly = 0
[L]CURPRO = "ITMREFBPS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMREFBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMREFBPS"
$_LNKPRO_ITMREFBPS
Return


####################################################################
# 5 : ITMDESBPS Supplier description ( Field DES 30)
####################################################################

$SET_ITMDESBPS
If [L]_AOLDVAL<>this.ITMDESBPS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMDESBPS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMDESBPS
 Gosub PROPAGATE_ITMDESBPS
Endif
Return

$INIT_ITMDESBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMDESBPS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMDESBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMDESBPS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMDESBPS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMDESBPS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMDESBPS
[L]CURPRO = "ITMDESBPS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMDESBPS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMDESBPS
[L]CURPRO = "ITMDESBPS"
If vireblc(this.ITMDESBPS,2)<>vireblc(format$("K:30X",this.ITMDESBPS),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ITMDESBPS
[L]CURPRO = "ITMDESBPS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMDESBPS
[L]CURPRO = "ITMDESBPS"
Return

$PROPAGATE_ITMDESBPS
this.isReadonly = 0
[L]CURPRO = "ITMDESBPS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMDESBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "ITMDESBPS"
$_LNKPRO_ITMDESBPS
Return


####################################################################
# 6 : EANCODBPS Supplier UPC code ( Field A 20)
####################################################################

$SET_EANCODBPS
If [L]_AOLDVAL<>this.EANCODBPS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EANCODBPS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EANCODBPS
 Gosub PROPAGATE_EANCODBPS
Endif
Return

$INIT_EANCODBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EANCODBPS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EANCODBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EANCODBPS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EANCODBPS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EANCODBPS             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EANCODBPS
[L]CURPRO = "EANCODBPS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.EANCODBPS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EANCODBPS
[L]CURPRO = "EANCODBPS"
Return

$_AOTHERS_EANCODBPS
[L]CURPRO = "EANCODBPS"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EANCODBPS
[L]CURPRO = "EANCODBPS"
Return

$PROPAGATE_EANCODBPS
this.isReadonly = 0
[L]CURPRO = "EANCODBPS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EANCODBPS
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EANCODBPS"
$_LNKPRO_EANCODBPS
Return


####################################################################
# 7 : PUU Purchase unit ( Field UOM 3)
####################################################################

$SET_PUU
If [L]_AOLDVAL<>this.PUU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PUU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PUU
 Gosub PROPAGATE_PUU
Endif
Return

$INIT_PUU
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PUU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PUU
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PUU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PUU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PUU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PUU
[L]CURPRO = "PUU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PUU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PUU
[L]CURPRO = "PUU"
If vireblc(this.PUU,2)<>vireblc(format$("K:3X",this.PUU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PUU
[L]CURPRO = "PUU"
If vireblc(this.PUU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"PUU",this.PUU,this.PUU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PUU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PUU
[L]CURPRO = "PUU"
Return

$PROPAGATE_PUU
this.isReadonly = 0
[L]CURPRO = "PUU"
Gosub _LNKPRO_PUU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PUU
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PUU"
$_LNKPRO_PUU
If vireblc(this.PUU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.PUU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PUU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PUU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PUU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("PUU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return

$_ALOADATTRIBUTE_PUU
[L]ASTATUS = fmet this.ASETATTRIBUTE("PUU","$isMandatory","true")
Return


####################################################################
# 8 : PUUSTUCOE PUR-STK conv. ( Field COE 0)
####################################################################

$SET_PUUSTUCOE
If [L]_AOLDVAL<>this.PUUSTUCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PUUSTUCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PUUSTUCOE
 Gosub PROPAGATE_PUUSTUCOE
Endif
Return

$INIT_PUUSTUCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PUUSTUCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PUUSTUCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PUUSTUCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PUUSTUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PUUSTUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PUUSTUCOE
[L]CURPRO = "PUUSTUCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PUUSTUCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PUUSTUCOE
[L]CURPRO = "PUUSTUCOE"
Return

$_AOTHERS_PUUSTUCOE
[L]CURPRO = "PUUSTUCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PUUSTUCOE
[L]CURPRO = "PUUSTUCOE"
Return

$PROPAGATE_PUUSTUCOE
this.isReadonly = 0
[L]CURPRO = "PUUSTUCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PUUSTUCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PUUSTUCOE"
$_LNKPRO_PUUSTUCOE
Return


####################################################################
# 9 : PCU Pack unit ( Field UOM 3)
####################################################################

$SET_PCU
If [L]_AOLDVAL<>this.PCU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PCU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PCU
 Gosub PROPAGATE_PCU
Endif
Return

$INIT_PCU
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PCU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PCU
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PCU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PCU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PCU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PCU
[L]CURPRO = "PCU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PCU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PCU
[L]CURPRO = "PCU"
If vireblc(this.PCU,2)<>vireblc(format$("K:3X",this.PCU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PCU
[L]CURPRO = "PCU"
If vireblc(this.PCU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"PCU",this.PCU,this.PCU,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PCU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PCU
[L]CURPRO = "PCU"
Return

$PROPAGATE_PCU
this.isReadonly = 0
[L]CURPRO = "PCU"
Gosub _LNKPRO_PCU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PCU
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PCU"
$_LNKPRO_PCU
If vireblc(this.PCU,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.PCU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PCU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("PCU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PCU","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("PCU","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return


####################################################################
# 10 : PCUPUUCOE PAC-PUR conv. ( Field COE 0)
####################################################################

$SET_PCUPUUCOE
If [L]_AOLDVAL<>this.PCUPUUCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PCUPUUCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PCUPUUCOE
 Gosub PROPAGATE_PCUPUUCOE
Endif
Return

$INIT_PCUPUUCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PCUPUUCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PCUPUUCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PCUPUUCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PCUPUUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PCUPUUCOE             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PCUPUUCOE
[L]CURPRO = "PCUPUUCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PCUPUUCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PCUPUUCOE
[L]CURPRO = "PCUPUUCOE"
Return

$_AOTHERS_PCUPUUCOE
[L]CURPRO = "PCUPUUCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PCUPUUCOE
[L]CURPRO = "PCUPUUCOE"
Return

$PROPAGATE_PCUPUUCOE
this.isReadonly = 0
[L]CURPRO = "PCUPUUCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PCUPUUCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PCUPUUCOE"
$_LNKPRO_PCUPUUCOE
Return


####################################################################
# 11 : EECINCRAT EU increase ( Field RAT 0)
####################################################################

$SET_EECINCRAT
If [L]_AOLDVAL<>this.EECINCRAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EECINCRAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EECINCRAT
 Gosub PROPAGATE_EECINCRAT
Endif
Return

$INIT_EECINCRAT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EECINCRAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EECINCRAT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EECINCRAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EECINCRAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EECINCRAT             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EECINCRAT
[L]CURPRO = "EECINCRAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EECINCRAT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EECINCRAT
[L]CURPRO = "EECINCRAT"
Return

$_AOTHERS_EECINCRAT
[L]CURPRO = "EECINCRAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EECINCRAT
[L]CURPRO = "EECINCRAT"
Return

$PROPAGATE_EECINCRAT
this.isReadonly = 0
[L]CURPRO = "EECINCRAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EECINCRAT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EECINCRAT"
$_LNKPRO_EECINCRAT
Return


####################################################################
# 12 : PURMINQTY Minimum PO qty. ( Field QTY 0)
####################################################################

$SET_PURMINQTY
If [L]_AOLDVAL<>this.PURMINQTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PURMINQTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PURMINQTY
 Gosub PROPAGATE_PURMINQTY
Endif
Return

$INIT_PURMINQTY
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PURMINQTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PURMINQTY
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PURMINQTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PURMINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PURMINQTY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PURMINQTY
[L]CURPRO = "PURMINQTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.PURMINQTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PURMINQTY
[L]CURPRO = "PURMINQTY"
Return

$_AOTHERS_PURMINQTY
[L]CURPRO = "PURMINQTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PURMINQTY
[L]CURPRO = "PURMINQTY"
Return

$PROPAGATE_PURMINQTY
this.isReadonly = 0
[L]CURPRO = "PURMINQTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PURMINQTY
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "PURMINQTY"
$_LNKPRO_PURMINQTY
Return


####################################################################
# 13 : CPRCOE Landed cost coef. ( Field COE 0)
####################################################################

$SET_CPRCOE
If [L]_AOLDVAL<>this.CPRCOE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPRCOE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPRCOE
 Gosub PROPAGATE_CPRCOE
Endif
Return

$INIT_CPRCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CPRCOE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPRCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CPRCOE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPRCOE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPRCOE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPRCOE
[L]CURPRO = "CPRCOE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CPRCOE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPRCOE
[L]CURPRO = "CPRCOE"
Return

$_AOTHERS_CPRCOE
[L]CURPRO = "CPRCOE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPRCOE
[L]CURPRO = "CPRCOE"
Return

$PROPAGATE_CPRCOE
this.isReadonly = 0
[L]CURPRO = "CPRCOE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPRCOE
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CPRCOE"
$_LNKPRO_CPRCOE
Return


####################################################################
# 14 : QLYMRK Quality rank ( Field C 2)
####################################################################

$SET_QLYMRK
If [L]_AOLDVAL<>this.QLYMRK
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QLYMRK
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QLYMRK
 Gosub PROPAGATE_QLYMRK
Endif
Return

$INIT_QLYMRK
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QLYMRK"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QLYMRK
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QLYMRK"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QLYMRK                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QLYMRK                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QLYMRK
[L]CURPRO = "QLYMRK"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QLYMRK=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QLYMRK
[L]CURPRO = "QLYMRK"
Return

$_AOTHERS_QLYMRK
[L]CURPRO = "QLYMRK"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QLYMRK
[L]CURPRO = "QLYMRK"
Return

$PROPAGATE_QLYMRK
this.isReadonly = 0
[L]CURPRO = "QLYMRK"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QLYMRK
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QLYMRK"
$_LNKPRO_QLYMRK
Return


####################################################################
# 15 : DOUFLG Blocking ( Field Local menu number 516)
####################################################################

$SET_DOUFLG
If [L]_AOLDVAL<>this.DOUFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DOUFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DOUFLG
 Gosub PROPAGATE_DOUFLG
Endif
Return

$INIT_DOUFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "DOUFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.DOUFLG=0 and fmet this.AGETATTRIBUTE("DOUFLG","$isMandatory")="true"
 this.DOUFLG = 1
Endif
Return
 
$CONTROL_DOUFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "DOUFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DOUFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DOUFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DOUFLG
[L]CURPRO = "DOUFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DOUFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DOUFLG
[L]CURPRO = "DOUFLG"
If this.DOUFLG<0 or this.DOUFLG>len(mess(0,516,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"516 ->"-num$(this.DOUFLG)-mess(99,123,1)):  Return : # Local menu "516 -> Invalid option
Endif
Return

$_AOTHERS_DOUFLG
[L]CURPRO = "DOUFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DOUFLG
[L]CURPRO = "DOUFLG"
Return

$PROPAGATE_DOUFLG
this.isReadonly = 0
[L]CURPRO = "DOUFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DOUFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "DOUFLG"
$_LNKPRO_DOUFLG
Return


####################################################################
# 16 : QUAFLG QC management ( Field Local menu number 275)
####################################################################

$SET_QUAFLG
If [L]_AOLDVAL<>this.QUAFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QUAFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QUAFLG
 Gosub PROPAGATE_QUAFLG
Endif
Return

$INIT_QUAFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.QUAFLG=0 and fmet this.AGETATTRIBUTE("QUAFLG","$isMandatory")="true"
 this.QUAFLG = 1
Endif
Return
 
$CONTROL_QUAFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QUAFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QUAFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QUAFLG
[L]CURPRO = "QUAFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QUAFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QUAFLG
[L]CURPRO = "QUAFLG"
If this.QUAFLG<0 or this.QUAFLG>len(mess(0,275,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"275 ->"-num$(this.QUAFLG)-mess(99,123,1)):  Return : # Local menu "275 -> Invalid option
Endif
Return

$_AOTHERS_QUAFLG
[L]CURPRO = "QUAFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QUAFLG
[L]CURPRO = "QUAFLG"
Return

$PROPAGATE_QUAFLG
this.isReadonly = 0
[L]CURPRO = "QUAFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QUAFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAFLG"
$_LNKPRO_QUAFLG
Return


####################################################################
# 17 : CTMBPSFLG Back-to-back order ( Field Local menu number 1)
####################################################################

$SET_CTMBPSFLG
If [L]_AOLDVAL<>this.CTMBPSFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CTMBPSFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CTMBPSFLG
 Gosub PROPAGATE_CTMBPSFLG
Endif
Return

$INIT_CTMBPSFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CTMBPSFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CTMBPSFLG=0 and fmet this.AGETATTRIBUTE("CTMBPSFLG","$isMandatory")="true"
 this.CTMBPSFLG = 1
Endif
Return
 
$CONTROL_CTMBPSFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CTMBPSFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CTMBPSFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CTMBPSFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CTMBPSFLG
[L]CURPRO = "CTMBPSFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CTMBPSFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CTMBPSFLG
[L]CURPRO = "CTMBPSFLG"
If this.CTMBPSFLG<0 or this.CTMBPSFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.CTMBPSFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_CTMBPSFLG
[L]CURPRO = "CTMBPSFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CTMBPSFLG
[L]CURPRO = "CTMBPSFLG"
Return

$PROPAGATE_CTMBPSFLG
this.isReadonly = 0
[L]CURPRO = "CTMBPSFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CTMBPSFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CTMBPSFLG"
$_LNKPRO_CTMBPSFLG
Return


####################################################################
# 18 : TEX Text ( Field TXC 12)
####################################################################

$SET_TEX
If [L]_AOLDVAL<>this.TEX
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TEX
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TEX
 Gosub PROPAGATE_TEX
Endif
Return

$INIT_TEX
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "TEX"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_TEX
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "TEX"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TEX                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TEX                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TEX
[L]CURPRO = "TEX"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.TEX,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TEX
[L]CURPRO = "TEX"
If vireblc(this.TEX,2)<>vireblc(format$("K:12X",this.TEX),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_TEX
[L]CURPRO = "TEX"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TEX
[L]CURPRO = "TEX"
Return

$PROPAGATE_TEX
this.isReadonly = 0
[L]CURPRO = "TEX"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TEX
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "TEX"
$_LNKPRO_TEX
Return


####################################################################
# 19 : BOMALT Subcontract BOM ( Field TBO 0)
####################################################################

$SET_BOMALT
If [L]_AOLDVAL<>this.BOMALT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BOMALT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BOMALT
 Gosub PROPAGATE_BOMALT
Endif
Return

$INIT_BOMALT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "BOMALT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BOMALT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "BOMALT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BOMALT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BOMALT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BOMALT
[L]CURPRO = "BOMALT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.BOMALT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BOMALT
[L]CURPRO = "BOMALT"
Return

$_AOTHERS_BOMALT
[L]CURPRO = "BOMALT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BOMALT
[L]CURPRO = "BOMALT"
If this.BOMALT<>0
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTBO.ACTRLREF(this,"BOMALT",this.BOMALT,3,this.BOMALT,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BOMALT<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_BOMALT
this.isReadonly = 0
[L]CURPRO = "BOMALT"
Gosub _LNKPRO_BOMALT
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BOMALT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "BOMALT"
$_LNKPRO_BOMALT
If this.BOMALT<>0
 # Link TABBOMALT
 Local File TABBOMALT [WTBO]
 Read [F:WTBO]TBO0 = 3;this.BOMALT
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABBOMALT" & ZONE="TBOSHOAXX" & IDENT1=num$([F:WTBO]BOMALTTYP) & IDENT2=num$([F:WTBO]BOMALT) & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BOMALT","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABBOMALT" & ZONE="TBODESAXX" & IDENT1=num$([F:WTBO]BOMALTTYP) & IDENT2=num$([F:WTBO]BOMALT) & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("BOMALT","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTBO]
Endif
Return


####################################################################
# 20 : SCOLTI Subcontract LT ( Field C 4)
####################################################################

$SET_SCOLTI
If [L]_AOLDVAL<>this.SCOLTI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SCOLTI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SCOLTI
 Gosub PROPAGATE_SCOLTI
Endif
Return

$INIT_SCOLTI
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "SCOLTI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SCOLTI
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "SCOLTI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SCOLTI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SCOLTI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SCOLTI
[L]CURPRO = "SCOLTI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SCOLTI=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SCOLTI
[L]CURPRO = "SCOLTI"
Return

$_AOTHERS_SCOLTI
[L]CURPRO = "SCOLTI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SCOLTI
[L]CURPRO = "SCOLTI"
Return

$PROPAGATE_SCOLTI
this.isReadonly = 0
[L]CURPRO = "SCOLTI"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SCOLTI
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "SCOLTI"
$_LNKPRO_SCOLTI
Return


####################################################################
# 21 : QLYCRD Quality record ( Field QLC 8)
####################################################################

$SET_QLYCRD
If [L]_AOLDVAL<>this.QLYCRD
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QLYCRD
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QLYCRD
 Gosub PROPAGATE_QLYCRD
Endif
Return

$INIT_QLYCRD
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QLYCRD"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QLYCRD
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QLYCRD"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QLYCRD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QLYCRD                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QLYCRD
[L]CURPRO = "QLYCRD"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.QLYCRD,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QLYCRD
[L]CURPRO = "QLYCRD"
If vireblc(this.QLYCRD,2)<>vireblc(format$("K:8c",this.QLYCRD),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_QLYCRD
[L]CURPRO = "QLYCRD"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QLYCRD
[L]CURPRO = "QLYCRD"
Return

$PROPAGATE_QLYCRD
this.isReadonly = 0
[L]CURPRO = "QLYCRD"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QLYCRD
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QLYCRD"
$_LNKPRO_QLYCRD
Return


####################################################################
# 22 : QUAFRY Frequency ( Field L 4)
####################################################################

$SET_QUAFRY
If [L]_AOLDVAL<>this.QUAFRY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QUAFRY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QUAFRY
 Gosub PROPAGATE_QUAFRY
Endif
Return

$INIT_QUAFRY
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAFRY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QUAFRY
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAFRY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QUAFRY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QUAFRY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QUAFRY
[L]CURPRO = "QUAFRY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QUAFRY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QUAFRY
[L]CURPRO = "QUAFRY"
Return

$_AOTHERS_QUAFRY
[L]CURPRO = "QUAFRY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QUAFRY
[L]CURPRO = "QUAFRY"
Return

$PROPAGATE_QUAFRY
this.isReadonly = 0
[L]CURPRO = "QUAFRY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QUAFRY
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAFRY"
$_LNKPRO_QUAFRY
Return


####################################################################
# 23 : QUANUM Control number ( Field L 4)
####################################################################

$SET_QUANUM
If [L]_AOLDVAL<>this.QUANUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QUANUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QUANUM
 Gosub PROPAGATE_QUANUM
Endif
Return

$INIT_QUANUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUANUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QUANUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUANUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QUANUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QUANUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QUANUM
[L]CURPRO = "QUANUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QUANUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QUANUM
[L]CURPRO = "QUANUM"
Return

$_AOTHERS_QUANUM
[L]CURPRO = "QUANUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QUANUM
[L]CURPRO = "QUANUM"
Return

$PROPAGATE_QUANUM
this.isReadonly = 0
[L]CURPRO = "QUANUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QUANUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUANUM"
$_LNKPRO_QUANUM
Return


####################################################################
# 24 : QUAADXUID Process frequency ( Field L 8)
####################################################################

$SET_QUAADXUID
If [L]_AOLDVAL<>this.QUAADXUID
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QUAADXUID
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QUAADXUID
 Gosub PROPAGATE_QUAADXUID
Endif
Return

$INIT_QUAADXUID
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAADXUID"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QUAADXUID
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAADXUID"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QUAADXUID             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QUAADXUID             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QUAADXUID
[L]CURPRO = "QUAADXUID"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QUAADXUID=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QUAADXUID
[L]CURPRO = "QUAADXUID"
Return

$_AOTHERS_QUAADXUID
[L]CURPRO = "QUAADXUID"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QUAADXUID
[L]CURPRO = "QUAADXUID"
Return

$PROPAGATE_QUAADXUID
this.isReadonly = 0
[L]CURPRO = "QUAADXUID"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QUAADXUID
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUAADXUID"
$_LNKPRO_QUAADXUID
Return


####################################################################
# 25 : QUANUMUID Entries process ( Field L 4)
####################################################################

$SET_QUANUMUID
If [L]_AOLDVAL<>this.QUANUMUID
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QUANUMUID
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QUANUMUID
 Gosub PROPAGATE_QUANUMUID
Endif
Return

$INIT_QUANUMUID
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUANUMUID"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QUANUMUID
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUANUMUID"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QUANUMUID             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QUANUMUID             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QUANUMUID
[L]CURPRO = "QUANUMUID"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QUANUMUID=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QUANUMUID
[L]CURPRO = "QUANUMUID"
Return

$_AOTHERS_QUANUMUID
[L]CURPRO = "QUANUMUID"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QUANUMUID
[L]CURPRO = "QUANUMUID"
Return

$PROPAGATE_QUANUMUID
this.isReadonly = 0
[L]CURPRO = "QUANUMUID"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QUANUMUID
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "QUANUMUID"
$_LNKPRO_QUANUMUID
Return


####################################################################
# 26 : MATTOL Matching tolerance ( Field MAT 5)
####################################################################

$SET_MATTOL
If [L]_AOLDVAL<>this.MATTOL
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MATTOL
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MATTOL
 Gosub PROPAGATE_MATTOL
Endif
Return

$INIT_MATTOL
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "MATTOL"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_MATTOL
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "MATTOL"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MATTOL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MATTOL                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MATTOL
[L]CURPRO = "MATTOL"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.MATTOL,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MATTOL
[L]CURPRO = "MATTOL"
If vireblc(this.MATTOL,2)<>vireblc(format$("K:5c",this.MATTOL),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_MATTOL
[L]CURPRO = "MATTOL"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MATTOL
[L]CURPRO = "MATTOL"
Return

$PROPAGATE_MATTOL
this.isReadonly = 0
[L]CURPRO = "MATTOL"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MATTOL
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "MATTOL"
$_LNKPRO_MATTOL
Return


####################################################################
# 27 : LOAECCFLG Version preloading ( Field Local menu number 1)
####################################################################

$SET_LOAECCFLG
If [L]_AOLDVAL<>this.LOAECCFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LOAECCFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LOAECCFLG
 Gosub PROPAGATE_LOAECCFLG
Endif
Return

$INIT_LOAECCFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "LOAECCFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.LOAECCFLG=0 and fmet this.AGETATTRIBUTE("LOAECCFLG","$isMandatory")="true"
 this.LOAECCFLG = 1
Endif
Return
 
$CONTROL_LOAECCFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "LOAECCFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LOAECCFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LOAECCFLG             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LOAECCFLG
[L]CURPRO = "LOAECCFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.LOAECCFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LOAECCFLG
[L]CURPRO = "LOAECCFLG"
If this.LOAECCFLG<0 or this.LOAECCFLG>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.LOAECCFLG)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_LOAECCFLG
[L]CURPRO = "LOAECCFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LOAECCFLG
[L]CURPRO = "LOAECCFLG"
Return

$PROPAGATE_LOAECCFLG
this.isReadonly = 0
[L]CURPRO = "LOAECCFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LOAECCFLG
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "LOAECCFLG"
$_LNKPRO_LOAECCFLG
Return


####################################################################
# 28 : CPRAMT Fixed cost per unit ( Field MD5 0)
####################################################################

$SET_CPRAMT
If [L]_AOLDVAL<>this.CPRAMT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPRAMT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPRAMT
 Gosub PROPAGATE_CPRAMT
Endif
Return

$INIT_CPRAMT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CPRAMT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPRAMT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CPRAMT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPRAMT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPRAMT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPRAMT
[L]CURPRO = "CPRAMT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CPRAMT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPRAMT
[L]CURPRO = "CPRAMT"
Return

$_AOTHERS_CPRAMT
[L]CURPRO = "CPRAMT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD5(this,"CPRAMT",this.CPRAMT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPRAMT
[L]CURPRO = "CPRAMT"
Return

$PROPAGATE_CPRAMT
this.isReadonly = 0
[L]CURPRO = "CPRAMT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPRAMT
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "CPRAMT"
$_LNKPRO_CPRAMT
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD5(this,"CPRAMT",this.CPRAMT,[L]AFORMAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("CPRAMT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 29 : STCNUM Cost structure ( Field VCR 20)
####################################################################

$SET_STCNUM
If [L]_AOLDVAL<>this.STCNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_STCNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.STCNUM
 Gosub PROPAGATE_STCNUM
Endif
Return

$INIT_STCNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "STCNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_STCNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "STCNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_STCNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_STCNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_STCNUM
[L]CURPRO = "STCNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.STCNUM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_STCNUM
[L]CURPRO = "STCNUM"
If vireblc(this.STCNUM,2)<>vireblc(format$("K:20X",this.STCNUM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_STCNUM
[L]CURPRO = "STCNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_STCNUM
[L]CURPRO = "STCNUM"
Return

$PROPAGATE_STCNUM
this.isReadonly = 0
[L]CURPRO = "STCNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_STCNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "STCNUM"
$_LNKPRO_STCNUM
Return


####################################################################
# 30 : EXPNUM Export number ( Field L 8)
####################################################################

$SET_EXPNUM
If [L]_AOLDVAL<>this.EXPNUM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_EXPNUM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.EXPNUM
 Gosub PROPAGATE_EXPNUM
Endif
Return

$INIT_EXPNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EXPNUM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_EXPNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EXPNUM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_EXPNUM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_EXPNUM
[L]CURPRO = "EXPNUM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.EXPNUM=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$_AOTHERS_EXPNUM
[L]CURPRO = "EXPNUM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_EXPNUM
[L]CURPRO = "EXPNUM"
Return

$PROPAGATE_EXPNUM
this.isReadonly = 0
[L]CURPRO = "EXPNUM"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_EXPNUM
Gosub DECLARE_VAR From WMC0ITMBPS
[L]CURPRO = "EXPNUM"
$_LNKPRO_EXPNUM
Return




