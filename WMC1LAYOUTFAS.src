#<AdxTL>@(#)0.0.0.0 $Revision$Class Expenses
# Supervisor
## ACLA-CLASSE ## LAYOUTFAS
# 2018-08-27 12:35:56 833


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : CREDAT Date created ( Field D4)
####################################################################

$SET_CREDAT
If [L]_AOLDVAL<>this.CREDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREDAT
 Gosub PROPAGATE_CREDAT
Endif
Return

$INIT_CREDAT
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CREDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CREDAT
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CREDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREDAT
[L]CURPRO = "CREDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CREDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREDAT
[L]CURPRO = "CREDAT"
Return

$_AOTHERS_CREDAT
[L]CURPRO = "CREDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREDAT
[L]CURPRO = "CREDAT"
Return

$PROPAGATE_CREDAT
this.isReadonly = 0
[L]CURPRO = "CREDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREDAT
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CREDAT"
$_LNKPRO_CREDAT
Return


####################################################################
# 2 : UPDDAT Change date ( Field D4)
####################################################################

$SET_UPDDAT
If [L]_AOLDVAL<>this.UPDDAT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UPDDAT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UPDDAT
 Gosub PROPAGATE_UPDDAT
Endif
Return

$INIT_UPDDAT
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "UPDDAT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UPDDAT
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "UPDDAT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UPDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UPDDAT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UPDDAT
[L]CURPRO = "UPDDAT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.UPDDAT=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UPDDAT
[L]CURPRO = "UPDDAT"
Return

$_AOTHERS_UPDDAT
[L]CURPRO = "UPDDAT"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UPDDAT
[L]CURPRO = "UPDDAT"
Return

$PROPAGATE_UPDDAT
this.isReadonly = 0
[L]CURPRO = "UPDDAT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UPDDAT
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "UPDDAT"
$_LNKPRO_UPDDAT
Return


####################################################################
# 3 : CREORI Entry origin ( Field Local menu number 3162)
####################################################################

$SET_CREORI
If [L]_AOLDVAL<>this.CREORI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CREORI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CREORI
 Gosub PROPAGATE_CREORI
Endif
Return

$INIT_CREORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CREORI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CREORI=0 and fmet this.AGETATTRIBUTE("CREORI","$isMandatory")="true"
 this.CREORI = 1
Endif
Return
 
$CONTROL_CREORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CREORI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CREORI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CREORI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CREORI
[L]CURPRO = "CREORI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CREORI=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CREORI
[L]CURPRO = "CREORI"
If this.CREORI<0 or this.CREORI>len(mess(0,3162,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"3162 ->"-num$(this.CREORI)-mess(99,123,1)):  Return : # Local menu "3162 -> Invalid option
Endif
Return

$_AOTHERS_CREORI
[L]CURPRO = "CREORI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CREORI
[L]CURPRO = "CREORI"
Return

$PROPAGATE_CREORI
this.isReadonly = 0
[L]CURPRO = "CREORI"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CREORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CREORI"
$_LNKPRO_CREORI
Return

$_ALOADATTRIBUTE_CREORI
[L]ASTATUS = fmet this.ASETATTRIBUTE("CREORI","$isMandatory","true")
Return


####################################################################
# 4 : CODLOF Reference ( Field LOF 20)
####################################################################

$SET_CODLOF
If [L]_AOLDVAL<>this.CODLOF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CODLOF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CODLOF
 Gosub PROPAGATE_CODLOF
Endif
Return

$INIT_CODLOF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CODLOF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CODLOF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CODLOF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CODLOF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CODLOF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CODLOF
[L]CURPRO = "CODLOF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CODLOF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CODLOF
[L]CURPRO = "CODLOF"
If vireblc(this.CODLOF,2)<>vireblc(format$("K:20c",this.CODLOF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CODLOF
[L]CURPRO = "CODLOF"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CODLOF
[L]CURPRO = "CODLOF"
Return

$PROPAGATE_CODLOF
this.isReadonly = 0
[L]CURPRO = "CODLOF"
Gosub _LNKPRO_CODLOF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CODLOF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CODLOF"
$_LNKPRO_CODLOF
If vireblc(this.CODLOF,2)<>""
 # Link LAYOUTFAS
 Local File LAYOUTFAS [WLOF]
 Read [F:WLOF]LOF0 = this.CODLOF;this.LINLOF
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CODLOF","$title",[F:WLOF]DES)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CODLOF","$description",[F:WLOF]DES)
 Endif
 LogicClose File [WLOF]
Endif
Return

$_ALOADATTRIBUTE_CODLOF
[L]ASTATUS = fmet this.ASETATTRIBUTE("CODLOF","$isMandatory","true")
Return


####################################################################
# 5 : LINLOF Line number ( Field C 4)
####################################################################

$SET_LINLOF
If [L]_AOLDVAL<>this.LINLOF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LINLOF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LINLOF
 Gosub PROPAGATE_LINLOF
Endif
Return

$INIT_LINLOF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "LINLOF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LINLOF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "LINLOF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LINLOF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LINLOF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LINLOF
[L]CURPRO = "LINLOF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.LINLOF=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LINLOF
[L]CURPRO = "LINLOF"
Return

$_AOTHERS_LINLOF
[L]CURPRO = "LINLOF"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LINLOF
[L]CURPRO = "LINLOF"
Return

$PROPAGATE_LINLOF
this.isReadonly = 0
[L]CURPRO = "LINLOF"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LINLOF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "LINLOF"
$_LNKPRO_LINLOF
Return

$_ALOADATTRIBUTE_LINLOF
[L]ASTATUS = fmet this.ASETATTRIBUTE("LINLOF","$isMandatory","true")
Return


####################################################################
# 6 : CPY Company ( Field CPY 5)
####################################################################

$SET_CPY
If [L]_AOLDVAL<>this.CPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPY
 Gosub PROPAGATE_CPY
Endif
Return

$INIT_CPY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPY
[L]CURPRO = "CPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CPY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>vireblc(format$("K:5c",this.CPY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCPY.ACTRLREF(this,"CPY",this.CPY,this.CPY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CPY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPY
[L]CURPRO = "CPY"
Return

$PROPAGATE_CPY
this.isReadonly = 0
[L]CURPRO = "CPY"
Gosub _LNKPRO_CPY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CPY"
$_LNKPRO_CPY
If vireblc(this.CPY,2)<>""
 # Link COMPANY
 Local File COMPANY [WCPY]
 Read [F:WCPY]CPY0 = this.CPY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$title",[F:WCPY]CPYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$description",[F:WCPY]CPYNAM)
 Endif
 LogicClose File [WCPY]
Endif
Return

$_ALOADATTRIBUTE_CPY
[L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$isMandatory","true")
Return


####################################################################
# 7 : FCY Financial site ( Field FCY 5)
####################################################################

$SET_FCY
If [L]_AOLDVAL<>this.FCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FCY
 Gosub PROPAGATE_FCY
Endif
Return

$INIT_FCY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "FCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FCY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "FCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FCY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FCY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FCY
[L]CURPRO = "FCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.FCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FCY
[L]CURPRO = "FCY"
If vireblc(this.FCY,2)<>vireblc(format$("K:5c",this.FCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_FCY
[L]CURPRO = "FCY"
If vireblc(this.FCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"FCY",this.FCY,this.FCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.FCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FCY
[L]CURPRO = "FCY"
Return

$PROPAGATE_FCY
this.isReadonly = 0
[L]CURPRO = "FCY"
Gosub _LNKPRO_FCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FCY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "FCY"
$_LNKPRO_FCY
If vireblc(this.FCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.FCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return

$_ALOADATTRIBUTE_FCY
[L]ASTATUS = fmet this.ASETATTRIBUTE("FCY","$isMandatory","true")
Return


####################################################################
# 8 : DES Description 1 ( Field DCO 60)
####################################################################

$SET_DES
If [L]_AOLDVAL<>this.DES
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DES
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DES
 Gosub PROPAGATE_DES
Endif
Return

$INIT_DES
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DES"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DES
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DES"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DES                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DES                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DES
[L]CURPRO = "DES"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DES,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DES
[L]CURPRO = "DES"
If vireblc(this.DES,2)<>vireblc(format$("K:60X",this.DES),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DES
[L]CURPRO = "DES"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DES
[L]CURPRO = "DES"
Return

$PROPAGATE_DES
this.isReadonly = 0
[L]CURPRO = "DES"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DES
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DES"
$_LNKPRO_DES
Return

$_ALOADATTRIBUTE_DES
[L]ASTATUS = fmet this.ASETATTRIBUTE("DES","$isMandatory","true")
Return


####################################################################
# 9 : DES2 Description 2 ( Field DCO 60)
####################################################################

$SET_DES2
If [L]_AOLDVAL<>this.DES2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DES2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DES2
 Gosub PROPAGATE_DES2
Endif
Return

$INIT_DES2
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DES2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DES2
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DES2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DES2                  : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DES2                  : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DES2
[L]CURPRO = "DES2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DES2,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DES2
[L]CURPRO = "DES2"
If vireblc(this.DES2,2)<>vireblc(format$("K:60X",this.DES2),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DES2
[L]CURPRO = "DES2"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DES2
[L]CURPRO = "DES2"
Return

$PROPAGATE_DES2
this.isReadonly = 0
[L]CURPRO = "DES2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DES2
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DES2"
$_LNKPRO_DES2
Return


####################################################################
# 10 : ORDBUY Order reference ( Field A 20)
####################################################################

$SET_ORDBUY
If [L]_AOLDVAL<>this.ORDBUY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ORDBUY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ORDBUY
 Gosub PROPAGATE_ORDBUY
Endif
Return

$INIT_ORDBUY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "ORDBUY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ORDBUY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "ORDBUY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ORDBUY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ORDBUY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ORDBUY
[L]CURPRO = "ORDBUY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ORDBUY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ORDBUY
[L]CURPRO = "ORDBUY"
Return

$_AOTHERS_ORDBUY
[L]CURPRO = "ORDBUY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ORDBUY
[L]CURPRO = "ORDBUY"
Return

$PROPAGATE_ORDBUY
this.isReadonly = 0
[L]CURPRO = "ORDBUY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ORDBUY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "ORDBUY"
$_LNKPRO_ORDBUY
Return


####################################################################
# 11 : BPRVCR Invoice reference ( Field A 20)
####################################################################

$SET_BPRVCR
If [L]_AOLDVAL<>this.BPRVCR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPRVCR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPRVCR
 Gosub PROPAGATE_BPRVCR
Endif
Return

$INIT_BPRVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "BPRVCR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPRVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "BPRVCR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPRVCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPRVCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPRVCR
[L]CURPRO = "BPRVCR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPRVCR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPRVCR
[L]CURPRO = "BPRVCR"
Return

$_AOTHERS_BPRVCR
[L]CURPRO = "BPRVCR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPRVCR
[L]CURPRO = "BPRVCR"
Return

$PROPAGATE_BPRVCR
this.isReadonly = 0
[L]CURPRO = "BPRVCR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPRVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "BPRVCR"
$_LNKPRO_BPRVCR
Return


####################################################################
# 12 : DATVCR Invoice date ( Field D4)
####################################################################

$SET_DATVCR
If [L]_AOLDVAL<>this.DATVCR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DATVCR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DATVCR
 Gosub PROPAGATE_DATVCR
Endif
Return

$INIT_DATVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DATVCR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DATVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DATVCR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DATVCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DATVCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DATVCR
[L]CURPRO = "DATVCR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DATVCR=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DATVCR
[L]CURPRO = "DATVCR"
Return

$_AOTHERS_DATVCR
[L]CURPRO = "DATVCR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DATVCR
[L]CURPRO = "DATVCR"
Return

$PROPAGATE_DATVCR
this.isReadonly = 0
[L]CURPRO = "DATVCR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DATVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DATVCR"
$_LNKPRO_DATVCR
Return

$_ALOADATTRIBUTE_DATVCR
[L]ASTATUS = fmet this.ASETATTRIBUTE("DATVCR","$isMandatory","true")
Return


####################################################################
# 13 : DATIMP Allocation date ( Field D4)
####################################################################

$SET_DATIMP
If [L]_AOLDVAL<>this.DATIMP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DATIMP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DATIMP
 Gosub PROPAGATE_DATIMP
Endif
Return

$INIT_DATIMP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DATIMP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DATIMP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DATIMP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DATIMP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DATIMP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DATIMP
[L]CURPRO = "DATIMP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.DATIMP=[0/0/0]
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DATIMP
[L]CURPRO = "DATIMP"
Return

$_AOTHERS_DATIMP
[L]CURPRO = "DATIMP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DATIMP
[L]CURPRO = "DATIMP"
Return

$PROPAGATE_DATIMP
this.isReadonly = 0
[L]CURPRO = "DATIMP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DATIMP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DATIMP"
$_LNKPRO_DATIMP
Return

$_ALOADATTRIBUTE_DATIMP
[L]ASTATUS = fmet this.ASETATTRIBUTE("DATIMP","$isMandatory","true")
Return


####################################################################
# 14 : ITMREF Product ( Field ITM 20)
####################################################################

$SET_ITMREF
If [L]_AOLDVAL<>this.ITMREF
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_ITMREF
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.ITMREF
 Gosub PROPAGATE_ITMREF
Endif
Return

$INIT_ITMREF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "ITMREF"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_ITMREF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "ITMREF"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_ITMREF                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_ITMREF
[L]CURPRO = "ITMREF"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.ITMREF,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>vireblc(format$("K:20c",this.ITMREF),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_ITMREF
[L]CURPRO = "ITMREF"
If vireblc(this.ITMREF,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPITM.ACTRLREF(this,"ITMREF",this.ITMREF,this.ITMREF,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.ITMREF<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_ITMREF
[L]CURPRO = "ITMREF"
Return

$PROPAGATE_ITMREF
this.isReadonly = 0
[L]CURPRO = "ITMREF"
Gosub _LNKPRO_ITMREF
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_ITMREF
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "ITMREF"
$_LNKPRO_ITMREF
If vireblc(this.ITMREF,2)<>""
 # Link ITMMASTER
 Local File ITMMASTER [WITM]
 Read [F:WITM]ITM0 = this.ITMREF
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ITMMASTER" & ZONE="DES1AXX" & IDENT1=[F:WITM]ITMREF & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("ITMREF","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WITM]
Endif
Return


####################################################################
# 15 : UOM Unit ( Field UOM 3)
####################################################################

$SET_UOM
If [L]_AOLDVAL<>this.UOM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_UOM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.UOM
 Gosub PROPAGATE_UOM
Endif
Return

$INIT_UOM
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "UOM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_UOM
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "UOM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_UOM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_UOM                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_UOM
[L]CURPRO = "UOM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.UOM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_UOM
[L]CURPRO = "UOM"
If vireblc(this.UOM,2)<>vireblc(format$("K:3X",this.UOM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_UOM
[L]CURPRO = "UOM"
If vireblc(this.UOM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPUOM.ACTRLREF(this,"UOM",this.UOM,this.UOM,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.UOM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_UOM
[L]CURPRO = "UOM"
Return

$PROPAGATE_UOM
this.isReadonly = 0
[L]CURPRO = "UOM"
Gosub _LNKPRO_UOM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_UOM
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "UOM"
$_LNKPRO_UOM
If vireblc(this.UOM,2)<>""
 # Link TABUNIT
 Local File TABUNIT [WTUN]
 Read [F:WTUN]TUN0 = this.UOM
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DESSHO" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABUNIT" & ZONE="DES" & IDENT1=[F:WTUN]UOM & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$symbol",[F:WTUN]UOMSYM)
  If int([WTUN]UOMDEC)>0
   Local Char WSCALE(10)
   WSCALE=num$([F:WTUN]UOMDEC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTUN]
Endif
Return

$_ALOADATTRIBUTE_UOM
[L]ASTATUS = fmet this.ASETATTRIBUTE("UOM","$isMandatory","true")
Return


####################################################################
# 16 : QTY Quantity ( Field QTY 0)
####################################################################

$SET_QTY
If [L]_AOLDVAL<>this.QTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QTY
 Gosub PROPAGATE_QTY
Endif
Return

$INIT_QTY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "QTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QTY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "QTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QTY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QTY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QTY
[L]CURPRO = "QTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QTY
[L]CURPRO = "QTY"
Return

$_AOTHERS_QTY
[L]CURPRO = "QTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QTY
[L]CURPRO = "QTY"
Return

$PROPAGATE_QTY
this.isReadonly = 0
[L]CURPRO = "QTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QTY
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "QTY"
$_LNKPRO_QTY
Return

$_ALOADATTRIBUTE_QTY
[L]ASTATUS = fmet this.ASETATTRIBUTE("QTY","$isMandatory","true")
Return


####################################################################
# 17 : TYPVCR Invoice type ( Field Local menu number 3117)
####################################################################

$SET_TYPVCR
If [L]_AOLDVAL<>this.TYPVCR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_TYPVCR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.TYPVCR
 Gosub PROPAGATE_TYPVCR
Endif
Return

$INIT_TYPVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "TYPVCR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.TYPVCR=0 and fmet this.AGETATTRIBUTE("TYPVCR","$isMandatory")="true"
 this.TYPVCR = 1
Endif
Return
 
$CONTROL_TYPVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "TYPVCR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_TYPVCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_TYPVCR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_TYPVCR
[L]CURPRO = "TYPVCR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.TYPVCR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_TYPVCR
[L]CURPRO = "TYPVCR"
If this.TYPVCR<0 or this.TYPVCR>len(mess(0,3117,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"3117 ->"-num$(this.TYPVCR)-mess(99,123,1)):  Return : # Local menu "3117 -> Invalid option
Endif
Return

$_AOTHERS_TYPVCR
[L]CURPRO = "TYPVCR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_TYPVCR
[L]CURPRO = "TYPVCR"
Return

$PROPAGATE_TYPVCR
this.isReadonly = 0
[L]CURPRO = "TYPVCR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_TYPVCR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "TYPVCR"
$_LNKPRO_TYPVCR
Return

$_ALOADATTRIBUTE_TYPVCR
[L]ASTATUS = fmet this.ASETATTRIBUTE("TYPVCR","$isMandatory","true")
Return


####################################################################
# 18 : GACACN CoA nature ( Field Local menu number 2628)
####################################################################

$SET_GACACN
If [L]_AOLDVAL<>this.GACACN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_GACACN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.GACACN
 Gosub PROPAGATE_GACACN
Endif
Return

$INIT_GACACN
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GACACN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.GACACN=0 and fmet this.AGETATTRIBUTE("GACACN","$isMandatory")="true"
 this.GACACN = 1
Endif
Return
 
$CONTROL_GACACN
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GACACN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_GACACN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_GACACN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_GACACN
[L]CURPRO = "GACACN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.GACACN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_GACACN
[L]CURPRO = "GACACN"
If this.GACACN<0 or this.GACACN>len(mess(0,2628,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2628 ->"-num$(this.GACACN)-mess(99,123,1)):  Return : # Local menu "2628 -> Invalid option
Endif
Return

$_AOTHERS_GACACN
[L]CURPRO = "GACACN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_GACACN
[L]CURPRO = "GACACN"
Return

$PROPAGATE_GACACN
this.isReadonly = 0
[L]CURPRO = "GACACN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_GACACN
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GACACN"
$_LNKPRO_GACACN
Return

$_ALOADATTRIBUTE_GACACN
[L]ASTATUS = fmet this.ASETATTRIBUTE("GACACN","$isMandatory","true")
Return


####################################################################
# 19 : GAC GL account ( Field GAC 15)
####################################################################

$SET_GAC
If [L]_AOLDVAL<>this.GAC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_GAC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.GAC
 Gosub PROPAGATE_GAC
Endif
Return

$INIT_GAC
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GAC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_GAC
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GAC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_GAC                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_GAC                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_GAC
[L]CURPRO = "GAC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.GAC,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_GAC
[L]CURPRO = "GAC"
If vireblc(this.GAC,2)<>vireblc(format$("K:15X",this.GAC),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_GAC
[L]CURPRO = "GAC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_GAC
[L]CURPRO = "GAC"
If vireblc(this.GAC,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPGAC.ACTRLREF(this,"GAC",this.GAC,"",this.GAC,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.GAC<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_GAC
this.isReadonly = 0
[L]CURPRO = "GAC"
Gosub _LNKPRO_GAC
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_GAC
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GAC"
$_LNKPRO_GAC
If vireblc(this.GAC,2)<>""
 # Link GACCOUNT
 Local File GACCOUNT [WGAC]
 Read [F:WGAC]GAC0 = "";this.GAC
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="SHOTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("GAC","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="DESTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("GAC","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WGAC]
Endif
Return

$_ALOADATTRIBUTE_GAC
[L]ASTATUS = fmet this.ASETATTRIBUTE("GAC","$isMandatory","true")
Return


####################################################################
# 20 : IASCGU UGT ( Field Miscellaneous table number)
####################################################################

$SET_IASCGU
If [L]_AOLDVAL<>this.IASCGU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_IASCGU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.IASCGU
 Gosub PROPAGATE_IASCGU
Endif
Return

$INIT_IASCGU
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASCGU"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"IASCGU",this.IASCGU,613)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_IASCGU
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASCGU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_IASCGU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_IASCGU                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_IASCGU
[L]CURPRO = "IASCGU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.IASCGU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_IASCGU
[L]CURPRO = "IASCGU"
If vireblc(this.IASCGU,2)<>vireblc(format$("K:20B",this.IASCGU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_IASCGU
[L]CURPRO = "IASCGU"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"IASCGU",this.IASCGU,613,this.IASCGU)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_IASCGU
[L]CURPRO = "IASCGU"
Return

$PROPAGATE_IASCGU
this.isReadonly = 0
[L]CURPRO = "IASCGU"
Gosub _LNKPRO_IASCGU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_IASCGU
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASCGU"
$_LNKPRO_IASCGU
If vireblc(this.IASCGU,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 613;this.IASCGU
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("IASCGU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("IASCGU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 21 : GACORI Source CoA account ( Field GAC 15)
####################################################################

$SET_GACORI
If [L]_AOLDVAL<>this.GACORI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_GACORI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.GACORI
 Gosub PROPAGATE_GACORI
Endif
Return

$INIT_GACORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GACORI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_GACORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GACORI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_GACORI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_GACORI                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_GACORI
[L]CURPRO = "GACORI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.GACORI,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_GACORI
[L]CURPRO = "GACORI"
If vireblc(this.GACORI,2)<>vireblc(format$("K:15X",this.GACORI),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_GACORI
[L]CURPRO = "GACORI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_GACORI
[L]CURPRO = "GACORI"
If vireblc(this.GACORI,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPGAC.ACTRLREF(this,"GACORI",this.GACORI,"",this.GAC,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.GACORI<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_GACORI
this.isReadonly = 0
[L]CURPRO = "GACORI"
Gosub _LNKPRO_GACORI
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_GACORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "GACORI"
$_LNKPRO_GACORI
If vireblc(this.GACORI,2)<>""
 # Link GACCOUNT
 Local File GACCOUNT [WGAC]
 Read [F:WGAC]GAC0 = "";this.GAC
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="SHOTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("GACORI","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="DESTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("GACORI","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WGAC]
Endif
Return


####################################################################
# 22 : IASACN IFRS nature ( Field Local menu number 2628)
####################################################################

$SET_IASACN
If [L]_AOLDVAL<>this.IASACN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_IASACN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.IASACN
 Gosub PROPAGATE_IASACN
Endif
Return

$INIT_IASACN
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.IASACN=0 and fmet this.AGETATTRIBUTE("IASACN","$isMandatory")="true"
 this.IASACN = 1
Endif
Return
 
$CONTROL_IASACN
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_IASACN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_IASACN                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_IASACN
[L]CURPRO = "IASACN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.IASACN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_IASACN
[L]CURPRO = "IASACN"
If this.IASACN<0 or this.IASACN>len(mess(0,2628,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"2628 ->"-num$(this.IASACN)-mess(99,123,1)):  Return : # Local menu "2628 -> Invalid option
Endif
Return

$_AOTHERS_IASACN
[L]CURPRO = "IASACN"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_IASACN
[L]CURPRO = "IASACN"
Return

$PROPAGATE_IASACN
this.isReadonly = 0
[L]CURPRO = "IASACN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_IASACN
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACN"
$_LNKPRO_IASACN
Return


####################################################################
# 23 : IASACC IFRS allocation ( Field GAC 15)
####################################################################

$SET_IASACC
If [L]_AOLDVAL<>this.IASACC
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_IASACC
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.IASACC
 Gosub PROPAGATE_IASACC
Endif
Return

$INIT_IASACC
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACC"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_IASACC
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACC"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_IASACC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_IASACC                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_IASACC
[L]CURPRO = "IASACC"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.IASACC,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_IASACC
[L]CURPRO = "IASACC"
If vireblc(this.IASACC,2)<>vireblc(format$("K:15X",this.IASACC),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_IASACC
[L]CURPRO = "IASACC"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_IASACC
[L]CURPRO = "IASACC"
If vireblc(this.IASACC,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPGAC.ACTRLREF(this,"IASACC",this.IASACC,"",this.IASACC,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.IASACC<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_IASACC
this.isReadonly = 0
[L]CURPRO = "IASACC"
Gosub _LNKPRO_IASACC
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_IASACC
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACC"
$_LNKPRO_IASACC
If vireblc(this.IASACC,2)<>""
 # Link GACCOUNT
 Local File GACCOUNT [WGAC]
 Read [F:WGAC]GAC0 = "";this.IASACC
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="SHOTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("IASACC","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="DESTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("IASACC","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WGAC]
Endif
Return


####################################################################
# 24 : IASACCORI Source IFRS acct ( Field GAC 15)
####################################################################

$SET_IASACCORI
If [L]_AOLDVAL<>this.IASACCORI
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_IASACCORI
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.IASACCORI
 Gosub PROPAGATE_IASACCORI
Endif
Return

$INIT_IASACCORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACCORI"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_IASACCORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACCORI"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_IASACCORI             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_IASACCORI             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_IASACCORI
[L]CURPRO = "IASACCORI"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.IASACCORI,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_IASACCORI
[L]CURPRO = "IASACCORI"
If vireblc(this.IASACCORI,2)<>vireblc(format$("K:15X",this.IASACCORI),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_IASACCORI
[L]CURPRO = "IASACCORI"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_IASACCORI
[L]CURPRO = "IASACCORI"
If vireblc(this.IASACCORI,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPGAC.ACTRLREF(this,"IASACCORI",this.IASACCORI,"",this.IASACCORI,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.IASACCORI<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_IASACCORI
this.isReadonly = 0
[L]CURPRO = "IASACCORI"
Gosub _LNKPRO_IASACCORI
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_IASACCORI
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "IASACCORI"
$_LNKPRO_IASACCORI
If vireblc(this.IASACCORI,2)<>""
 # Link GACCOUNT
 Local File GACCOUNT [WGAC]
 Read [F:WGAC]GAC0 = "";this.IASACCORI
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="SHOTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("IASACCORI","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GACCOUNT" & ZONE="DESTRA" & IDENT1=[F:WGAC]COA & IDENT2=[F:WGAC]ACC & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("IASACCORI","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WGAC]
Endif
Return


####################################################################
# 25 : BPR Supplier ( Field BPR 15)
####################################################################

$SET_BPR
If [L]_AOLDVAL<>this.BPR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_BPR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.BPR
 Gosub PROPAGATE_BPR
Endif
Return

$INIT_BPR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "BPR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_BPR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "BPR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_BPR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_BPR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_BPR
[L]CURPRO = "BPR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.BPR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_BPR
[L]CURPRO = "BPR"
If vireblc(this.BPR,2)<>vireblc(format$("K:15c",this.BPR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_BPR
[L]CURPRO = "BPR"
If vireblc(this.BPR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPBPR.ACTRLREF(this,"BPR",this.BPR,this.BPR,2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.BPR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_BPR
[L]CURPRO = "BPR"
Return

$PROPAGATE_BPR
this.isReadonly = 0
[L]CURPRO = "BPR"
Gosub _LNKPRO_BPR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_BPR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "BPR"
$_LNKPRO_BPR
If vireblc(this.BPR,2)<>""
 # Link BPARTNER
 Local File BPARTNER [WBPR]
 Read [F:WBPR]BPR0 = this.BPR
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPR","$title",[F:WBPR]BPRSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("BPR","$description",[F:WBPR]BPRNAM)
 Endif
 LogicClose File [WBPR]
Endif
Return

$_ALOADATTRIBUTE_BPR
[L]ASTATUS = fmet this.ASETATTRIBUTE("BPR","$isMandatory","true")
Return


####################################################################
# 26 : DSP Analytical allocation key ( Field DSP 10)
####################################################################

$SET_DSP
If [L]_AOLDVAL<>this.DSP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_DSP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.DSP
 Gosub PROPAGATE_DSP
Endif
Return

$INIT_DSP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DSP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_DSP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DSP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_DSP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_DSP                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_DSP
[L]CURPRO = "DSP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.DSP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_DSP
[L]CURPRO = "DSP"
If vireblc(this.DSP,2)<>vireblc(format$("K:10c",this.DSP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_DSP
[L]CURPRO = "DSP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_DSP
[L]CURPRO = "DSP"
Return

$PROPAGATE_DSP
this.isReadonly = 0
[L]CURPRO = "DSP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_DSP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "DSP"
$_LNKPRO_DSP
Return


####################################################################
# 28 : JOU Journal ( Field JOU 5)
####################################################################

$SET_JOU
If [L]_AOLDVAL<>this.JOU
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_JOU
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.JOU
 Gosub PROPAGATE_JOU
Endif
Return

$INIT_JOU
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "JOU"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_JOU
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "JOU"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_JOU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_JOU                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_JOU
[L]CURPRO = "JOU"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.JOU,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_JOU
[L]CURPRO = "JOU"
If vireblc(this.JOU,2)<>vireblc(format$("K:5c",this.JOU),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_JOU
[L]CURPRO = "JOU"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_JOU
[L]CURPRO = "JOU"
If vireblc(this.JOU,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPJOU.ACTRLREF(this,"JOU",this.JOU,this.JOU,"",2,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.JOU<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_JOU
this.isReadonly = 0
[L]CURPRO = "JOU"
Gosub _LNKPRO_JOU
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_JOU
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "JOU"
$_LNKPRO_JOU
If vireblc(this.JOU,2)<>""
 # Link GJOURNAL
 Local File GJOURNAL [WJOU]
 Read [F:WJOU]JOU0 = this.JOU;""
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GJOURNAL" & ZONE="SHOTRA" & IDENT1=[F:WJOU]JOU & IDENT2=[F:WJOU]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("JOU","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="GJOURNAL" & ZONE="DESTRA" & IDENT1=[F:WJOU]JOU & IDENT2=[F:WJOU]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("JOU","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WJOU]
Endif
Return

$_ALOADATTRIBUTE_JOU
[L]ASTATUS = fmet this.ASETATTRIBUTE("JOU","$isMandatory","true")
Return


####################################################################
# 29 : CURTYP Rate type ( Field Local menu number 202)
####################################################################

$SET_CURTYP
If [L]_AOLDVAL<>this.CURTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CURTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CURTYP
 Gosub PROPAGATE_CURTYP
Endif
Return

$INIT_CURTYP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CURTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.CURTYP=0 and fmet this.AGETATTRIBUTE("CURTYP","$isMandatory")="true"
 this.CURTYP = 1
Endif
Return
 
$CONTROL_CURTYP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CURTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CURTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CURTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CURTYP
[L]CURPRO = "CURTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.CURTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CURTYP
[L]CURPRO = "CURTYP"
If this.CURTYP<0 or this.CURTYP>len(mess(0,202,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"202 ->"-num$(this.CURTYP)-mess(99,123,1)):  Return : # Local menu "202 -> Invalid option
Endif
Return

$_AOTHERS_CURTYP
[L]CURPRO = "CURTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CURTYP
[L]CURPRO = "CURTYP"
Return

$PROPAGATE_CURTYP
this.isReadonly = 0
[L]CURPRO = "CURTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CURTYP
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "CURTYP"
$_LNKPRO_CURTYP
Return

$_ALOADATTRIBUTE_CURTYP
[L]ASTATUS = fmet this.ASETATTRIBUTE("CURTYP","$isMandatory","true")
Return


####################################################################
# 30 : RATCUR Currency rate ( Field RCU 0)
####################################################################

$SET_RATCUR
If [L]_AOLDVAL<>this.RATCUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_RATCUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.RATCUR
 Gosub PROPAGATE_RATCUR
Endif
Return

$INIT_RATCUR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "RATCUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_RATCUR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "RATCUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_RATCUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_RATCUR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_RATCUR
[L]CURPRO = "RATCUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.RATCUR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_RATCUR
[L]CURPRO = "RATCUR"
Return

$_AOTHERS_RATCUR
[L]CURPRO = "RATCUR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_RATCUR
[L]CURPRO = "RATCUR"
Return

$PROPAGATE_RATCUR
this.isReadonly = 0
[L]CURPRO = "RATCUR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_RATCUR
Gosub DECLARE_VAR From WMC0LAYOUTFAS
[L]CURPRO = "RATCUR"
$_LNKPRO_RATCUR
Return

$_ALOADATTRIBUTE_RATCUR
[L]ASTATUS = fmet this.ASETATTRIBUTE("RATCUR","$isMandatory","true")
Return




