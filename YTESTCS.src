#<AdxTL>@(#)0.0.0.0 $Revision$ 
#<AdxTL>@(#)0.0.0.0 $Revision$

Gosub EXEC1
End

$ACTION
  Case ACTION
    When "EXEC" : Gosub EXEC1

  Endcase
Return



$EXEC1
Local Clbfile ARGUMENTS(0)
Local Clbfile RESHEAD(0)
Local Clbfile RESBODY(6)
Local Integer I:I=0
Local Integer RESULT


#Infbox ARGUMENTS
#call the external API
STATUSCODE = func ASYRWEBSER.EXEC_JS("bundles/ycontent-server","authenticate","wait",ARGUMENTS, "0", 0, "", "0", RESHEAD, RESBODY)
#STATUSCODE = func ASYRWEBSER.EXEC_JS("bundles/brain-tree","clientToken","wait",ARGUMENTS, "0", 0, "", "0", RESHEAD, RESBODY)
If STATUSCODE<>200 Then
  Infbox num$(STATUSCODE),RESHEAD
Else
  Infbox num$(STATUSCODE),RESHEAD
Endif

$ENDPROG
Return





#
#
#
#$EXEC
#
#Local Clbfile RESHEAD(0),RESBODY(0)
#Local Integer RETVAL
#Local Char REGSTA
#Local Char BUSVAL(250),COMPVAL(250)
#
##Infbox(num$([M]CRN))
##Infbox(num$(PARAM(1)))
#
#
#
#
#
#  # No additional parameter nor additional header value are given here (only the values given in ORDER definition are used)
#Local Char PCOD(100)(1..10),PVAL(100)(1..10),HCOD(100)(1..10),HVAL(100)(1..10)
##
##HCOD(1)="Accept-Language"
##HVAL(1)='"fr, en-gb;q=0.8, en;q=0.7"'
##
##HCOD(2)="Content-Type"
##HVAL(2)= '"application/multpart/form-data"'
#
##HCOD(1)="Content-Type"
##HVAL(1)= '"multipart/form-data"'
##
##HCOD(2)="Accept"
##HVAL(2)= '"application/json"'
#
#
##HCOD(3)="Content-Type"
##HVAL(3)= '"multipart/form-data"'
##
##HCOD(3) = 'Authorization'
##HVAL(3) = '"None"' #Get this from your web service provider
##
#HCOD(1)="Accept-Language"
#HVAL(1)='"fr, en-gb;q=0.8, en;q=0.7"'
#
#HCOD(2)="Content-Type"
#HVAL(2)='"application/json"'
#
#HCOD(3) = 'OTCSTicket'
#HVAL(3) = '"DaHaO22KZ8niDnCxYWWPVtbqhGZSK3RnYRt8l7Yw71Z3SWRcXD3xpOmFsyOk3pRKAzCm8/WyCGQrkDte4C6/p++COPeUg1bZ"' #Get this from your web service provider
##
#RETVAL=func ASYRRESTCLI.EXEC_REST_WS("YCS","GET","api/v1/nodes/2072574",PCOD,PVAL,HCOD,HVAL, '{}',
#& 0,"",RESHEAD, RESBODY)
#
##HCOD(2) = "Authorization"
##HVAL(2) = "'None'" #Get this from your web service provider
##'{ "OTCSTicket" : "DaHaO22KZ8niDnCxYWWPVtbqhGZSK3RnYRt8l7Yw71Z3SWRcXD3xpOmFsyOk3pRKAzCm8/WyCGQrkDte4C6/p++COPeUg1bZ" }'
#
#
##HCOD(3) = "username"
##HCOD(4) = "password"
##
##
##HVAL(3) = '"sage.admin"'
##HVAL(4) = '"Mouse8Car"'
#
#
##PCOD(1) = "username"
##PCOD(2) = "password"
##
##
##PVAL(1) = '"sage.admin"'
##PVAL(2) = '"Mouse8Car"'
#
##PCOD(1) = 'OTCSTicket'
##PVAL(1) = '"DaHaO22KZ8niDnCxYWWPVtbqhGZSK3RnYRt8l7Yw71Z3SWRcXD3xpOmFsyOk3pRKAzCm8/WyCGQrkDte4C6/p++COPeUg1bZ"' #Get this from your web service provider
#
##
#
##
#
## '{ "username":"sage.admin","password":"Mouse8Car" }'
##
##Local Clbfile MYDATA
##
##RETVAL=func ASYRRESTCLI.EXEC_REST_WS("YCSAuth","POST","api/v1/auth",PCOD,PVAL,HCOD,HVAL, '{ "username":"sage.admin","password":"Mouse8Car" }',
##& 0,"",RESHEAD, RESBODY)
#
#Infbox num$(RETVAL),num$(RESHEAD)
##Call OUVRE_TRACE("TEST") From LECFIC
##Call ECR_TRACE(chr$(10)+chr$(13) + RESHEAD,0) From GESECRAN
##Call ECR_TRACE(chr$(10)+chr$(13) + RESBODY,0) From GESECRAN
##Call FERME_TRACE From LECFIC
##Call LEC_TRACE() From LECFIC
#
#If RETVAL = 500
#
#Endif
#
#
#If RETVAL = 404
#
#Elsif RETVAL = 200
#
#Endif
#Return

