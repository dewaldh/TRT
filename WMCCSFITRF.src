#<AdxTL>@(#)0.0.0.0 $Revision$Class Invoicing elements
# Supervisor
## ACLA-CLASSE ## SFITRF
# 2018-08-27 12:45:21 565

####################################################################
# _ACONTROL
####################################################################

$_ACONTROL
Gosub _AMANDATORY     : [L]ASTATUS = max([L]ASTATUS,[L]ALLSTAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AFORMAT        : [L]ASTATUS = max([L]ASTATUS,[L]ALLSTAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS        : [L]ASTATUS = max([L]ASTATUS,[L]ALLSTAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

####################################################################
# MANDATORY
####################################################################

$_AMANDATORY
Gosub DECLARE_VAR From WMC0SFITRF
Local Integer ALLSTAT
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_NBSFI From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To 30
 If this.C_NBSFI(AINDCLA)<>null& find(this.C_NBSFI(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBSFI(AINDCLA)._AMANDATORY : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_NBSFIT From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To maxtab(this.C_NBSFIT)
 If this.C_NBSFIT(AINDCLA)<>null& find(this.C_NBSFIT(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBSFIT(AINDCLA)._AMANDATORY : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_NBTRF From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To maxtab(this.C_NBTRF)
 If this.C_NBTRF(AINDCLA)<>null& find(this.C_NBTRF(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBTRF(AINDCLA)._AMANDATORY : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_S_OBJ From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_S_SOC From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_S_CUR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_S_BPCINV From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_S_BPCORD From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_S_VCRNUM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_C_ORIVCR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_C_DESVCR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_C_BRDRUL From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_C_GRUFLG From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_C_GRURUL From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_CREDATTIM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_UPDDATTIM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_AUUID From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_CREUSR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AMANDATORY_UPDUSR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
Return

####################################################################
# FORMAT
####################################################################

$_AFORMAT
Gosub DECLARE_VAR From WMC0SFITRF
Local Integer ALLSTAT
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_NBSFI From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To 30
 If this.C_NBSFI(AINDCLA)<>null& find(this.C_NBSFI(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBSFI(AINDCLA)._AFORMAT : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_NBSFIT From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To maxtab(this.C_NBSFIT)
 If this.C_NBSFIT(AINDCLA)<>null& find(this.C_NBSFIT(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBSFIT(AINDCLA)._AFORMAT : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_NBTRF From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To maxtab(this.C_NBTRF)
 If this.C_NBTRF(AINDCLA)<>null& find(this.C_NBTRF(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBTRF(AINDCLA)._AFORMAT : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_S_OBJ From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_S_SOC From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_S_CUR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_S_BPCINV From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_S_BPCORD From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_S_VCRNUM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_C_ORIVCR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_C_DESVCR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_C_BRDRUL From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_C_GRUFLG From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_C_GRURUL From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_CREDATTIM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_UPDDATTIM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_AUUID From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_CREUSR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AFORMAT_UPDUSR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
Return

####################################################################
# OTHERS
####################################################################

$_AOTHERS
Gosub DECLARE_VAR From WMC0SFITRF
Local Integer ALLSTAT
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_NBSFI From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_NBSFI From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To 30
 If this.C_NBSFI(AINDCLA)<>null& find(this.C_NBSFI(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBSFI(AINDCLA)._AOTHERS : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_NBSFIT From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_NBSFIT From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To maxtab(this.C_NBSFIT)
 If this.C_NBSFIT(AINDCLA)<>null& find(this.C_NBSFIT(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBSFIT(AINDCLA)._AOTHERS : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_NBTRF From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_NBTRF From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
For AINDCLA=1 To maxtab(this.C_NBTRF)
 If this.C_NBTRF(AINDCLA)<>null& find(this.C_NBTRF(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.C_NBTRF(AINDCLA)._AOTHERS : Gosub TESTALLSTAT
 Endif
Next AINDCLA
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_S_OBJ From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_S_OBJ From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_S_SOC From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_S_SOC From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_S_CUR From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_S_CUR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_S_BPCINV From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_S_BPCINV From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_S_BPCORD From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_S_BPCORD From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_S_VCRNUM From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_S_VCRNUM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_C_ORIVCR From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_C_ORIVCR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_C_DESVCR From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_C_DESVCR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_C_BRDRUL From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_C_BRDRUL From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_C_GRUFLG From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_C_GRUFLG From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_C_GRURUL From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_C_GRURUL From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_CREDATTIM From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_CREDATTIM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_UPDDATTIM From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_UPDDATTIM From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_AUUID From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_AUUID From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_CREUSR From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_CREUSR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
If !find(this.ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL) : Gosub _AOTHERS_UPDUSR From WMC1SFITRF : Gosub TESTALLSTAT : Gosub _AOTHERS_REF_UPDUSR From WMC1SFITRF : Gosub TESTALLSTAT :  Endif
[L]ASTATUS = fmet this.ACONTROL
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return

$TESTALLSTAT
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return



