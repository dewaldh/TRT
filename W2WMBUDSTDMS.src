#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
# Mask management WMBUDSTDMS 

$_AFF
If GIMPORT
 Gosub AFF From GSAISIE
Else
 If GMESSAGE <>""
  Gosub ERR From GSAISIE
 Else
  Raz GERR , GZNUM
 Endif
Endif
Return

$ON_CAMT6
Onevent BEFORE_AREA Gosub AV_CAMT6 From W2WMBUDSTDMS
Return

$AV_CAMT6
zc = sigma(0,[M]NBLIG-1,[M]AMT6(indcum)*([M]SENS(indcum)=1))
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M:BCR]CUR(2),GDEVISE(1..GNBDEV)),1))
Chgfmt [M]CAMT6(indice) With "NPz3:"+GDEVFMT
Gosub _AFF
Return

$ON_CUR6
Onevent INIT_AREA Call D_CUR6(zc) From W2WMBUDSTDMS
Return

Subprog D_CUR6(VALEUR)
Variable Char    VALEUR()
If varinit([M]CUR6,indice)=0
 VALEUR = [M:BCR]CUR(2)
Endif
Gosub _AFF
End

$ON_YAMTFOR10
Onevent BEFORE_AREA Gosub AV_YAMTFOR10 From W2WMBUDSTDMS
Return

$AV_YAMTFOR10
zc = sum([M]AMTFOR10(0..max(nolign-1,[M]NBLIG-1)))
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M:BCR]CUR(0),GDEVISE(1..GNBDEV)),1))
Chgfmt [M]YAMTFOR10(indice) With "NPz3:"+GDEVFMT
Gosub _AFF
Return

$ON_YAMTFOR14
Onevent BEFORE_AREA Gosub AV_YAMTFOR14 From W2WMBUDSTDMS
Return

$AV_YAMTFOR14
zc = sum([M]AMTFOR14(0..max(nolign-1,[M]NBLIG-1)))
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M:BCR]CUR(0),GDEVISE(1..GNBDEV)),1))
Chgfmt [M]YAMTFOR14(indice) With "NPz3:"+GDEVFMT
Gosub _AFF
Return

$TIT_COL
Local Char TITCL(200)(1..6)
Raz TITCL
Case BASPAG
 When "NBLIG"
  TITCL(1) = func SUBTBU.GET_COLDESTRA("STDMS",1)-[V]LIBBUD(1)
  TITCL(2) = func SUBTBU.GET_COLDESTRA("STDMS",2)-[V]LIBBUD(1)
  TITCL(3) = func SUBTBU.GET_COLDESTRA("STDMS",3)-[V]LIBBUD(2)
  TITCL(4) = func SUBTBU.GET_COLDESTRA("STDMS",4)-[V]LIBBUD(2)
  TITCL(5) = func SUBTBU.GET_COLDESTRA("STDMS",5)-[V]LIBBUD(3)
  TITCL(6) = func SUBTBU.GET_COLDESTRA("STDMS",6)-[V]LIBBUD(3)
  If !GORITITCOL
   Titcol [M]NBLIG TITCL(1) For QTY1
   Titcol [M]NBLIG TITCL(2) For AMT2
   Titcol [M]NBLIG TITCL(3) For QTY3
   Titcol [M]NBLIG TITCL(4) For AMT4
   Titcol [M]NBLIG TITCL(5) For QTY5
   Titcol [M]NBLIG TITCL(6) For AMT6
  Else
   Titcol [M:BUD]NBLIG TITCL(1) For QTY1
   Titcol [M:BUD]NBLIG TITCL(2) For AMT2
   Titcol [M:BUD]NBLIG TITCL(3) For QTY3
   Titcol [M:BUD]NBLIG TITCL(4) For AMT4
   Titcol [M:BUD]NBLIG TITCL(5) For QTY5
   Titcol [M:BUD]NBLIG TITCL(6) For AMT6
  Endif
Endcase
Return

$CHG_STY
Return


