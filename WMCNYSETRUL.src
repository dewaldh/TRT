#<AdxTL>@(#)0.0.0.0 $Revision$Class Settlement Rule
# Supervisor
## ACLA-CLASSE ## YSETRUL
# 2018-11-19 00:23:57 977

####################################################################
# AINIT
####################################################################

$AINIT
Gosub DECLARE_VAR From WMC0YSETRUL
Local Integer ALINE,TBLINE,ASTASNAPSHOT,ALLSTAT
If this.APARENT=null & this.snapshotEnabled=0
 this.snapshotEnabled = 1
Elsif this.APARENT<>null
 this.snapshotEnabled = this.APARENT.snapshotEnabled
Endif
If this.ASTALIN=[V]CST_ALL : this.ASTALIN = [V]CST_ANEW : Endif
Gosub INIT_YRULID From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YRULTYPCOD From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YACTFLG From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YSET From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YLANDPUR From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YPRECINCT From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YSTAG From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YLOT From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YRULDES From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YLIGDES From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YVLDFRM From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YVLDTO From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YPRC From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFFXDVAL From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFFCY From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFBANK From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFACC From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFDRCR From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFGST From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFAMTAMD From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFLONAGR From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFPJTLIN From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YFCCE From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTFCY From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTACC From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTGST From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTAMTAMD From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTLONLGR From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTPJTLIN From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YTCCE From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub INIT_CREDATTIM From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub INIT_UPDDATTIM From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub INIT_AUUID From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub INIT_CREUSR From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub INIT_UPDUSR From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub INIT_YGSTINC From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub AINIT From WMC0YSETRUL : Gosub TESTALLSTAT
If this.snapshotEnabled=1 & this.APARENT=null
 [L]ASTASNAPSHOT = this.freeSnapshot
Endif
Return

####################################################################
# _ALOADATTRIBUTE
####################################################################

$_ALOADATTRIBUTE
Gosub DECLARE_VAR From WMC0YSETRUL
Gosub _ALOADATTRIBUTE_YLOT From WMC1YSETRUL : Gosub TESTALLSTAT
Return

####################################################################
# _ALNKPRO
####################################################################

$_ALNKPRO
Gosub DECLARE_VAR From WMC0YSETRUL
Gosub LNKPRO_YFFCY From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YFACC From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YFGST From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YFCCE From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YTFCY From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YTACC From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YTGST From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_YTCCE From WMC1YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_CREUSR From WMC2YSETRUL : Gosub TESTALLSTAT
Gosub LNKPRO_UPDUSR From WMC2YSETRUL : Gosub TESTALLSTAT
For AINDCLA=1 To maxtab(this.YSETRULTYP)
 If this.YSETRULTYP(AINDCLA)<>null& find(this.YSETRULTYP(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.YSETRULTYP(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Return

$TESTALLSTAT
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return



