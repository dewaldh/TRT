#<AdxTL>@(#)0.0.0.0 $Revision$
# Sage X3 supervisor
## BI-REGLE ## Synchronization rule ACCO3

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".GACCENTRYA" : If clalev([F:DAA])=0 : Local File =OUVTAB [DAA] : Endif
OUVTAB = GDOSSIER+".GACCENTRY" : If clalev([F:HAE])=0 : Local File =OUVTAB [HAE] : Endif
OUVTAB = GDOSSIER+".COMPANY" : If clalev([F:CPY])=0 : Local File =OUVTAB [CPY] : Endif
OUVTAB = GDOSSIER+".LEGGTESEL" : If clalev([F:GTES])=0 : Local File =OUVTAB [GTES] : Endif
OUVTAB = GDOSSIER+".GTYPACCENT" : If clalev([F:GTE])=0 : Local File =OUVTAB [GTE] : Endif
OUVTAB = GDOSSIER+".GACCENTRYD" : If clalev([F:DAE])=0 : Local File =OUVTAB [DAE] : Endif
OUVTAB = GDOSSIER+".GACCOUNT" : If clalev([F:GAC])=0 : Local File =OUVTAB [GAC] : Endif
OUVTAB = GDOSSIER+".GLED" : If clalev([F:LED])=0 : Local File =OUVTAB [LED] : Endif
OUVTAB = "Link [DAA]"
Link [DAA] With
& [HAE]HAE0 = [F:DAA]TYP;[F:DAA]NUM,
& [CPY]CPY0 = [F:DAA]CPY,
& [GTES]GTE1 ~= [F:DAA]TYP;[F:CPY]LEG,
& [GTE]GTE0 = [F:GTES]TYP;[F:GTES]LEG,
& [DAE]DAE0 = [F:DAA]TYP;[F:DAA]NUM;[F:DAA]LIN;[F:DAA]LEDTYP,
& [GAC]GAC0 = [F:DAA]COA;[F:DAA]ACC,
& [LED]LED0 = [F:DAA]LED
& As [LNK_]
& Where ([F:LED]ANA=2 & vireblc([F:GAC]DIE(0),4)<>'')
FILTRE = ""
Return

$FERME
If clalev([F:DAA]) : Close local File [DAA] : Endif
If clalev([F:HAE]) : Close local File [HAE] : Endif
If clalev([F:CPY]) : Close local File [CPY] : Endif
If clalev([F:GTES]) : Close local File [GTES] : Endif
If clalev([F:GTE]) : Close local File [GTE] : Endif
If clalev([F:DAE]) : Close local File [DAE] : Endif
If clalev([F:GAC]) : Close local File [GAC] : Endif
If clalev([F:LED]) : Close local File [LED] : Endif
Return

$LIEN
Return

$MAJFLD
### DOSSIER
[L]FLD="DOSSIER"
[L]FORMULE='nomap'
If dim([F:AAA_]DOSSIER)>0
 [F:AAA_]DOSSIER = nomap
Endif

### FCY
[L]FLD="FCY"
[L]FORMULE='[F:DAA]FCYLIN'
If dim([F:AAA_]FCY)>0
 [F:AAA_]FCY = [F:DAA]FCYLIN
Endif

### FCYGRP
[L]FLD="FCYGRP"
[L]FORMULE='[F:HAE]FCY'
If dim([F:AAA_]FCYGRP)>0
 [F:AAA_]FCYGRP = [F:HAE]FCY
Endif

### TYP
[L]FLD="TYP"
[L]FORMULE='[F:DAA]TYP'
If dim([F:AAA_]TYP)>0
 [F:AAA_]TYP = [F:DAA]TYP
Endif

### NUM
[L]FLD="NUM"
[L]FORMULE='[F:DAA]NUM'
If dim([F:AAA_]NUM)>0
 [F:AAA_]NUM = [F:DAA]NUM
Endif

### CPY
[L]FLD="CPY"
[L]FORMULE='[F:DAA]CPY'
If dim([F:AAA_]CPY)>0
 [F:AAA_]CPY = [F:DAA]CPY
Endif

### LEDTYP
[L]FLD="LEDTYP"
[L]FORMULE='[F:DAA]LEDTYP'
If dim([F:AAA_]LEDTYP)>0
 [F:AAA_]LEDTYP = [F:DAA]LEDTYP
Endif

### LIG
[L]FLD="LIG"
[L]FORMULE='[F:DAA]LIN'
If dim([F:AAA_]LIG)>0
 [F:AAA_]LIG = [F:DAA]LIN
Endif

### LIGANA
[L]FLD="LIGANA"
[L]FORMULE='[F:DAA]ANALIN'
If dim([F:AAA_]LIGANA)>0
 [F:AAA_]LIGANA = [F:DAA]ANALIN
Endif

### DUDLIG
[L]FLD="DUDLIG"
[L]FORMULE=''
If dim([F:AAA_]DUDLIG)>0
FORMULE = ''
 [F:AAA_]DUDLIG = 0
Endif

### FIY
[L]FLD="FIY"
[L]FORMULE='[F:DAE]FIY'
If dim([F:AAA_]FIY)>0
 [F:AAA_]FIY = [F:DAE]FIY
Endif

### BPR
[L]FLD="BPR"
[L]FORMULE='[F:DAA]BPR'
If dim([F:AAA_]BPR)>0
 [F:AAA_]BPR = [F:DAA]BPR
Endif

### COA
[L]FLD="COA"
[L]FORMULE='[F:DAA]COA'
If dim([F:AAA_]COA)>0
 [F:AAA_]COA = [F:DAA]COA
Endif

### ACC
[L]FLD="ACC"
[L]FORMULE='[F:DAA]ACC'
If dim([F:AAA_]ACC)>0
 [F:AAA_]ACC = [F:DAA]ACC
Endif

### DIE1
[L]FLD="DIE1"
[L]FORMULE='GBICPTDIE(1)'
If dim([F:AAA_]DIE1)>0
 [F:AAA_]DIE1 = GBICPTDIE(1)
Endif

### DIE2
[L]FLD="DIE2"
[L]FORMULE='GBICPTDIE(2)'
If dim([F:AAA_]DIE2)>0
 [F:AAA_]DIE2 = GBICPTDIE(2)
Endif

### DIE3
[L]FLD="DIE3"
[L]FORMULE='GBICPTDIE(3)'
If dim([F:AAA_]DIE3)>0
 [F:AAA_]DIE3 = GBICPTDIE(3)
Endif

### DIE4
[L]FLD="DIE4"
[L]FORMULE='GBICPTDIE(4)'
If dim([F:AAA_]DIE4)>0
 [F:AAA_]DIE4 = GBICPTDIE(4)
Endif

### DIE5
[L]FLD="DIE5"
[L]FORMULE='GBICPTDIE(5)'
If dim([F:AAA_]DIE5)>0
 [F:AAA_]DIE5 = GBICPTDIE(5)
Endif

### DIE6
[L]FLD="DIE6"
[L]FORMULE='GBICPTDIE(6)'
If dim([F:AAA_]DIE6)>0
 [F:AAA_]DIE6 = GBICPTDIE(6)
Endif

### DIE7
[L]FLD="DIE7"
[L]FORMULE='GBICPTDIE(7)'
If dim([F:AAA_]DIE7)>0
 [F:AAA_]DIE7 = GBICPTDIE(7)
Endif

### DIE8
[L]FLD="DIE8"
[L]FORMULE='GBICPTDIE(8)'
If dim([F:AAA_]DIE8)>0
 [F:AAA_]DIE8 = GBICPTDIE(8)
Endif

### DIE9
[L]FLD="DIE9"
[L]FORMULE='GBICPTDIE(9)'
If dim([F:AAA_]DIE9)>0
 [F:AAA_]DIE9 = GBICPTDIE(9)
Endif

### CCE1
[L]FLD="CCE1"
[L]FORMULE='func BICPT.SETCCE(1,"DAA")'
If dim([F:AAA_]CCE1)>0
 [F:AAA_]CCE1 = func BICPT.SETCCE(1,"DAA")
Endif

### CCE2
[L]FLD="CCE2"
[L]FORMULE='func BICPT.SETCCE(2,"DAA")'
If dim([F:AAA_]CCE2)>0
 [F:AAA_]CCE2 = func BICPT.SETCCE(2,"DAA")
Endif

### CCE3
[L]FLD="CCE3"
[L]FORMULE='func BICPT.SETCCE(3,"DAA")'
If dim([F:AAA_]CCE3)>0
 [F:AAA_]CCE3 = func BICPT.SETCCE(3,"DAA")
Endif

### CCE4
[L]FLD="CCE4"
[L]FORMULE='func BICPT.SETCCE(4,"DAA")'
If dim([F:AAA_]CCE4)>0
 [F:AAA_]CCE4 = func BICPT.SETCCE(4,"DAA")
Endif

### CCE5
[L]FLD="CCE5"
[L]FORMULE='func BICPT.SETCCE(5,"DAA")'
If dim([F:AAA_]CCE5)>0
 [F:AAA_]CCE5 = func BICPT.SETCCE(5,"DAA")
Endif

### CCE6
[L]FLD="CCE6"
[L]FORMULE='func BICPT.SETCCE(6,"DAA")'
If dim([F:AAA_]CCE6)>0
 [F:AAA_]CCE6 = func BICPT.SETCCE(6,"DAA")
Endif

### CCE7
[L]FLD="CCE7"
[L]FORMULE='func BICPT.SETCCE(7,"DAA")'
If dim([F:AAA_]CCE7)>0
 [F:AAA_]CCE7 = func BICPT.SETCCE(7,"DAA")
Endif

### CCE8
[L]FLD="CCE8"
[L]FORMULE='func BICPT.SETCCE(8,"DAA")'
If dim([F:AAA_]CCE8)>0
 [F:AAA_]CCE8 = func BICPT.SETCCE(8,"DAA")
Endif

### CCE9
[L]FLD="CCE9"
[L]FORMULE='func BICPT.SETCCE(9,"DAA")'
If dim([F:AAA_]CCE9)>0
 [F:AAA_]CCE9 = func BICPT.SETCCE(9,"DAA")
Endif

### CURLED
[L]FLD="CURLED"
[L]FORMULE='[F:DAA]CURLED'
If dim([F:AAA_]CURLED)>0
 [F:AAA_]CURLED = [F:DAA]CURLED
Endif

### CUR
[L]FLD="CUR"
[L]FORMULE='[F:DAA]CUR'
If dim([F:AAA_]CUR)>0
 [F:AAA_]CUR = [F:DAA]CUR
Endif

### DEBCUR
[L]FLD="DEBCUR"
[L]FORMULE='[F:DAA]AMTCUR*([F:DAA]SNS>0)'
If dim([F:AAA_]DEBCUR)>0
 [F:AAA_]DEBCUR = [F:DAA]AMTCUR*([F:DAA]SNS>0)
Endif

### CDTCUR
[L]FLD="CDTCUR"
[L]FORMULE='[F:DAA]AMTCUR*([F:DAA]SNS<0)'
If dim([F:AAA_]CDTCUR)>0
 [F:AAA_]CDTCUR = [F:DAA]AMTCUR*([F:DAA]SNS<0)
Endif

### SOLCUR
[L]FLD="SOLCUR"
[L]FORMULE='[F:DAA]AMTCUR*[F:DAA]SNS'
If dim([F:AAA_]SOLCUR)>0
 [F:AAA_]SOLCUR = [F:DAA]AMTCUR*[F:DAA]SNS
Endif

### SOLDUD
[L]FLD="SOLDUD"
[L]FORMULE=''
If dim([F:AAA_]SOLDUD)>0
FORMULE = ''
 [F:AAA_]SOLDUD = 0
Endif

### DEBQTY
[L]FLD="DEBQTY"
[L]FORMULE='[F:DAA]QTY*([F:DAA]SNS>0)'
If dim([F:AAA_]DEBQTY)>0
 [F:AAA_]DEBQTY = [F:DAA]QTY*([F:DAA]SNS>0)
Endif

### CDTQTY
[L]FLD="CDTQTY"
[L]FORMULE='[F:DAA]QTY*([F:DAA]SNS<0)'
If dim([F:AAA_]CDTQTY)>0
 [F:AAA_]CDTQTY = [F:DAA]QTY*([F:DAA]SNS<0)
Endif

### SOLQTY
[L]FLD="SOLQTY"
[L]FORMULE='[F:DAA]QTY*[F:DAA]SNS'
If dim([F:AAA_]SOLQTY)>0
 [F:AAA_]SOLQTY = [F:DAA]QTY*[F:DAA]SNS
Endif

### DEBLED1
[L]FLD="DEBLED1"
[L]FORMULE='[F:DAA]AMTLED*([F:DAA]SNS>0)'
If dim([F:AAA_]DEBLED1)>0
 [F:AAA_]DEBLED1 = [F:DAA]AMTLED*([F:DAA]SNS>0)
Endif

### CDTLED1
[L]FLD="CDTLED1"
[L]FORMULE='[F:DAA]AMTLED*([F:DAA]SNS<0)'
If dim([F:AAA_]CDTLED1)>0
 [F:AAA_]CDTLED1 = [F:DAA]AMTLED*([F:DAA]SNS<0)
Endif

### SOLLEDDUD
[L]FLD="SOLLEDDUD"
[L]FORMULE=''
If dim([F:AAA_]SOLLEDDUD)>0
FORMULE = ''
 [F:AAA_]SOLLEDDUD = 0
Endif

### SOLLED1
[L]FLD="SOLLED1"
[L]FORMULE='[F:DAA]AMTLED*[F:DAA]SNS'
If dim([F:AAA_]SOLLED1)>0
 [F:AAA_]SOLLED1 = [F:DAA]AMTLED*[F:DAA]SNS
Endif

### DEBQTYLED1
[L]FLD="DEBQTYLED1"
[L]FORMULE='func BICPT.MONTANTL("D","QTY",1)'
If dim([F:AAA_]DEBQTYLED1)>0
 [F:AAA_]DEBQTYLED1 = func BICPT.MONTANTL("D","QTY",1)
Endif

### CDTQTYLED1
[L]FLD="CDTQTYLED1"
[L]FORMULE='func BICPT.MONTANTL("C","QTY",1)'
If dim([F:AAA_]CDTQTYLED1)>0
 [F:AAA_]CDTQTYLED1 = func BICPT.MONTANTL("C","QTY",1)
Endif

### SOLQTYLED1
[L]FLD="SOLQTYLED1"
[L]FORMULE='func BICPT.SOLDEL("QTY",1)'
If dim([F:AAA_]SOLQTYLED1)>0
 [F:AAA_]SOLQTYLED1 = func BICPT.SOLDEL("QTY",1)
Endif

K = instr(1,GDOSSIER,'@')
If K
 [F:AAA_]ADOS = right$(GDOSSIER,K+1)
Else
 [F:AAA_]ADOS = GDOSSIER
Endif
[F:AAA_]AREG = 'ACCO3'
[F:AAA_]AIND = indice
[L]FLD="ACLE"
[L]FORMULE="ACLE"
[F:AAA_]ACLE = num$([F:DAA]TYP)+'~'+num$([F:DAA]NUM)+'~'+num$([F:DAA]LIN)+'~'+num$([F:DAA]LEDTYP)+'~'+num$([F:DAA]ANALIN)
Return

