#<AdxTL>@(#)0.0.0.0 $Revision$Class Tax calc. basis calculation (link)
# Supervisor
## ACLA-CLASSE ## TAXLINK
# 2018-08-27 12:53:17 159


####################################################################
# Labels of the main class and methods 
####################################################################

####################################################################
# 1 : CLE Key ( Field A 3)
####################################################################

$SET_CLE
If [L]_AOLDVAL<>this.CLE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CLE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CLE
 Gosub PROPAGATE_CLE
Endif
Return

$INIT_CLE
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CLE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CLE
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CLE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CLE                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CLE                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CLE
[L]CURPRO = "CLE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CLE,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CLE
[L]CURPRO = "CLE"
Return

$_AOTHERS_CLE
[L]CURPRO = "CLE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CLE
[L]CURPRO = "CLE"
Return

$PROPAGATE_CLE
this.isReadonly = 0
[L]CURPRO = "CLE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CLE
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CLE"
$_LNKPRO_CLE
Return


####################################################################
# 2 : VATTYP Tax type ( Field Local menu number 232)
####################################################################

$SET_VATTYP
If [L]_AOLDVAL<>this.VATTYP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VATTYP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VATTYP
 Gosub PROPAGATE_VATTYP
Endif
Return

$INIT_VATTYP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VATTYP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.VATTYP=0 and fmet this.AGETATTRIBUTE("VATTYP","$isMandatory")="true"
 this.VATTYP = 1
Endif
Return
 
$CONTROL_VATTYP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VATTYP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VATTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VATTYP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VATTYP
[L]CURPRO = "VATTYP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.VATTYP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VATTYP
[L]CURPRO = "VATTYP"
If this.VATTYP<0 or this.VATTYP>len(mess(0,232,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"232 ->"-num$(this.VATTYP)-mess(99,123,1)):  Return : # Local menu "232 -> Invalid option
Endif
Return

$_AOTHERS_VATTYP
[L]CURPRO = "VATTYP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VATTYP
[L]CURPRO = "VATTYP"
Return

$PROPAGATE_VATTYP
this.isReadonly = 0
[L]CURPRO = "VATTYP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VATTYP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VATTYP"
$_LNKPRO_VATTYP
Return


####################################################################
# 3 : LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_LEG
If [L]_AOLDVAL<>this.LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.LEG
 Gosub PROPAGATE_LEG
Endif
Return

$INIT_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"LEG",this.LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_LEG                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_LEG                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_LEG
[L]CURPRO = "LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_LEG
[L]CURPRO = "LEG"
If vireblc(this.LEG,2)<>vireblc(format$("K:20B",this.LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_LEG
[L]CURPRO = "LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"LEG",this.LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_LEG
[L]CURPRO = "LEG"
Return

$PROPAGATE_LEG
this.isReadonly = 0
[L]CURPRO = "LEG"
Gosub _LNKPRO_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "LEG"
$_LNKPRO_LEG
If vireblc(this.LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 5 : NBGRP Number of groups ( Field C 4)
####################################################################

$SET_NBGRP
If [L]_AOLDVAL<>this.NBGRP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_NBGRP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.NBGRP
 Gosub PROPAGATE_NBGRP
Endif
Return

$INIT_NBGRP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "NBGRP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_NBGRP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "NBGRP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_NBGRP                 : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_NBGRP                 : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_NBGRP
[L]CURPRO = "NBGRP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.NBGRP=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_NBGRP
[L]CURPRO = "NBGRP"
Return

$_AOTHERS_NBGRP
[L]CURPRO = "NBGRP"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_NBGRP
[L]CURPRO = "NBGRP"
Return

$PROPAGATE_NBGRP
this.isReadonly = 0
[L]CURPRO = "NBGRP"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_NBGRP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "NBGRP"
$_LNKPRO_NBGRP
Return


####################################################################
# 6 : CPY Company ( Field CPY 5)
####################################################################

$SET_CPY
If [L]_AOLDVAL<>this.CPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CPY
 Gosub PROPAGATE_CPY
Endif
Return

$INIT_CPY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CPY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CPY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CPY
[L]CURPRO = "CPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CPY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>vireblc(format$("K:5c",this.CPY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CPY
[L]CURPRO = "CPY"
If vireblc(this.CPY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCPY.ACTRLREF(this,"CPY",this.CPY,this.CPY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CPY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CPY
[L]CURPRO = "CPY"
Return

$PROPAGATE_CPY
this.isReadonly = 0
[L]CURPRO = "CPY"
Gosub _LNKPRO_CPY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CPY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CPY"
$_LNKPRO_CPY
If vireblc(this.CPY,2)<>""
 # Link COMPANY
 Local File COMPANY [WCPY]
 Read [F:WCPY]CPY0 = this.CPY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$title",[F:WCPY]CPYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CPY","$description",[F:WCPY]CPYNAM)
 Endif
 LogicClose File [WCPY]
Endif
Return


####################################################################
# 7 : FCY Site ( Field FCY 5)
####################################################################

$SET_FCY
If [L]_AOLDVAL<>this.FCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_FCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.FCY
 Gosub PROPAGATE_FCY
Endif
Return

$INIT_FCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "FCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_FCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "FCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_FCY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_FCY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_FCY
[L]CURPRO = "FCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.FCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_FCY
[L]CURPRO = "FCY"
If vireblc(this.FCY,2)<>vireblc(format$("K:5c",this.FCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_FCY
[L]CURPRO = "FCY"
If vireblc(this.FCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"FCY",this.FCY,this.FCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.FCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_FCY
[L]CURPRO = "FCY"
Return

$PROPAGATE_FCY
this.isReadonly = 0
[L]CURPRO = "FCY"
Gosub _LNKPRO_FCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_FCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "FCY"
$_LNKPRO_FCY
If vireblc(this.FCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.FCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("FCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 8 : MODULE Module ( Field Local menu number 14)
####################################################################

$SET_MODULE
If [L]_AOLDVAL<>this.MODULE
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_MODULE
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.MODULE
 Gosub PROPAGATE_MODULE
Endif
Return

$INIT_MODULE
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "MODULE"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.MODULE=0 and fmet this.AGETATTRIBUTE("MODULE","$isMandatory")="true"
 this.MODULE = 1
Endif
Return
 
$CONTROL_MODULE
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "MODULE"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_MODULE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_MODULE                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_MODULE
[L]CURPRO = "MODULE"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.MODULE=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_MODULE
[L]CURPRO = "MODULE"
If this.MODULE<0 or this.MODULE>len(mess(0,14,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"14 ->"-num$(this.MODULE)-mess(99,123,1)):  Return : # Local menu "14 -> Invalid option
Endif
Return

$_AOTHERS_MODULE
[L]CURPRO = "MODULE"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_MODULE
[L]CURPRO = "MODULE"
Return

$PROPAGATE_MODULE
this.isReadonly = 0
[L]CURPRO = "MODULE"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_MODULE
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "MODULE"
$_LNKPRO_MODULE
Return


####################################################################
# 9 : SALFCY Sales site ( Field FCY 5)
####################################################################

$SET_SALFCY
If [L]_AOLDVAL<>this.SALFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SALFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SALFCY
 Gosub PROPAGATE_SALFCY
Endif
Return

$INIT_SALFCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SALFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SALFCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SALFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SALFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SALFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SALFCY
[L]CURPRO = "SALFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SALFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SALFCY
[L]CURPRO = "SALFCY"
If vireblc(this.SALFCY,2)<>vireblc(format$("K:5c",this.SALFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SALFCY
[L]CURPRO = "SALFCY"
If vireblc(this.SALFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"SALFCY",this.SALFCY,this.SALFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.SALFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SALFCY
[L]CURPRO = "SALFCY"
Return

$PROPAGATE_SALFCY
this.isReadonly = 0
[L]CURPRO = "SALFCY"
Gosub _LNKPRO_SALFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SALFCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SALFCY"
$_LNKPRO_SALFCY
If vireblc(this.SALFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.SALFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SALFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("SALFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 10 : PURFCY Purchase site ( Field FCY 5)
####################################################################

$SET_PURFCY
If [L]_AOLDVAL<>this.PURFCY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_PURFCY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.PURFCY
 Gosub PROPAGATE_PURFCY
Endif
Return

$INIT_PURFCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "PURFCY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_PURFCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "PURFCY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_PURFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_PURFCY                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_PURFCY
[L]CURPRO = "PURFCY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.PURFCY,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_PURFCY
[L]CURPRO = "PURFCY"
If vireblc(this.PURFCY,2)<>vireblc(format$("K:5c",this.PURFCY),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_PURFCY
[L]CURPRO = "PURFCY"
If vireblc(this.PURFCY,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPFCY.ACTRLREF(this,"PURFCY",this.PURFCY,this.PURFCY,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.PURFCY<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_PURFCY
[L]CURPRO = "PURFCY"
Return

$PROPAGATE_PURFCY
this.isReadonly = 0
[L]CURPRO = "PURFCY"
Gosub _LNKPRO_PURFCY
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_PURFCY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "PURFCY"
$_LNKPRO_PURFCY
If vireblc(this.PURFCY,2)<>""
 # Link FACILITY
 Local File FACILITY [WFCY]
 Read [F:WFCY]FCY0 = this.PURFCY
 If !fstat
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PURFCY","$title",[F:WFCY]FCYSHO)
  [L]ASTATUS = fmet this.ASETATTRIBUTE("PURFCY","$description",[F:WFCY]FCYNAM)
 Endif
 LogicClose File [WFCY]
Endif
Return


####################################################################
# 11 : VACITM Tax level ( Field TVI 5)
####################################################################

$SET_VACITM
If [L]_AOLDVAL<>this.VACITM
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VACITM
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VACITM
 Gosub PROPAGATE_VACITM
Endif
Return

$INIT_VACITM
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACITM"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VACITM
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACITM"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VACITM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VACITM                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VACITM
[L]CURPRO = "VACITM"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VACITM,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VACITM
[L]CURPRO = "VACITM"
If vireblc(this.VACITM,2)<>vireblc(format$("K:5c",this.VACITM),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VACITM
[L]CURPRO = "VACITM"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VACITM
[L]CURPRO = "VACITM"
If vireblc(this.VACITM,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTVI.ACTRLREF(this,"VACITM",this.VACITM,this.VACITM,this.VACITM_LEG,1,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.VACITM<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_VACITM
this.isReadonly = 0
[L]CURPRO = "VACITM"
Gosub _LNKPRO_VACITM
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VACITM
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACITM"
$_LNKPRO_VACITM
If vireblc(this.VACITM,2)<>""
 # Link TABVACITM
 Local File TABVACITM [WTVI]
 Read [F:WTVI]TVI0 = this.VACITM;this.VACITM_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABVACITM" & ZONE="SHOAXX" & IDENT1=[F:WTVI]VACITM & IDENT2=[F:WTVI]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABVACITM" & ZONE="DESAXX" & IDENT1=[F:WTVI]VACITM & IDENT2=[F:WTVI]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTVI]
Endif
Return


####################################################################
# 12 : VACITM_LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_VACITM_LEG
If [L]_AOLDVAL<>this.VACITM_LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VACITM_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VACITM_LEG
 Gosub PROPAGATE_VACITM_LEG
Endif
Return

$INIT_VACITM_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACITM_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"VACITM_LEG",this.VACITM_LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VACITM_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACITM_LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VACITM_LEG            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VACITM_LEG            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VACITM_LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
If vireblc(this.VACITM_LEG,2)<>vireblc(format$("K:20B",this.VACITM_LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"VACITM_LEG",this.VACITM_LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VACITM_LEG
[L]CURPRO = "VACITM_LEG"
Return

$PROPAGATE_VACITM_LEG
this.isReadonly = 0
[L]CURPRO = "VACITM_LEG"
Gosub _LNKPRO_VACITM_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VACITM_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACITM_LEG"
$_LNKPRO_VACITM_LEG
If vireblc(this.VACITM_LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.VACITM_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM_LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACITM_LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 13 : VACBPR Tax rule ( Field TVB 5)
####################################################################

$SET_VACBPR
If [L]_AOLDVAL<>this.VACBPR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VACBPR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VACBPR
 Gosub PROPAGATE_VACBPR
Endif
Return

$INIT_VACBPR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACBPR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VACBPR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACBPR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VACBPR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VACBPR                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VACBPR
[L]CURPRO = "VACBPR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VACBPR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VACBPR
[L]CURPRO = "VACBPR"
If vireblc(this.VACBPR,2)<>vireblc(format$("K:5c",this.VACBPR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VACBPR
[L]CURPRO = "VACBPR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VACBPR
[L]CURPRO = "VACBPR"
If vireblc(this.VACBPR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPTVB.ACTRLREF(this,"VACBPR",this.VACBPR,this.VACBPR,this.VACBPR_LEG,1,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.VACBPR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
Return

$PROPAGATE_VACBPR
this.isReadonly = 0
[L]CURPRO = "VACBPR"
Gosub _LNKPRO_VACBPR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VACBPR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACBPR"
$_LNKPRO_VACBPR
If vireblc(this.VACBPR,2)<>""
 # Link TABVACBPR
 Local File TABVACBPR [WTVB]
 Read [F:WTVB]TVB0 = this.VACBPR;this.VACBPR_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABVACBPR" & ZONE="SHOAXX" & IDENT1=[F:WTVB]VACBPR & IDENT2=[F:WTVB]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACBPR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABVACBPR" & ZONE="DESAXX" & IDENT1=[F:WTVB]VACBPR & IDENT2=[F:WTVB]LEG & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACBPR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WTVB]
Endif
Return


####################################################################
# 14 : VACBPR_LEG Legislation ( Field Miscellaneous table number)
####################################################################

$SET_VACBPR_LEG
If [L]_AOLDVAL<>this.VACBPR_LEG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_VACBPR_LEG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.VACBPR_LEG
 Gosub PROPAGATE_VACBPR_LEG
Endif
Return

$INIT_VACBPR_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACBPR_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_INI(this,"VACBPR_LEG",this.VACBPR_LEG,909)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_VACBPR_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACBPR_LEG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_VACBPR_LEG            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_VACBPR_LEG            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_VACBPR_LEG
[L]CURPRO = "VACBPR_LEG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.VACBPR_LEG,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_VACBPR_LEG
[L]CURPRO = "VACBPR_LEG"
If vireblc(this.VACBPR_LEG,2)<>vireblc(format$("K:20B",this.VACBPR_LEG),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_VACBPR_LEG
[L]CURPRO = "VACBPR_LEG"
[L]ASTATUS =  func ADI_TOOL.ADI_CONT(this,"VACBPR_LEG",this.VACBPR_LEG,909,"")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_VACBPR_LEG
[L]CURPRO = "VACBPR_LEG"
Return

$PROPAGATE_VACBPR_LEG
this.isReadonly = 0
[L]CURPRO = "VACBPR_LEG"
Gosub _LNKPRO_VACBPR_LEG
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_VACBPR_LEG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "VACBPR_LEG"
$_LNKPRO_VACBPR_LEG
If vireblc(this.VACBPR_LEG,2)<>""
 # Link ATABDIV
 Local File ATABDIV [WADI]
 Read [F:WADI]CODE = 909;this.VACBPR_LEG
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="SHODES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACBPR_LEG","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="ATABDIV" & ZONE="LNGDES" & IDENT1=num$([F:WADI]NUMTAB) & IDENT2=[F:WADI]CODE & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("VACBPR_LEG","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WADI]
Endif
Return


####################################################################
# 15 : AGTPCPCPY Collection agent ( Field Local menu number 1)
####################################################################

$SET_AGTPCPCPY
If [L]_AOLDVAL<>this.AGTPCPCPY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AGTPCPCPY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AGTPCPCPY
 Gosub PROPAGATE_AGTPCPCPY
Endif
Return

$INIT_AGTPCPCPY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTPCPCPY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.AGTPCPCPY=0 and fmet this.AGETATTRIBUTE("AGTPCPCPY","$isMandatory")="true"
 this.AGTPCPCPY = 1
Endif
Return
 
$CONTROL_AGTPCPCPY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTPCPCPY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AGTPCPCPY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AGTPCPCPY             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AGTPCPCPY
[L]CURPRO = "AGTPCPCPY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AGTPCPCPY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AGTPCPCPY
[L]CURPRO = "AGTPCPCPY"
If this.AGTPCPCPY<0 or this.AGTPCPCPY>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.AGTPCPCPY)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_AGTPCPCPY
[L]CURPRO = "AGTPCPCPY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AGTPCPCPY
[L]CURPRO = "AGTPCPCPY"
Return

$PROPAGATE_AGTPCPCPY
this.isReadonly = 0
[L]CURPRO = "AGTPCPCPY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AGTPCPCPY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTPCPCPY"
$_LNKPRO_AGTPCPCPY
Return


####################################################################
# 16 : AGTPCPBPR Collection agent ( Field Local menu number 1)
####################################################################

$SET_AGTPCPBPR
If [L]_AOLDVAL<>this.AGTPCPBPR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AGTPCPBPR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AGTPCPBPR
 Gosub PROPAGATE_AGTPCPBPR
Endif
Return

$INIT_AGTPCPBPR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTPCPBPR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.AGTPCPBPR=0 and fmet this.AGETATTRIBUTE("AGTPCPBPR","$isMandatory")="true"
 this.AGTPCPBPR = 1
Endif
Return
 
$CONTROL_AGTPCPBPR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTPCPBPR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AGTPCPBPR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AGTPCPBPR             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AGTPCPBPR
[L]CURPRO = "AGTPCPBPR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AGTPCPBPR=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AGTPCPBPR
[L]CURPRO = "AGTPCPBPR"
If this.AGTPCPBPR<0 or this.AGTPCPBPR>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.AGTPCPBPR)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_AGTPCPBPR
[L]CURPRO = "AGTPCPBPR"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AGTPCPBPR
[L]CURPRO = "AGTPCPBPR"
Return

$PROPAGATE_AGTPCPBPR
this.isReadonly = 0
[L]CURPRO = "AGTPCPBPR"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AGTPCPBPR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTPCPBPR"
$_LNKPRO_AGTPCPBPR
Return


####################################################################
# 17 : SATISS Issue ( Field SAT 35)
####################################################################

$SET_SATISS
If [L]_AOLDVAL<>this.SATISS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SATISS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SATISS
 Gosub PROPAGATE_SATISS
Endif
Return

$INIT_SATISS
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATISS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SATISS
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATISS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SATISS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SATISS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SATISS
[L]CURPRO = "SATISS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SATISS,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SATISS
[L]CURPRO = "SATISS"
If vireblc(this.SATISS,2)<>vireblc(format$("K:35X",this.SATISS),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SATISS
[L]CURPRO = "SATISS"
[L]ASTATUS =  func ASYRTRTATY.CONTROLSAT(this,"SATISS",this.SATISS,"","")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SATISS
[L]CURPRO = "SATISS"
Return

$PROPAGATE_SATISS
this.isReadonly = 0
[L]CURPRO = "SATISS"
Gosub _LNKPRO_SATISS
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SATISS
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATISS"
$_LNKPRO_SATISS
If vireblc(this.SATISS,2)<>""
 # Link TABSUBDIV
 Local File TABSUBDIV [WATU]
 Read [F:WATU]ATU0 = "";0;""
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABSUBDIV" & ZONE="INTIT" & IDENT1=[F:WATU]CRYTYP & IDENT2=[F:WATU]COD & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SATISS","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABSUBDIV" & ZONE="INTIT" & IDENT1=[F:WATU]CRYTYP & IDENT2=[F:WATU]COD & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SATISS","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WATU]
Endif
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATSAT(this,"SATISS",this.SATISS,[L]AFORMAT,"","")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("SATISS","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 18 : SATRCP Receipt ( Field SAT 35)
####################################################################

$SET_SATRCP
If [L]_AOLDVAL<>this.SATRCP
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SATRCP
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SATRCP
 Gosub PROPAGATE_SATRCP
Endif
Return

$INIT_SATRCP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATRCP"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SATRCP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATRCP"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SATRCP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SATRCP                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SATRCP
[L]CURPRO = "SATRCP"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.SATRCP,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SATRCP
[L]CURPRO = "SATRCP"
If vireblc(this.SATRCP,2)<>vireblc(format$("K:35X",this.SATRCP),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_SATRCP
[L]CURPRO = "SATRCP"
[L]ASTATUS =  func ASYRTRTATY.CONTROLSAT(this,"SATRCP",this.SATRCP,"","")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SATRCP
[L]CURPRO = "SATRCP"
Return

$PROPAGATE_SATRCP
this.isReadonly = 0
[L]CURPRO = "SATRCP"
Gosub _LNKPRO_SATRCP
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SATRCP
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATRCP"
$_LNKPRO_SATRCP
If vireblc(this.SATRCP,2)<>""
 # Link TABSUBDIV
 Local File TABSUBDIV [WATU]
 Read [F:WATU]ATU0 = "";0;""
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABSUBDIV" & ZONE="INTIT" & IDENT1=[F:WATU]CRYTYP & IDENT2=[F:WATU]COD & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SATRCP","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABSUBDIV" & ZONE="INTIT" & IDENT1=[F:WATU]CRYTYP & IDENT2=[F:WATU]COD & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("SATRCP","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
 Endif
 LogicClose File [WATU]
Endif
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATSAT(this,"SATRCP",this.SATRCP,[L]AFORMAT,"","")
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("SATRCP","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 19 : SATFLG Indicator ( Field C 4)
####################################################################

$SET_SATFLG
If [L]_AOLDVAL<>this.SATFLG
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_SATFLG
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.SATFLG
 Gosub PROPAGATE_SATFLG
Endif
Return

$INIT_SATFLG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATFLG"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_SATFLG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATFLG"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_SATFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_SATFLG                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_SATFLG
[L]CURPRO = "SATFLG"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.SATFLG=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_SATFLG
[L]CURPRO = "SATFLG"
Return

$_AOTHERS_SATFLG
[L]CURPRO = "SATFLG"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_SATFLG
[L]CURPRO = "SATFLG"
Return

$PROPAGATE_SATFLG
this.isReadonly = 0
[L]CURPRO = "SATFLG"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_SATFLG
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "SATFLG"
$_LNKPRO_SATFLG
Return


####################################################################
# 20 : AGTSATTAX Collection agent ( Field Local menu number 1)
####################################################################

$SET_AGTSATTAX
If [L]_AOLDVAL<>this.AGTSATTAX
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AGTSATTAX
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AGTSATTAX
 Gosub PROPAGATE_AGTSATTAX
Endif
Return

$INIT_AGTSATTAX
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTSATTAX"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If this.AGTSATTAX=0 and fmet this.AGETATTRIBUTE("AGTSATTAX","$isMandatory")="true"
 this.AGTSATTAX = 1
Endif
Return
 
$CONTROL_AGTSATTAX
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTSATTAX"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AGTSATTAX             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AGTSATTAX             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AGTSATTAX
[L]CURPRO = "AGTSATTAX"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AGTSATTAX=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AGTSATTAX
[L]CURPRO = "AGTSATTAX"
If this.AGTSATTAX<0 or this.AGTSATTAX>len(mess(0,1,1))
 # Pop / Invalid option
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(4,11,1)-"1 ->"-num$(this.AGTSATTAX)-mess(99,123,1)):  Return : # Local menu "1 -> Invalid option
Endif
Return

$_AOTHERS_AGTSATTAX
[L]CURPRO = "AGTSATTAX"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AGTSATTAX
[L]CURPRO = "AGTSATTAX"
Return

$PROPAGATE_AGTSATTAX
this.isReadonly = 0
[L]CURPRO = "AGTSATTAX"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AGTSATTAX
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AGTSATTAX"
$_LNKPRO_AGTSATTAX
Return


####################################################################
# 22 : CUR Currency ( Field CUR 3)
####################################################################

$SET_CUR
If [L]_AOLDVAL<>this.CUR
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_CUR
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.CUR
 Gosub PROPAGATE_CUR
Endif
Return

$INIT_CUR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CUR"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_CUR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CUR"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_CUR                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_CUR
[L]CURPRO = "CUR"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & vireblc(this.CUR,2)=""
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>vireblc(format$("K:3c",this.CUR),2)
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(149,100,1)) :  Return : # Incorrect Format
Endif
Return

$_AOTHERS_CUR
[L]CURPRO = "CUR"
If vireblc(this.CUR,2)<>""
 If fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent")=""
  [L]ASTATUS =  func WMTYPCUR.ACTRLREF(this,"CUR",this.CUR,this.CUR,"")
  If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
 Else
  If this.CUR<>evalue("this.APARENT."+fmet this.AGETATTRIBUTE([L]CURPRO,"$namProParent"))
   [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(83,123,1)) :  Return : # Invalid value
  Endif
 Endif
Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_CUR
[L]CURPRO = "CUR"
Return

$PROPAGATE_CUR
this.isReadonly = 0
[L]CURPRO = "CUR"
Gosub _LNKPRO_CUR
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_CUR
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "CUR"
$_LNKPRO_CUR
If vireblc(this.CUR,2)<>""
 # Link TABCUR
 Local File TABCUR [WTCU]
 Read [F:WTCU]TCU0 = this.CUR
 If !fstat
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTSHO" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$title",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  Local File ATEXTRA [WAXX]
  Local Char ILAN(GLONLAN)
  For ILAN=this.ACTX.LAN, this.ACTX.AFOLD.ALANGDEF
   For [F:WAXX] Where CODFIC="TABCUR" & ZONE="INTDES" & IDENT1=[F:WTCU]CUR & IDENT2="" & LANGUE = ILAN
    [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$description",[WAXX]TEXTE)
    Break 2
   Next WAXX
  Next ILAN
  LogicClose File [WAXX]
  [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$symbol",[F:WTCU]CURSYM)
  If int(val([F:WTCU]CURFMT1))>0
   Local Char WPREC(10)
   Local Char WSCALE(10)
   WPREC=num$(int(val([F:WTCU]CURFMT1)))
   WSCALE=num$(int(10*(val([F:WTCU]CURFMT1)-int(val([F:WTCU]CURFMT1)))))
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$precision",WPREC)
   [L]ASTATUS = fmet this.ASETATTRIBUTE("CUR","$scale",WSCALE)
  Endif
 Endif
 LogicClose File [WTCU]
Endif
Return


####################################################################
# 23 : AMTNOTLIN Line amount - tax ( Field MD1 0)
####################################################################

$SET_AMTNOTLIN
If [L]_AOLDVAL<>this.AMTNOTLIN
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTNOTLIN
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTNOTLIN
 Gosub PROPAGATE_AMTNOTLIN
Endif
Return

$INIT_AMTNOTLIN
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTNOTLIN"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTNOTLIN
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTNOTLIN"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTNOTLIN             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTNOTLIN             : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTNOTLIN
[L]CURPRO = "AMTNOTLIN"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTNOTLIN=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTNOTLIN
[L]CURPRO = "AMTNOTLIN"
Return

$_AOTHERS_AMTNOTLIN
[L]CURPRO = "AMTNOTLIN"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"AMTNOTLIN",this.AMTNOTLIN,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTNOTLIN
[L]CURPRO = "AMTNOTLIN"
Return

$PROPAGATE_AMTNOTLIN
this.isReadonly = 0
[L]CURPRO = "AMTNOTLIN"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTNOTLIN
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTNOTLIN"
$_LNKPRO_AMTNOTLIN
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"AMTNOTLIN",this.AMTNOTLIN,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTNOTLIN","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 24 : AMTTAXLIN1 Tax amount 1 ( Field MD1 0)
####################################################################

$SET_AMTTAXLIN1
If [L]_AOLDVAL<>this.AMTTAXLIN1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTTAXLIN1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTTAXLIN1
 Gosub PROPAGATE_AMTTAXLIN1
Endif
Return

$INIT_AMTTAXLIN1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTTAXLIN1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTTAXLIN1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTTAXLIN1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTTAXLIN1            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTTAXLIN1            : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTTAXLIN1
[L]CURPRO = "AMTTAXLIN1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTTAXLIN1=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTTAXLIN1
[L]CURPRO = "AMTTAXLIN1"
Return

$_AOTHERS_AMTTAXLIN1
[L]CURPRO = "AMTTAXLIN1"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"AMTTAXLIN1",this.AMTTAXLIN1,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTTAXLIN1
[L]CURPRO = "AMTTAXLIN1"
Return

$PROPAGATE_AMTTAXLIN1
this.isReadonly = 0
[L]CURPRO = "AMTTAXLIN1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTTAXLIN1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTTAXLIN1"
$_LNKPRO_AMTTAXLIN1
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"AMTTAXLIN1",this.AMTTAXLIN1,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTTAXLIN1","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 25 : AMTNOT Amount - tax ( Field MD1 0)
####################################################################

$SET_AMTNOT
If [L]_AOLDVAL<>this.AMTNOT
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTNOT
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTNOT
 Gosub PROPAGATE_AMTNOT
Endif
Return

$INIT_AMTNOT
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTNOT"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTNOT
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTNOT"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTNOT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTNOT                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTNOT
[L]CURPRO = "AMTNOT"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTNOT=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTNOT
[L]CURPRO = "AMTNOT"
Return

$_AOTHERS_AMTNOT
[L]CURPRO = "AMTNOT"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"AMTNOT",this.AMTNOT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTNOT
[L]CURPRO = "AMTNOT"
Return

$PROPAGATE_AMTNOT
this.isReadonly = 0
[L]CURPRO = "AMTNOT"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTNOT
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTNOT"
$_LNKPRO_AMTNOT
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"AMTNOT",this.AMTNOT,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTNOT","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 26 : AMTTAX1 Tax amount 1 ( Field MD1 0)
####################################################################

$SET_AMTTAX1
If [L]_AOLDVAL<>this.AMTTAX1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTTAX1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTTAX1
 Gosub PROPAGATE_AMTTAX1
Endif
Return

$INIT_AMTTAX1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTTAX1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTTAX1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTTAX1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTTAX1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTTAX1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTTAX1
[L]CURPRO = "AMTTAX1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTTAX1=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTTAX1
[L]CURPRO = "AMTTAX1"
Return

$_AOTHERS_AMTTAX1
[L]CURPRO = "AMTTAX1"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD1(this,"AMTTAX1",this.AMTTAX1,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTTAX1
[L]CURPRO = "AMTTAX1"
Return

$PROPAGATE_AMTTAX1
this.isReadonly = 0
[L]CURPRO = "AMTTAX1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTTAX1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTTAX1"
$_LNKPRO_AMTTAX1
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD1(this,"AMTTAX1",this.AMTTAX1,[L]AFORMAT,this.CUR)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTTAX1","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 27 : AMTBAS Calculated basis ( Field MD5 0)
####################################################################

$SET_AMTBAS
If [L]_AOLDVAL<>this.AMTBAS
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTBAS
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTBAS
 Gosub PROPAGATE_AMTBAS
Endif
Return

$INIT_AMTBAS
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTBAS
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTBAS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTBAS                : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTBAS
[L]CURPRO = "AMTBAS"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTBAS=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTBAS
[L]CURPRO = "AMTBAS"
Return

$_AOTHERS_AMTBAS
[L]CURPRO = "AMTBAS"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD5(this,"AMTBAS",this.AMTBAS)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTBAS
[L]CURPRO = "AMTBAS"
Return

$PROPAGATE_AMTBAS
this.isReadonly = 0
[L]CURPRO = "AMTBAS"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTBAS
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS"
$_LNKPRO_AMTBAS
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD5(this,"AMTBAS",this.AMTBAS,[L]AFORMAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTBAS","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 28 : AMTBAS1 Calculated basis ( Field MD5 0)
####################################################################

$SET_AMTBAS1
If [L]_AOLDVAL<>this.AMTBAS1
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTBAS1
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTBAS1
 Gosub PROPAGATE_AMTBAS1
Endif
Return

$INIT_AMTBAS1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS1"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTBAS1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS1"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTBAS1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTBAS1               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTBAS1
[L]CURPRO = "AMTBAS1"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTBAS1=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTBAS1
[L]CURPRO = "AMTBAS1"
Return

$_AOTHERS_AMTBAS1
[L]CURPRO = "AMTBAS1"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD5(this,"AMTBAS1",this.AMTBAS1)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTBAS1
[L]CURPRO = "AMTBAS1"
Return

$PROPAGATE_AMTBAS1
this.isReadonly = 0
[L]CURPRO = "AMTBAS1"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTBAS1
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS1"
$_LNKPRO_AMTBAS1
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD5(this,"AMTBAS1",this.AMTBAS1,[L]AFORMAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTBAS1","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 29 : AMTBAS2 Calculated basis ( Field MD5 0)
####################################################################

$SET_AMTBAS2
If [L]_AOLDVAL<>this.AMTBAS2
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_AMTBAS2
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.AMTBAS2
 Gosub PROPAGATE_AMTBAS2
Endif
Return

$INIT_AMTBAS2
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS2"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_AMTBAS2
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS2"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_AMTBAS2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_AMTBAS2               : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_AMTBAS2
[L]CURPRO = "AMTBAS2"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.AMTBAS2=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_AMTBAS2
[L]CURPRO = "AMTBAS2"
Return

$_AOTHERS_AMTBAS2
[L]CURPRO = "AMTBAS2"
[L]ASTATUS =  func ASYRTRTATY.CONTROLMD5(this,"AMTBAS2",this.AMTBAS2)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_AMTBAS2
[L]CURPRO = "AMTBAS2"
Return

$PROPAGATE_AMTBAS2
this.isReadonly = 0
[L]CURPRO = "AMTBAS2"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_AMTBAS2
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "AMTBAS2"
$_LNKPRO_AMTBAS2
Local Char AFORMAT(50)
[L]ASTATUS =  func ASYRTRTATY.GETFORMATMD5(this,"AMTBAS2",this.AMTBAS2,[L]AFORMAT)
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]AFORMAT<>''
[L]AFORMAT='"'+[L]AFORMAT+'"'
[L]ASTATUS = fmet this.ASETATTRIBUTE("AMTBAS2","$x3Format",[L]AFORMAT)
Endif
Return


####################################################################
# 30 : QTY Quantity ordered ( Field DCB 9)
####################################################################

$SET_QTY
If [L]_AOLDVAL<>this.QTY
 Call _ASTATUSPARENT(this) From ASYRSUB
Endif
Gosub CONTROL_QTY
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
If [L]_AOLDVAL<>this.QTY
 Gosub PROPAGATE_QTY
Endif
Return

$INIT_QTY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "QTY"
[L]ARULE = "INIT" : [L]ACTION = "INIT" : Gosub ACTION From ASYRSUB
If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return
 
$CONTROL_QTY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "QTY"
[L]ASTATUS = fmet this.ADELETEERROR([L]CURPRO)
Gosub _AFORMAT_QTY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Gosub _AOTHERS_QTY                   : If [L]ASTATUS>=[V]CST_AERROR : Return : Endif
Return

$_AMANDATORY_QTY
[L]CURPRO = "QTY"
If fmet this.AGETATTRIBUTE([L]CURPRO,"$isMandatory")="true" & this.QTY=0
 [L]ASTATUS = func ASYRSUB._ASETSTATUS(this,[L]CURPRO,0,[V]CST_AERROR,[V]CST_AHTTP_BAD_REQUEST,mess(10,123,1)) :  Return : # Mandatory field
Endif
Return

$_AFORMAT_QTY
[L]CURPRO = "QTY"
Return

$_AOTHERS_QTY
[L]CURPRO = "QTY"
[L]ARULE = "CONTROL" : [L]ACTION = "CONTROL" : Gosub ACTION From ASYRSUB
Return

$_AOTHERS_REF_QTY
[L]CURPRO = "QTY"
Return

$PROPAGATE_QTY
this.isReadonly = 0
[L]CURPRO = "QTY"
[L]ARULE = "PROPAGATE" : [L]ACTION = "PROPAGATE" : Gosub ACTION From ASYRSUB
this.isReadonly = 1
Return

$LNKPRO_QTY
Gosub DECLARE_VAR From WMC0TAXLINK
[L]CURPRO = "QTY"
$_LNKPRO_QTY
Return

$_ALOADATTRIBUTE_QTY
[L]ASTATUS = fmet this.ASETATTRIBUTE("QTY","$isMandatory","true")
Return




