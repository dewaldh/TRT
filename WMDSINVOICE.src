#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
## BI-DIMENSION ## Synchronization rule SINVOICE

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".SINVOICED" : If clalev([F:SID])=0 : Local File =OUVTAB [SID] : Endif
OUVTAB = GDOSSIER+".SINVOICE" : If clalev([F:SIH])=0 : Local File =OUVTAB [SIH] : Endif
OUVTAB = GDOSSIER+".SINVOICEV" : If clalev([F:SIV])=0 : Local File =OUVTAB [SIV] : Endif
OUVTAB = GDOSSIER+".COMPANY" : If clalev([F:CPY])=0 : Local File =OUVTAB [CPY] : Endif
OUVTAB = "Link [SID]"
Link [SID] With
& [SIH]SIH0 = [F:SID]NUM,
& [SIV]SIV0 = [F:SID]NUM,
& [CPY]CPY0 = [F:SIV]CPY
& As [LNK_]
& Where [F:SIH]ORIMOD=5 & [F:SIH]STA=3
& Order By Key CLE = [SID]NUM;[SID]SIDLIN
FILTRE = ""
Return

$FERME
If clalev([F:SID]) : Close local File [SID] : Endif
If clalev([F:SIH]) : Close local File [SIH] : Endif
If clalev([F:SIV]) : Close local File [SIV] : Endif
If clalev([F:CPY]) : Close local File [CPY] : Endif
Return

$DCLE
Local Char    DCLE(GLONAVA)(1..2)
Local Integer DTYP(1..2)
Local Integer NBDCLE
NBDCLE = 2
DCLE(1) = "SIHNUM"
DTYP(1) =  7
DCLE(2) = "SIDLIN"
DTYP(2) =  3
Return

$CHARGE_CLE
If dim([F:AAA_]SIHNUM)>0
 [F:AAA_]SIHNUM = [F:SID]NUM
Endif
If dim([F:AAA_]SIDLIN)>0
 [F:AAA_]SIDLIN = [F:SID]SIDLIN
Endif
Return

########################################################################
# Return the filter necessary for incremental delete in synchroonization
Subprog GET_FLTDELINC(PFLT)
Variable Clbfile PFLT
PFLT = "1=1"
Append PFLT, " & [F:AAA_]SIHNUM=[F:SID]NUM"
Append PFLT, " & [F:AAA_]SIDLIN=[F:SID]SIDLIN"

End

$MAJFLD
### SIHNUM
[L]FLD="SIHNUM"
[L]FORMULE='[F:SID]NUM'
If dim([F:AAA_]SIHNUM)>0
 [F:AAA_]SIHNUM = [F:SID]NUM
Endif

### SIDLIN
[L]FLD="SIDLIN"
[L]FORMULE='[F:SID]SIDLIN'
If dim([F:AAA_]SIDLIN)>0
 [F:AAA_]SIDLIN = [F:SID]SIDLIN
Endif

### SIVTYP
[L]FLD="SIVTYP"
[L]FORMULE='[F:SIV]SIVTYP'
If dim([F:AAA_]SIVTYP)>0
 [F:AAA_]SIVTYP = [F:SIV]SIVTYP
Endif

### SIVTYP_LEG
[L]FLD="SIVTYP_LEG"
[L]FORMULE='func TRTX3BIVEN.GETLEG_SIVTYP([F:AAA_]SIVTYP,[F:CPY]LEG)'
If dim([F:AAA_]SIVTYP_LEG)>0
 [F:AAA_]SIVTYP_LEG = func TRTX3BIVEN.GETLEG_SIVTYP([F:AAA_]SIVTYP,[F:CPY]LEG)
Endif

### INVTYP
[L]FLD="INVTYP"
[L]FORMULE='[F:SIV]INVTYP'
If dim([F:AAA_]INVTYP)>0
 [F:AAA_]INVTYP = [F:SIV]INVTYP
Endif

### INVDAT
[L]FLD="INVDAT"
[L]FORMULE='[F:SIV]INVDAT'
If dim([F:AAA_]INVDAT)>0
 [F:AAA_]INVDAT = [F:SIV]INVDAT
Endif

### BPRFCT
[L]FLD="BPRFCT"
[L]FORMULE='[F:SIH]BPRFCT'
If dim([F:AAA_]BPRFCT)>0
 [F:AAA_]BPRFCT = [F:SIH]BPRFCT
Endif

### EECICT
[L]FLD="EECICT"
[L]FORMULE='[F:SIV]EECICT'
If dim([F:AAA_]EECICT)>0
 [F:AAA_]EECICT = [F:SIV]EECICT
Endif

### EECSCH
[L]FLD="EECSCH"
[L]FORMULE='[F:SIV]EECSCH'
If dim([F:AAA_]EECSCH)>0
 [F:AAA_]EECSCH = [F:SIV]EECSCH
Endif

### EECSCH_LEG
[L]FLD="EECSCH_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_EECSCH([F:AAA_]EECSCH,[F:CPY]LEG)'
If dim([F:AAA_]EECSCH_LEG)>0
 [F:AAA_]EECSCH_LEG = func TRTX3BITC.GETLEG_EECSCH([F:AAA_]EECSCH,[F:CPY]LEG)
Endif

### EECNAT
[L]FLD="EECNAT"
[L]FORMULE='[F:SIV]EECNAT'
If dim([F:AAA_]EECNAT)>0
 [F:AAA_]EECNAT = [F:SIV]EECNAT
Endif

### EECNAT_LEG
[L]FLD="EECNAT_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_EECNAT([F:AAA_]EECNAT,[F:CPY]LEG)'
If dim([F:AAA_]EECNAT_LEG)>0
 [F:AAA_]EECNAT_LEG = func TRTX3BITC.GETLEG_EECNAT([F:AAA_]EECNAT,[F:CPY]LEG)
Endif

### EECFLOPHY
[L]FLD="EECFLOPHY"
[L]FORMULE='[F:SID]EECFLOPHY'
If dim([F:AAA_]EECFLOPHY)>0
 [F:AAA_]EECFLOPHY = [F:SID]EECFLOPHY
Endif

### FFWNUM
[L]FLD="FFWNUM"
[L]FORMULE='[F:SIV]FFWNUM'
If dim([F:AAA_]FFWNUM)>0
 [F:AAA_]FFWNUM = [F:SIV]FFWNUM
Endif

### VAC
[L]FLD="VAC"
[L]FORMULE='[F:SIH]VAC'
If dim([F:AAA_]VAC)>0
 [F:AAA_]VAC = [F:SIH]VAC
Endif

### VACBPR_LEG
[L]FLD="VACBPR_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_VACBPR([F:AAA_]VAC,[F:CPY]LEG)'
If dim([F:AAA_]VACBPR_LEG)>0
 [F:AAA_]VACBPR_LEG = func TRTX3BITC.GETLEG_VACBPR([F:AAA_]VAC,[F:CPY]LEG)
Endif

### VAT
[L]FLD="VAT"
[L]FORMULE='[F:SID]VAT(0)'
If dim([F:AAA_]VAT)>0
 [F:AAA_]VAT = [F:SID]VAT(0)
Endif

### VAT_LEG
[L]FLD="VAT_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_VAT([F:AAA_]VAT,[F:CPY]LEG)'
If dim([F:AAA_]VAT_LEG)>0
 [F:AAA_]VAT_LEG = func TRTX3BITC.GETLEG_VAT([F:AAA_]VAT,[F:CPY]LEG)
Endif

### PTE
[L]FLD="PTE"
[L]FORMULE='[F:SIH]PTE'
If dim([F:AAA_]PTE)>0
 [F:AAA_]PTE = [F:SIH]PTE
Endif

### PTE_LEG
[L]FLD="PTE_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_PTE([F:AAA_]PTE,[F:CPY]LEG)'
If dim([F:AAA_]PTE_LEG)>0
 [F:AAA_]PTE_LEG = func TRTX3BITC.GETLEG_PTE([F:AAA_]PTE,[F:CPY]LEG)
Endif

### DEP
[L]FLD="DEP"
[L]FORMULE='[F:SIV]DEP'
If dim([F:AAA_]DEP)>0
 [F:AAA_]DEP = [F:SIV]DEP
Endif

### DEP_LEG
[L]FLD="DEP_LEG"
[L]FORMULE='func TRTX3BITC.GETLEG_DEP([F:AAA_]DEP,[F:CPY]LEG)'
If dim([F:AAA_]DEP_LEG)>0
 [F:AAA_]DEP_LEG = func TRTX3BITC.GETLEG_DEP([F:AAA_]DEP,[F:CPY]LEG)
Endif

### CNOREN
[L]FLD="CNOREN"
[L]FORMULE='[F:SIV]CNOREN'
If dim([F:AAA_]CNOREN)>0
 [F:AAA_]CNOREN = [F:SIV]CNOREN
Endif

### ITMDES1
[L]FLD="ITMDES1"
[L]FORMULE='[F:SID]ITMDES1'
If dim([F:AAA_]ITMDES1)>0
 [F:AAA_]ITMDES1 = [F:SID]ITMDES1
Endif

### LINTYP
[L]FLD="LINTYP"
[L]FORMULE='[F:SID]LINTYP'
If dim([F:AAA_]LINTYP)>0
 [F:AAA_]LINTYP = [F:SID]LINTYP
Endif

### FOCFLG
[L]FLD="FOCFLG"
[L]FORMULE='[F:SID]FOCFLG'
If dim([F:AAA_]FOCFLG)>0
 [F:AAA_]FOCFLG = [F:SID]FOCFLG
Endif

### GROPRI
[L]FLD="GROPRI"
[L]FORMULE='[F:SID]GROPRI'
If dim([F:AAA_]GROPRI)>0
 [F:AAA_]GROPRI = [F:SID]GROPRI
Endif

### NETPRI
[L]FLD="NETPRI"
[L]FORMULE='[F:SID]NETPRI'
If dim([F:AAA_]NETPRI)>0
 [F:AAA_]NETPRI = [F:SID]NETPRI
Endif

### CPRPRI
[L]FLD="CPRPRI"
[L]FORMULE='[F:SID]CPRPRI'
If dim([F:AAA_]CPRPRI)>0
 [F:AAA_]CPRPRI = [F:SID]CPRPRI
Endif

### PFM
[L]FLD="PFM"
[L]FORMULE='[F:SID]PFM'
If dim([F:AAA_]PFM)>0
 [F:AAA_]PFM = [F:SID]PFM
Endif

### PRIORD
[L]FLD="PRIORD"
[L]FORMULE='[F:SID]PRIORD'
If dim([F:AAA_]PRIORD)>0
 [F:AAA_]PRIORD = [F:SID]PRIORD
Endif

### SAU
[L]FLD="SAU"
[L]FORMULE='[F:SID]SAU'
If dim([F:AAA_]SAU)>0
 [F:AAA_]SAU = [F:SID]SAU
Endif

### SAUSTUCOE
[L]FLD="SAUSTUCOE"
[L]FORMULE='[F:SID]SAUSTUCOE'
If dim([F:AAA_]SAUSTUCOE)>0
 [F:AAA_]SAUSTUCOE = [F:SID]SAUSTUCOE
Endif

### REPRAT1
[L]FLD="REPRAT1"
[L]FORMULE='[F:SID]REPRAT1'
If dim([F:AAA_]REPRAT1)>0
 [F:AAA_]REPRAT1 = [F:SID]REPRAT1
Endif

### REPRAT2
[L]FLD="REPRAT2"
[L]FORMULE='[F:SID]REPRAT2'
If dim([F:AAA_]REPRAT2)>0
 [F:AAA_]REPRAT2 = [F:SID]REPRAT2
Endif

### BPINAM
[L]FLD="BPINAM"
[L]FORMULE='[F:SIV]BPINAM'
If dim([F:AAA_]BPINAM)>0
 [F:AAA_]BPINAM = [F:SIV]BPINAM
Endif

### CNINAM
[L]FLD="CNINAM"
[L]FORMULE='[F:SIV]CNINAM'
If dim([F:AAA_]CNINAM)>0
 [F:AAA_]CNINAM = [F:SIV]CNINAM
Endif

### POSCOD
[L]FLD="POSCOD"
[L]FORMULE='vireblc([F:SIH]POSCOD,1)'
If dim([F:AAA_]POSCOD)>0
 [F:AAA_]POSCOD = vireblc([F:SIH]POSCOD,1)
Endif

### CTY
[L]FLD="CTY"
[L]FORMULE='[F:SIH]CTY'
If dim([F:AAA_]CTY)>0
 [F:AAA_]CTY = [F:SIH]CTY
Endif

### CRY
[L]FLD="CRY"
[L]FORMULE='[F:SIH]CRY'
If dim([F:AAA_]CRY)>0
 [F:AAA_]CRY = [F:SIH]CRY
Endif

### BPDNAM
[L]FLD="BPDNAM"
[L]FORMULE='[F:SIV]BPDNAM'
If dim([F:AAA_]BPDNAM)>0
 [F:AAA_]BPDNAM = [F:SIV]BPDNAM
Endif

### CNDNAM
[L]FLD="CNDNAM"
[L]FORMULE='[F:SIV]CNDNAM'
If dim([F:AAA_]CNDNAM)>0
 [F:AAA_]CNDNAM = [F:SIV]CNDNAM
Endif

### BPDPOSCOD
[L]FLD="BPDPOSCOD"
[L]FORMULE='vireblc([F:SIV]BPDPOSCOD,1)'
If dim([F:AAA_]BPDPOSCOD)>0
 [F:AAA_]BPDPOSCOD = vireblc([F:SIV]BPDPOSCOD,1)
Endif

### BPDCTY
[L]FLD="BPDCTY"
[L]FORMULE='[F:SIV]BPDCTY'
If dim([F:AAA_]BPDCTY)>0
 [F:AAA_]BPDCTY = [F:SIV]BPDCTY
Endif

### BPDCRY
[L]FLD="BPDCRY"
[L]FORMULE='[F:SIV]BPDCRY'
If dim([F:AAA_]BPDCRY)>0
 [F:AAA_]BPDCRY = [F:SIV]BPDCRY
Endif

### BPYNAM
[L]FLD="BPYNAM"
[L]FORMULE='[F:SIH]BPYNAM'
If dim([F:AAA_]BPYNAM)>0
 [F:AAA_]BPYNAM = [F:SIH]BPYNAM
Endif

### BPYPOSCOD
[L]FLD="BPYPOSCOD"
[L]FORMULE='vireblc([F:SIH]BPYPOSCOD,1)'
If dim([F:AAA_]BPYPOSCOD)>0
 [F:AAA_]BPYPOSCOD = vireblc([F:SIH]BPYPOSCOD,1)
Endif

### BPYCTY
[L]FLD="BPYCTY"
[L]FORMULE='[F:SIH]BPYCTY'
If dim([F:AAA_]BPYCTY)>0
 [F:AAA_]BPYCTY = [F:SIH]BPYCTY
Endif

### BPYCRY
[L]FLD="BPYCRY"
[L]FORMULE='[F:SIH]BPYCRY'
If dim([F:AAA_]BPYCRY)>0
 [F:AAA_]BPYCRY = [F:SIH]BPYCRY
Endif

### SOHNUM
[L]FLD="SOHNUM"
[L]FORMULE='[F:SID]SOHNUM'
If dim([F:AAA_]SOHNUM)>0
 [F:AAA_]SOHNUM = [F:SID]SOHNUM
Endif

### SOPLIN
[L]FLD="SOPLIN"
[L]FORMULE='[F:SID]SOPLIN'
If dim([F:AAA_]SOPLIN)>0
 [F:AAA_]SOPLIN = [F:SID]SOPLIN
Endif

### SOQSEQ
[L]FLD="SOQSEQ"
[L]FORMULE='[F:SID]SOQSEQ'
If dim([F:AAA_]SOQSEQ)>0
 [F:AAA_]SOQSEQ = [F:SID]SOQSEQ
Endif

### SDHNUM
[L]FLD="SDHNUM"
[L]FORMULE='[F:SID]SDHNUM'
If dim([F:AAA_]SDHNUM)>0
 [F:AAA_]SDHNUM = [F:SID]SDHNUM
Endif

### SDDLIN
[L]FLD="SDDLIN"
[L]FORMULE='[F:SID]SDDLIN'
If dim([F:AAA_]SDDLIN)>0
 [F:AAA_]SDDLIN = [F:SID]SDDLIN
Endif

### SRHNUM
[L]FLD="SRHNUM"
[L]FORMULE='[F:SID]SRHNUM'
If dim([F:AAA_]SRHNUM)>0
 [F:AAA_]SRHNUM = [F:SID]SRHNUM
Endif

### SRDLIN
[L]FLD="SRDLIN"
[L]FORMULE='[F:SID]SRDLIN'
If dim([F:AAA_]SRDLIN)>0
 [F:AAA_]SRDLIN = [F:SID]SRDLIN
Endif

### SIHORINUM
[L]FLD="SIHORINUM"
[L]FORMULE='[F:SID]SIHORINUM'
If dim([F:AAA_]SIHORINUM)>0
 [F:AAA_]SIHORINUM = [F:SID]SIHORINUM
Endif

### SIDORILIN
[L]FLD="SIDORILIN"
[L]FORMULE='[F:SID]SIDORILIN'
If dim([F:AAA_]SIDORILIN)>0
 [F:AAA_]SIDORILIN = [F:SID]SIDORILIN
Endif

### CONNUM
[L]FLD="CONNUM"
[L]FORMULE='[F:SID]CONNUM'
If dim([F:AAA_]CONNUM)>0
 [F:AAA_]CONNUM = [F:SID]CONNUM
Endif

### SRENUM
[L]FLD="SRENUM"
[L]FORMULE='[F:SID]SRENUM'
If dim([F:AAA_]SRENUM)>0
 [F:AAA_]SRENUM = [F:SID]SRENUM
Endif

### SGHNUM
[L]FLD="SGHNUM"
[L]FORMULE='[F:SID]SGHNUM'
If dim([F:AAA_]SGHNUM)>0
 [F:AAA_]SGHNUM = [F:SID]SGHNUM
Endif


Return

