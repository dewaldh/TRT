#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
# Mask management CCNRPR 

$_AFF
If GIMPORT
 Gosub AFF From GSAISIE
Else
 If GMESSAGE <>""
  Gosub ERR From GSAISIE
 Else
  Raz GERR , GZNUM
 Endif
Endif
Return

$HORODAT
Local Date    A_DATE
Local Char    A_HEURE(10) , A_USER(10)
Local Char    A_STAMP(15)
A_DATE  = [27/08/2018]
A_HEURE = "23:54:06"
A_USER  = "ADMIN"
A_STAMP = "20180827235406"
Return

$TITRES
Return

$CHG_FMT
Case zoncou
 When "NB_RPR"
  If [M]NB_RPR=0
  Endif
Endcase
Return

$VISU
Local Integer A_REPONSE
Global Integer GPRE_VIEW
If dim(A_WINDPREV)<=0 : Local Char A_WINDPREV(30) : Endif
Local Mask CCNRPR [RPR]
Gosub HORODAT
Local Inpbox "CCNRPR" From GFONCTION At A_STAMP With A_WINDPREV Mask [RPR] As [SIM_]
Grizo [RPR]20
Boxact [SIM_]
Gosub TITRES
Boxinp [SIM_] Using A_REPONSE
Close Local Inpbox [SIM_]
Close Local Mask [RPR]
Kill GPRE_VIEW
Return

$HARDCOP
Local Integer X1(0..14),X2(0..14),Y1(0..14),Y2(0..14)
X1(0)=1 : X2(0)=112 : Y1(0)=1 : Y2(0)=20
Return

$ON_CPY
Onevent INIT_AREA Call D_CPY(zc) From W1CCNRPR
Return

Subprog D_CPY(VALEUR)
Variable Char    VALEUR()
If varinit([M]CPY,indice)=0
 VALEUR = GCOUSOC
Endif
Gosub _AFF
End

$ON_FCY
Onevent BEFORE_AREA Gosub AV_FCY From W1CCNRPR
Onevent INIT_AREA Call D_FCY(zc) From W1CCNRPR
Return

$AV_FCY
## Action GETENVFCY
Call ACTION_FCY(zc,[M :RPR]CPY) From GLOFCYCPY
Affzo [M :RPR]CPY
## Action GETINTZL
Call GET_INTIT(zc) From GLOZLIBR
Gosub _AFF
Return

Subprog D_FCY(VALEUR)
Variable Char    VALEUR()
If varinit([M]FCY,indice)=0
 VALEUR = GCOUSIT
Endif
Gosub _AFF
End

$ON_FIYSTRDAT
Onevent BEFORE_AREA Gosub AV_FIYSTRDAT From W1CCNRPR
Return

$AV_FIYSTRDAT
Chgfmt [M]FIYSTRDAT(indice) With "DPZ:"+GFMDAT4
Gosub _AFF
Return

$ON_FIYENDDAT
Onevent BEFORE_AREA Gosub AV_FIYENDDAT From W1CCNRPR
Return

$AV_FIYENDDAT
Chgfmt [M]FIYENDDAT(indice) With "DPZ:"+GFMDAT4
Gosub _AFF
Return

$ON_STRRNWVAL
Onevent BEFORE_AREA Gosub AV_STRRNWVAL From W1CCNRPR
Return

$AV_STRRNWVAL
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]STRRNWVAL(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_ENDRNWVAL
Onevent BEFORE_AREA Gosub AV_ENDRNWVAL From W1CCNRPR
Return

$AV_ENDRNWVAL
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]ENDRNWVAL(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_RNWVALFLG
Onevent INIT_AREA Call D_RNWVALFLG(zc) From W1CCNRPR
Onevent BEFORE_INPUT Call AS_RNWVALFLG(zc) From W1CCNRPR
Return

Subprog D_RNWVALFLG(VALEUR)
Variable Integer VALEUR
If varinit([M]RNWVALFLG,indice)=0
 VALEUR = 1
Endif
Gosub _AFF
End

Subprog AS_RNWVALFLG(VALEUR)
Variable Integer VALEUR
Local Integer INDIC : INDIC = indice
Raz mkstat
If VALEUR<1
 VALEUR = 1
Endif
Gosub _AFF
End

$ON_E_1ACGRPR
Onevent BEFORE_AREA Gosub AV_E_1ACGRPR From W1CCNRPR
Return

$AV_E_1ACGRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]E_1ACGRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_E_1FISRPR
Onevent BEFORE_AREA Gosub AV_E_1FISRPR From W1CCNRPR
Return

$AV_E_1FISRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]E_1FISRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_E_1RVERPR
Onevent BEFORE_AREA Gosub AV_E_1RVERPR From W1CCNRPR
Return

$AV_E_1RVERPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]E_1RVERPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_E_1SUPCAD
Onevent BEFORE_AREA Gosub AV_E_1SUPCAD From W1CCNRPR
Return

$AV_E_1SUPCAD
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]E_1SUPCAD(indice) With "NPz3:"+GDEVFMT
Gosub _AFF
Return

$ON_EXEACGRPR
Onevent BEFORE_AREA Gosub AV_EXEACGRPR From W1CCNRPR
Return

$AV_EXEACGRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]EXEACGRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_EXEFISRPR
Onevent BEFORE_AREA Gosub AV_EXEFISRPR From W1CCNRPR
Return

$AV_EXEFISRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]EXEFISRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_EXERVERPR
Onevent BEFORE_AREA Gosub AV_EXERVERPR From W1CCNRPR
Return

$AV_EXERVERPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]EXERVERPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_EXESUPCAD
Onevent BEFORE_AREA Gosub AV_EXESUPCAD From W1CCNRPR
Return

$AV_EXESUPCAD
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]EXESUPCAD(indice) With "NPz3:"+GDEVFMT
Gosub _AFF
Return

$ON_PERSTRDAT
Onevent BEFORE_AREA Gosub AV_PERSTRDAT From W1CCNRPR
Return

$AV_PERSTRDAT
Chgfmt [M]PERSTRDAT(indice) With "DPZ:"+GFMDAT4
Gosub _AFF
Return

$ON_PERENDDAT
Onevent BEFORE_AREA Gosub AV_PERENDDAT From W1CCNRPR
Return

$AV_PERENDDAT
Chgfmt [M]PERENDDAT(indice) With "DPZ:"+GFMDAT4
Gosub _AFF
Return

$ON_P_1ACGRPR
Onevent BEFORE_AREA Gosub AV_P_1ACGRPR From W1CCNRPR
Return

$AV_P_1ACGRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]P_1ACGRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_P_1FISRPR
Onevent BEFORE_AREA Gosub AV_P_1FISRPR From W1CCNRPR
Return

$AV_P_1FISRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]P_1FISRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_P_1RVERPR
Onevent BEFORE_AREA Gosub AV_P_1RVERPR From W1CCNRPR
Return

$AV_P_1RVERPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]P_1RVERPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_P_1SUPCAD
Onevent BEFORE_AREA Gosub AV_P_1SUPCAD From W1CCNRPR
Return

$AV_P_1SUPCAD
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]P_1SUPCAD(indice) With "NPz3:"+GDEVFMT
Gosub _AFF
Return

$ON_PERACGRPR
Onevent BEFORE_AREA Gosub AV_PERACGRPR From W1CCNRPR
Return

$AV_PERACGRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]PERACGRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_PERFISRPR
Onevent BEFORE_AREA Gosub AV_PERFISRPR From W1CCNRPR
Return

$AV_PERFISRPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]PERFISRPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_PERRVERPR
Onevent BEFORE_AREA Gosub AV_PERRVERPR From W1CCNRPR
Return

$AV_PERRVERPR
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]PERRVERPR(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_PERSUPCAD
Onevent BEFORE_AREA Gosub AV_PERSUPCAD From W1CCNRPR
Return

$AV_PERSUPCAD
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]PERSUPCAD(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$ON_FLGDEV
Onevent INIT_AREA Call D_FLGDEV(zc) From W1CCNRPR
Onevent BEFORE_INPUT Call AS_FLGDEV(zc) From W1CCNRPR
Return

Subprog D_FLGDEV(VALEUR)
Variable Integer VALEUR
If varinit([M]FLGDEV,indice)=0
 VALEUR = 1
Endif
Gosub _AFF
End

Subprog AS_FLGDEV(VALEUR)
Variable Integer VALEUR
Local Integer INDIC : INDIC = indice
Raz mkstat
If VALEUR<1
 VALEUR = 1
Endif
Gosub _AFF
End

$ON_ACGRPRDEV
Onevent BEFORE_AREA Gosub AV_ACGRPRDEV From W1CCNRPR
Return

$AV_ACGRPRDEV
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find(GLOCALDEV,GDEVISE(1..GNBDEV)),1))
Chgfmt [M]ACGRPRDEV(indice) With "Nz3:"+GDEVFMT
Gosub _AFF
Return

$CHG_STY
Gosub CHG_STY From W2CCNRPR
Return

$TIT_COL
Gosub TIT_COL From W2CCNRPR
Return


