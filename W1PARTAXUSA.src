#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
# Mask management PARTAXUSA 

$_AFF
If GIMPORT
 Gosub AFF From GSAISIE
Else
 If GMESSAGE <>""
  Gosub ERR From GSAISIE
 Else
  Raz GERR , GZNUM
 Endif
Endif
Return

$HORODAT
Local Date    A_DATE
Local Char    A_HEURE(10) , A_USER(10)
Local Char    A_STAMP(15)
A_DATE  = [28/08/2018]
A_HEURE = "00:06:39"
A_USER  = "ADMIN"
A_STAMP = "20180828000639"
Return

$TITRES
Return

$CHG_FMT
Case zoncou
 When "NBLIG1"
  If [M]NBLIG1=0
  Endif
 When "NBLIG2"
  If [M]NBLIG2=0
  Endif
 When "NBLIG3"
  If [M]NBLIG3=0
  Endif
 When "NBLIG4"
  If [M]NBLIG4=0
  Endif
 When "NBLIG5"
  If [M]NBLIG5=0
  Endif
Endcase
Return

$VISU
Local Integer A_REPONSE
Global Integer GPRE_VIEW
If dim(A_WINDPREV)<=0 : Local Char A_WINDPREV(30) : Endif
Local Mask PARTAXUSA [PTU]
Gosub HORODAT
Local Inpbox "PARTAXUSA" From GFONCTION At A_STAMP With A_WINDPREV Mask [PTU] As [SIM_]
Grizo [PTU]10
Grizo [PTU]15
Grizo [PTU]20
Grizo [PTU]25
Grizo [PTU]30
Boxact [SIM_]
Gosub TITRES
Boxinp [SIM_] Using A_REPONSE
Close Local Inpbox [SIM_]
Close Local Mask [PTU]
Kill GPRE_VIEW
Return

$HARDCOP
Local Integer X1(0..14),X2(0..14),Y1(0..14),Y2(0..14)
X1(1)=56 : X2(1)=55 : Y1(1)=14 : Y2(1)=13
X1(2)=56 : X2(2)=55 : Y1(2)=14 : Y2(2)=13
X1(3)=56 : X2(3)=55 : Y1(3)=14 : Y2(3)=13
X1(4)=56 : X2(4)=55 : Y1(4)=14 : Y2(4)=13
X1(5)=56 : X2(5)=55 : Y1(5)=15 : Y2(5)=14
Return

$ON_CPY
Return

$ON_VCRNUM
Return

$ON_BPR
Return

$ON_SSTENTCOD
Onevent INIT_AREA Call D_SSTENTCOD(zc) From W1PARTAXUSA
Return

Subprog D_SSTENTCOD(VALEUR)
Variable Char    VALEUR()
If varinit([M]SSTENTCOD,indice)=0
 ## Action INILEG
 Call INILEG(VALEUR,"202","") From SUBADI
Endif
Gosub _AFF
End

$ON_CPYCUR
Return

$ON_CUR
Return

$ON_VCRTOTTAX
Onevent BEFORE_AREA Gosub AV_VCRTOTTAX From W1PARTAXUSA
Return

$AV_VCRTOTTAX
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M:PTU]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_CHGRAT
Return

$ON_STOFCYLIG1
Onevent BEFORE_AREA Gosub AV_STOFCYLIG1 From W1PARTAXUSA
Return

$AV_STOFCYLIG1
## Action FMTADRPAY
Call FMTADRPAY([M]STOFCYCRY(nolign-1)) From TRTDIV
Gosub _AFF
Return

$ON_STOFCYLIG2
Onevent BEFORE_AREA Gosub AV_STOFCYLIG2 From W1PARTAXUSA
Return

$AV_STOFCYLIG2
## Action FMTADRPAY
Call FMTADRPAY([M]STOFCYCRY(nolign-1)) From TRTDIV
Gosub _AFF
Return

$ON_STOFCYLIG3
Onevent BEFORE_AREA Gosub AV_STOFCYLIG3 From W1PARTAXUSA
Return

$AV_STOFCYLIG3
## Action FMTADRPAY
Call FMTADRPAY([M]STOFCYCRY(nolign-1)) From TRTDIV
Gosub _AFF
Return

$ON_STOFCYCTY
Onevent BEFORE_AREA Gosub AV_STOFCYCTY From W1PARTAXUSA
Return

$AV_STOFCYCTY
## Action FMTCTYPAY
Call FMTCTYPAY([M]STOFCYCRY) From TRTDIV
Gosub _AFF
Return

$ON_STOFCYPOS
Onevent BEFORE_AREA Gosub AV_STOFCYPOS From W1PARTAXUSA
Return

$AV_STOFCYPOS
## Action FMTPOSPAY
Call FMTPOSPAY([M]STOFCYCRY) From TRTDIV
Gosub _AFF
Return

$ON_STOFCYCRY
Onevent INIT_AREA Call D_STOFCYCRY(zc) From W1PARTAXUSA
Return

Subprog D_STOFCYCRY(VALEUR)
Variable Char    VALEUR()
If varinit([M]STOFCYCRY,indice)=0
 VALEUR = GPAYS
Endif
Gosub _AFF
End

$ON_BPDADDLIG1
Onevent BEFORE_AREA Gosub AV_BPDADDLIG1 From W1PARTAXUSA
Return

$AV_BPDADDLIG1
## Action FMTADRPAY
Call FMTADRPAY([M]BPDCRY(nolign-1)) From TRTDIV
Gosub _AFF
Return

$ON_BPDADDLIG2
Onevent BEFORE_AREA Gosub AV_BPDADDLIG2 From W1PARTAXUSA
Return

$AV_BPDADDLIG2
## Action FMTADRPAY
Call FMTADRPAY([M]BPDCRY(nolign-1)) From TRTDIV
Gosub _AFF
Return

$ON_BPDADDLIG3
Onevent BEFORE_AREA Gosub AV_BPDADDLIG3 From W1PARTAXUSA
Return

$AV_BPDADDLIG3
## Action FMTADRPAY
Call FMTADRPAY([M:PTU]BPDCRY(nolign-1)) From TRTDIV
Gosub _AFF
Return

$ON_BPDPOS
Onevent BEFORE_AREA Gosub AV_BPDPOS From W1PARTAXUSA
Return

$AV_BPDPOS
## Action FMTPOSPAY
Call FMTPOSPAY([M]BPDCRY) From TRTDIV
Gosub _AFF
Return

$ON_BPDCRY
Onevent INIT_AREA Call D_BPDCRY(zc) From W1PARTAXUSA
Return

Subprog D_BPDCRY(VALEUR)
Variable Char    VALEUR()
If varinit([M]BPDCRY,indice)=0
 VALEUR = GPAYS
Endif
Gosub _AFF
End

$ON_DSTOFCY
Return

$ON_ORINUM
Return

$ON_ITMREF
Return

$ON_SSTCOD
Onevent INIT_AREA Call D_SSTCOD(zc) From W1PARTAXUSA
Return

Subprog D_SSTCOD(VALEUR)
Variable Char    VALEUR()
If varinit([M]SSTCOD,indice)=0
 ## Action INILEG
 Call INILEG(VALEUR,"203","") From SUBADI
Endif
Gosub _AFF
End

$ON_AMTLIN
Onevent BEFORE_AREA Gosub AV_AMTLIN From W1PARTAXUSA
Return

$AV_AMTLIN
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_TOTAMTTAX
Onevent BEFORE_AREA Gosub AV_TOTAMTTAX From W1PARTAXUSA
Return

$AV_TOTAMTTAX
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M:PTU]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_TOTSMIBAS
Onevent BEFORE_AREA Gosub AV_TOTSMIBAS From W1PARTAXUSA
Return

$AV_TOTSMIBAS
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_DTLOVRAMT
Onevent BEFORE_AREA Gosub AV_DTLOVRAMT From W1PARTAXUSA
Return

$AV_DTLOVRAMT
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M:PTU]CUR(nolign-1),GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_SFIPRITYP
Onevent INIT_AREA Call D_SFIPRITYP(zc) From W1PARTAXUSA
Return

Subprog D_SFIPRITYP(VALEUR)
Variable Integer VALEUR
If varinit([M]SFIPRITYP,indice)=0
 VALEUR = 0
Endif
Gosub _AFF
End

$ON_AMTSFI
Onevent BEFORE_AREA Gosub AV_AMTSFI From W1PARTAXUSA
Return

$AV_AMTSFI
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_AMTSFITAX
Onevent BEFORE_AREA Gosub AV_AMTSFITAX From W1PARTAXUSA
Return

$AV_AMTSFITAX
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_SMISFIBAS
Onevent BEFORE_AREA Gosub AV_SMISFIBAS From W1PARTAXUSA
Return

$AV_SMISFIBAS
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_SFISTOFCY
Return

$ON_BASTAX
Onevent BEFORE_AREA Gosub AV_BASTAX From W1PARTAXUSA
Return

$AV_BASTAX
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_AMTNOT
Onevent BEFORE_AREA Gosub AV_AMTNOT From W1PARTAXUSA
Return

$AV_AMTNOT
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_AMTTAX
Onevent BEFORE_AREA Gosub AV_AMTTAX From W1PARTAXUSA
Return

$AV_AMTTAX
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_EXEAMTTAX
Onevent BEFORE_AREA Gosub AV_EXEAMTTAX From W1PARTAXUSA
Return

$AV_EXEAMTTAX
## Action INIDEV
GDEVFMT="11.2" : GDEVFMT = GDEVFMT1(max(find([M]CUR,GDEVISE(1..GNBDEV)),1))
Gosub _AFF
Return

$ON_PAYS
Onevent INIT_AREA Call D_PAYS(zc) From W1PARTAXUSA
Return

Subprog D_PAYS(VALEUR)
Variable Char    VALEUR()
If varinit([M]PAYS,indice)=0
 VALEUR = GPAYS
Endif
Gosub _AFF
End

$ON_SAT
Onevent BEFORE_AREA Gosub AV_SAT From W1PARTAXUSA
Return

$AV_SAT
If !GWEBSERV
 ## Action FMTSAT
 Call FMTSATPAY("","") From TRTDIV
Endif
Gosub _AFF
Return

$CHG_STY
Return


