#<AdxTL>@(#)0.0.0.0 $Revision$
# Supervisor
## BI-DIMENSION ## Synchronization rule PREQUIS

$OUVRE
Local Char FILTRE(250)
OUVTAB = GDOSSIER+".PREQUISD" : If clalev([F:PSD])=0 : Local File =OUVTAB [PSD] : Endif
OUVTAB = GDOSSIER+".PREQUIS" : If clalev([F:PSH])=0 : Local File =OUVTAB [PSH] : Endif
OUVTAB = "Link [PSD]"
Link [PSD] With
& [PSH]PSH0 = [F:PSD]PSHNUM
& As [LNK_]
& Where [F:PSD]QTYSTU-[F:PSD]ORDQTYSTU>0
& Order By Key CLE = [PSD]PSHNUM;[PSD]PSDLIN
FILTRE = ""
Return

$FERME
If clalev([F:PSD]) : Close local File [PSD] : Endif
If clalev([F:PSH]) : Close local File [PSH] : Endif
Return

$DCLE
Local Char    DCLE(GLONAVA)(1..3)
Local Integer DTYP(1..3)
Local Integer NBDCLE
NBDCLE = 3
DCLE(1) = "PSHNUM"
DTYP(1) =  7
DCLE(2) = "PSDLIN"
DTYP(2) =  3
DCLE(3) = "PSHPOH"
DTYP(3) =  7
Return

$CHARGE_CLE
If dim([F:AAA_]PSHNUM)>0
 [F:AAA_]PSHNUM = [F:PSD]PSHNUM
Endif
If dim([F:AAA_]PSDLIN)>0
 [F:AAA_]PSDLIN = [F:PSD]PSDLIN
Endif
If dim([F:AAA_]PSHPOH)>0
 [F:AAA_]PSHPOH = ""
Endif
Return

########################################################################
# Return the filter necessary for incremental delete in synchroonization
Subprog GET_FLTDELINC(PFLT)
Variable Clbfile PFLT
PFLT = "1=1"
Append PFLT, " & [F:AAA_]PSHNUM=[F:PSD]PSHNUM"
Append PFLT, " & [F:AAA_]PSDLIN=[F:PSD]PSDLIN"

End

$MAJFLD
### PSHNUM
[L]FLD="PSHNUM"
[L]FORMULE='[F:PSD]PSHNUM'
If dim([F:AAA_]PSHNUM)>0
 [F:AAA_]PSHNUM = [F:PSD]PSHNUM
Endif

### PSDLIN
[L]FLD="PSDLIN"
[L]FORMULE='[F:PSD]PSDLIN'
If dim([F:AAA_]PSDLIN)>0
 [F:AAA_]PSDLIN = [F:PSD]PSDLIN
Endif

### PSHPOH
[L]FLD="PSHPOH"
[L]FORMULE='""'
If dim([F:AAA_]PSHPOH)>0
FORMULE = ''
 [F:AAA_]PSHPOH = ''
Endif

### PRQDAT
[L]FLD="PRQDAT"
[L]FORMULE='[F:PSH]PRQDAT'
If dim([F:AAA_]PRQDAT)>0
 [F:AAA_]PRQDAT = [F:PSH]PRQDAT
Endif

### EXTRCPDAT
[L]FLD="EXTRCPDAT"
[L]FORMULE='[F:PSD]EXTRCPDAT'
If dim([F:AAA_]EXTRCPDAT)>0
 [F:AAA_]EXTRCPDAT = [F:PSD]EXTRCPDAT
Endif

### EXTORDDAT
[L]FLD="EXTORDDAT"
[L]FORMULE='[F:PSD]EXTORDDAT'
If dim([F:AAA_]EXTORDDAT)>0
 [F:AAA_]EXTORDDAT = [F:PSD]EXTORDDAT
Endif

### LINCLEFLG
[L]FLD="LINCLEFLG"
[L]FORMULE='[F:PSD]LINCLEFLG'
If dim([F:AAA_]LINCLEFLG)>0
 [F:AAA_]LINCLEFLG = [F:PSD]LINCLEFLG
Endif

### LINORDFLG
[L]FLD="LINORDFLG"
[L]FORMULE='[F:PSD]LINORDFLG'
If dim([F:AAA_]LINORDFLG)>0
 [F:AAA_]LINORDFLG = [F:PSD]LINORDFLG
Endif

### LINAPPFLG
[L]FLD="LINAPPFLG"
[L]FORMULE='[F:PSD]LINAPPFLG'
If dim([F:AAA_]LINAPPFLG)>0
 [F:AAA_]LINAPPFLG = [F:PSD]LINAPPFLG
Endif

### FBUFLG
[L]FLD="FBUFLG"
[L]FORMULE='[F:PSD]FBUFLG'
If dim([F:AAA_]FBUFLG)>0
 [F:AAA_]FBUFLG = [F:PSD]FBUFLG
Endif

### REQUSR
[L]FLD="REQUSR"
[L]FORMULE='[F:PSH]REQUSR'
If dim([F:AAA_]REQUSR)>0
 [F:AAA_]REQUSR = [F:PSH]REQUSR
Endif

### LINBUY
[L]FLD="LINBUY"
[L]FORMULE='[F:PSD]LINBUY'
If dim([F:AAA_]LINBUY)>0
 [F:AAA_]LINBUY = [F:PSD]LINBUY
Endif

### ITMDES1
[L]FLD="ITMDES1"
[L]FORMULE='[F:PSD]ITMDES1'
If dim([F:AAA_]ITMDES1)>0
 [F:AAA_]ITMDES1 = [F:PSD]ITMDES1
Endif

### PUU
[L]FLD="PUU"
[L]FORMULE='[F:PSD]PUU'
If dim([F:AAA_]PUU)>0
 [F:AAA_]PUU = [F:PSD]PUU
Endif

### GROPRI
[L]FLD="GROPRI"
[L]FORMULE='[F:PSD]GROPRI'
If dim([F:AAA_]GROPRI)>0
 [F:AAA_]GROPRI = [F:PSD]GROPRI
Endif

### NETPRI
[L]FLD="NETPRI"
[L]FORMULE='[F:PSD]NETPRI'
If dim([F:AAA_]NETPRI)>0
 [F:AAA_]NETPRI = [F:PSD]NETPRI
Endif

### ORI
[L]FLD="ORI"
[L]FORMULE='[F:PSD]ORI'
If dim([F:AAA_]ORI)>0
 [F:AAA_]ORI = [F:PSD]ORI
Endif

### CMMPRPNUM
[L]FLD="CMMPRPNUM"
[L]FORMULE='[F:PSD]CMMPRPNUM'
If dim([F:AAA_]CMMPRPNUM)>0
 [F:AAA_]CMMPRPNUM = [F:PSD]CMMPRPNUM
Endif

### PQHNUM
[L]FLD="PQHNUM"
[L]FORMULE='[F:PSD]PQHNUM'
If dim([F:AAA_]PQHNUM)>0
 [F:AAA_]PQHNUM = [F:PSD]PQHNUM
Endif

### PPDLIN
[L]FLD="PPDLIN"
[L]FORMULE='[F:PSD]PPDLIN'
If dim([F:AAA_]PPDLIN)>0
 [F:AAA_]PPDLIN = [F:PSD]PPDLIN
Endif

### WIPNUM
[L]FLD="WIPNUM"
[L]FORMULE='[F:PSD]WIPNUM'
If dim([F:AAA_]WIPNUM)>0
 [F:AAA_]WIPNUM = [F:PSD]WIPNUM
Endif

### POHNUM
[L]FLD="POHNUM"
[L]FORMULE='""'
If dim([F:AAA_]POHNUM)>0
FORMULE = ''
 [F:AAA_]POHNUM = ''
Endif

### POPLIN
[L]FLD="POPLIN"
[L]FORMULE='0'
If dim([F:AAA_]POPLIN)>0
 [F:AAA_]POPLIN = 0
Endif

### POQSEQ
[L]FLD="POQSEQ"
[L]FORMULE='0'
If dim([F:AAA_]POQSEQ)>0
 [F:AAA_]POQSEQ = 0
Endif


Return

