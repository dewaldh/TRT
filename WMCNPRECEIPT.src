#<AdxTL>@(#)0.0.0.0 $Revision$Class Receipt
# Supervisor
## ACLA-CLASSE ## PRECEIPT
# 2018-08-27 12:42:27 612

####################################################################
# AINIT
####################################################################

$AINIT
Gosub DECLARE_VAR From WMC0PRECEIPT
Local Integer ALINE,TBLINE,ASTASNAPSHOT,ALLSTAT
If this.APARENT=null & this.snapshotEnabled=0
 this.snapshotEnabled = 1
Elsif this.APARENT<>null
 this.snapshotEnabled = this.APARENT.snapshotEnabled
Endif
If this.ASTALIN=[V]CST_ALL : this.ASTALIN = [V]CST_ANEW : Endif
Gosub INIT_PTHNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CPY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PRHFCY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PURTYP From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPSNDE From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_NDEDAT From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_RCPDAT From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPSNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPAADD From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOADD From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPONAM1 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPONAM2 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOADDLIG1 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOADDLIG2 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOADDLIG3 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOPOSCOD From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOCTY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOSAT From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOCRY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPOCRYNAM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPSINV From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPAINV From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPRPAY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPAPAY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BPTNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_FFWNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_FFWADD From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CUR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CHGTYP From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CHGCOE From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_VACBPR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_VACTYP From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_DEP From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_MDL From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECNAT From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECSCH From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECTRN From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECICT From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_ICTCTY From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECLOC From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECNUM From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EECNUMDEB From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_GPGCOD From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_WEU From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_VOU From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTGROWEI From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTNETWEI From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTVOL From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_LINNBR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_INVLINNBR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_INVLINCTR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PSTLINNBR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PRNFLG From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_INVFLG From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_WINVFLG From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_WCLEFLG From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PSTFLG From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PSTDAT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BETFCY From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_BETCPY From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TEX1 From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CLATEX1 From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TEX2 From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CLATEX2 From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TRSCOD From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_ENTCOD From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_DSPWEU From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_DSPVOU From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTLINAMT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTLINQTY From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTLINWEU From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTLINVOU From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTAMTNOT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTAMTNOTL From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTTAXAMT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTAMTATI From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_TOTAMTATIL From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_WRHE From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_PJTH From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_EXPNUM From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_LEG From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CREUSR From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CREDAT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_UPDUSR From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_UPDDAT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_CREDATTIM From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_UPDDATTIM From WMC4PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_AUUID From WMC4PRECEIPT : Gosub TESTALLSTAT
Gosub INIT_SRGLOCDEF From WMC4PRECEIPT : Gosub TESTALLSTAT
Gosub AINIT From WMC0PRECEIPT : Gosub TESTALLSTAT
If this.snapshotEnabled=1 & this.APARENT=null
 [L]ASTASNAPSHOT = this.freeSnapshot
Endif
Return

####################################################################
# _ALOADATTRIBUTE
####################################################################

$_ALOADATTRIBUTE
Gosub DECLARE_VAR From WMC0PRECEIPT
Gosub _ALOADATTRIBUTE_PTHNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_CPY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_PRHFCY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_BPSNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_BPSINV From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_BPRPAY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_CUR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub _ALOADATTRIBUTE_VACBPR From WMC2PRECEIPT : Gosub TESTALLSTAT
Return

####################################################################
# _ALNKPRO
####################################################################

$_ALNKPRO
Gosub DECLARE_VAR From WMC0PRECEIPT
Gosub LNKPRO_CPY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_PRHFCY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPSNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPAADD From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOADD From WMC1PRECEIPT : Gosub TESTALLSTAT
For AINDCLA=1 To 2
 If this.COLBPONAM(AINDCLA)<>null& find(this.COLBPONAM(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.COLBPONAM(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To 3
 If this.COLBPOADDLIG(AINDCLA)<>null& find(this.COLBPOADDLIG(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.COLBPOADDLIG(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_BPOADDLIG1 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOADDLIG2 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOADDLIG3 From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOPOSCOD From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOCTY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOSAT From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPOCRY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPSINV From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPAINV From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPRPAY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPAPAY From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_BPTNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_FFWNUM From WMC1PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_FFWADD From WMC1PRECEIPT : Gosub TESTALLSTAT
For AINDCLA=1 To 5
 If this.COLTSSCOD(AINDCLA)<>null& find(this.COLTSSCOD(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.COLTSSCOD(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_CUR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_VACBPR From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_DEP From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_MDL From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_EECICT From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_ICTCTY From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_WEU From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_VOU From WMC2PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_CLATEX1 From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_CLATEX2 From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TRSCOD From WMC3PRECEIPT : Gosub TESTALLSTAT
For AINDCLA=1 To 20
 If this.COLDIE(AINDCLA)<>null& find(this.COLDIE(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.COLDIE(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Gosub LNKPRO_DSPWEU From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_DSPVOU From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TOTLINAMT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TOTAMTNOT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TOTAMTNOTL From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TOTTAXAMT From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TOTAMTATI From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_TOTAMTATIL From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_WRHE From WMC3PRECEIPT : Gosub TESTALLSTAT
Gosub LNKPRO_LEG From WMC3PRECEIPT : Gosub TESTALLSTAT
For AINDCLA=1 To maxtab(this.PTD)
 If this.PTD(AINDCLA)<>null& find(this.PTD(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.PTD(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To maxtab(this.PVF)
 If this.PVF(AINDCLA)<>null& find(this.PVF(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.PVF(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To maxtab(this.STJ)
 If this.STJ(AINDCLA)<>null& find(this.STJ(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.STJ(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
For AINDCLA=1 To maxtab(this.PVV)
 If this.PVV(AINDCLA)<>null& find(this.PVV(AINDCLA).ASTALIN,[V]CST_ADEL,[V]CST_ANEWDEL)=0
  [L]ASTATUS = fmet this.PVV(AINDCLA)._ALNKPRO : Gosub TESTALLSTAT
 Endif
Next AINDCLA
Return

$TESTALLSTAT
[L]ALLSTAT = max([L]ALLSTAT,[L]ASTATUS)
Return



